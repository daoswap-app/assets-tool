import{d as h}from"./vue-router-935545c9.js";import{E as r}from"./___vite-browser-external_commonjs-proxy-7f1f402a.js";import{u as _,w as k}from"./index-32864bd7.js";import{u as c}from"./web3Modal-6c97c605.js";import{m as C}from"./message-b641d895.js";import{x,r as l,o as S,j as B,a7 as E,y as n,z as s,A as W,P as f,I as v,M as y,O as i,u}from"./runtime-core.esm-bundler-c80a0204.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import"./vue-i18n.runtime.esm-bundler-d653d868.js";import"./web3.min-18b32501.js";import"./chains-85289d49.js";import"./index-aa74f938.js";const I={class:"container"},L={key:0,class:"wallet"},M={key:1},N={key:2},U=x({__name:"web3Connect",setup(V){const w=h(),o=l(!1),a=l(null),t=l(!0);async function d(){try{o.value=!0,c().getConnectedWallet().then(async e=>{t.value=e.isSupport,a.value=c().getWeb3,e.address&&t.value&&await b(),o.value=!1})}catch(e){console.error(e),o.value=!1}}function g(){c().disconnectWallet(),_().logOut()}const b=async()=>{o.value=!0,_().loginByUsername({username:"admin",password:"admin123"}).then(e=>{e.success&&k().then(()=>{w.push("/"),C("登录成功",{type:"success"})}),o.value=!1})};function p({code:e}){e==="Enter"&&d()}return S(()=>{window.document.addEventListener("keypress",p)}),B(()=>{window.document.removeEventListener("keypress",p)}),(e,H)=>{const m=E("el-button");return n(),s("div",null,[W("div",I,[a.value&&t.value?(n(),s("div",L,[f(m,{class:"w-full",size:"default",type:"danger",loading:o.value,onClick:g},{default:v(()=>[y(i(u(r)("web3.disconnect")),1)]),_:1},8,["loading"])])):!a.value&&t.value?(n(),s("div",M,[f(m,{class:"w-full",size:"default",type:"primary",loading:o.value,onClick:d},{default:v(()=>[y(i(u(r)("web3.connectWallet")),1)]),_:1},8,["loading"])])):(n(),s("div",N,i(u(r)("web3.noSupportChain")),1))])])}}});const K=z(U,[["__scopeId","data-v-d06459bd"]]);export{K as default};
