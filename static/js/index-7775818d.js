import{t as i}from"./i18n-c677edf9.js";import{u as S}from"./web3Modal-e725f7b8.js";import{f as H}from"./formatters-607f9df1.js";import{c as Y,i as Z}from"./addresses-c9475005.js";import{u as V,g as R,M as ee,e as j}from"./web3-1b4edc00.js";import{x as I,r as d,o as q,w as E,a7 as u,aa as z,y as h,H as x,I as e,J as P,M as B,O as v,u as p,P as t,z as $,a0 as te,F as ae,A as b}from"./runtime-core.esm-bundler-c80a0204.js";import"./__vite-browser-external-c2c4480c.js";import"./vue-i18n.runtime.esm-bundler-d653d868.js";import"./index-1278628c.js";import"./preload-helper-101896b7.js";import"./vue-router-935545c9.js";import"./___vite-browser-external_commonjs-proxy-66fe83c2.js";import"./utils-6de8de71.js";import"./index-aa19b975.js";const J=[{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint8",name:"decimals",type:"uint8"},{internalType:"uint256",name:"totalSupply",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"}],name:"MinterAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"}],name:"MinterRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"}],name:"PauserAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"}],name:"PauserRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{constant:!1,inputs:[{internalType:"address",name:"account",type:"address"}],name:"addMinter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"account",type:"address"}],name:"addPauser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"isMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"isPauser",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renounceMinter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"renouncePauser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],ne=I({__name:"SendTransaction",props:{visible:{type:Boolean,default:!1},data:{type:Object,default:()=>null},tokenList:{type:Object,default:()=>[]}},emits:["update:visible"],setup(L,{emit:C}){const _=L,y=d(!1),m=d(!1),T=d(""),M=d(null),f=d(null),F={sendAddress:"",recipientAddress:"0x9b1d0c9c1aE96011776e6786b4Efe884665918D2",assetToken:"",amount:"10"},W=d(),a=d(F);q(()=>{T.value=V().getWallet,M.value=S().getWallet,f.value=S().getWeb3,a.value.sendAddress=T.value});const A=(o,l,n)=>{l===""?n(new Error(i("transaction.please input recipient address"))):(a.value.recipientAddress=Y(a.value.recipientAddress),Z(a.value.recipientAddress)?n():n(new Error(i("transaction.invalid recipient address"))))},w=async()=>await W.value.validate(o=>!!o),c=async()=>{if(await w()){y.value=!0;const l=R(ee,V().getWallet,f.value),n={destination:a.value.recipientAddress,value:j(a.value.amount,f.value),data:"0x"};if(a.value.assetToken){const s=R(J,a.value.assetToken,f.value),k=j(a.value.amount,f.value),D=await s.methods.transfer(a.value.recipientAddress,k).encodeABI();n.destination=a.value.assetToken,n.value="0",n.data=D}l.methods.submitTransaction(n.destination,n.value,n.data).send({from:M.value.address}).then(s=>{console.info(s)}).catch(s=>{console.error(s)}).finally(()=>{y.value=!1,g()})}},g=()=>{m.value=!1};return E(()=>m.value,o=>{C("update:visible",o)}),E(()=>_.visible,o=>{m.value=o}),E(()=>_.data,o=>{a.value.assetToken=o?o.token:""}),(o,l)=>{const n=u("el-col"),s=u("el-row"),k=u("el-form-item"),D=u("el-divider"),U=u("el-input"),G=u("el-option"),K=u("el-select"),Q=u("el-form"),O=u("el-button"),X=u("el-dialog"),N=z("loading");return h(),x(X,{modelValue:m.value,"onUpdate:modelValue":l[3]||(l[3]=r=>m.value=r),title:p(i)("transaction.sendTokens"),width:"80%",draggable:"","close-on-click-modal":!1,"before-close":g},{footer:e(()=>[P((h(),x(O,{onClick:g},{default:e(()=>[B(v(p(i)("wallet.btnCancel")),1)]),_:1})),[[N,y.value]]),P((h(),x(O,{type:"primary",onClick:c},{default:e(()=>[B(v(p(i)("wallet.btnSubmit")),1)]),_:1})),[[N,y.value]])]),default:e(()=>[t(Q,{ref_key:"transactionFormRef",ref:W,model:a.value,"label-width":"100px",class:"demo-ruleForm","hide-required-asterisk":!0},{default:e(()=>[t(k,{prop:"sendAddress",label:p(i)("transaction.sendAddress"),style:{width:"100%"}},{default:e(()=>[t(s,{gutter:20,style:{width:"100%"}},{default:e(()=>[t(n,{span:24},{default:e(()=>[B(v(a.value.sendAddress),1)]),_:1})]),_:1})]),_:1},8,["label"]),t(D),t(k,{prop:"recipientAddress",label:p(i)("transaction.recipientAddress"),style:{width:"100%"},rules:[{validator:A,trigger:"blur"}]},{default:e(()=>[t(s,{gutter:20,style:{width:"100%"}},{default:e(()=>[t(n,{span:24},{default:e(()=>[t(U,{modelValue:a.value.recipientAddress,"onUpdate:modelValue":l[0]||(l[0]=r=>a.value.recipientAddress=r)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["label","rules"]),t(k,{prop:"assetToken",label:p(i)("transaction.assetToken"),style:{width:"100%"}},{default:e(()=>[t(s,{gutter:20,style:{width:"100%"}},{default:e(()=>[t(n,{span:24},{default:e(()=>[t(K,{modelValue:a.value.assetToken,"onUpdate:modelValue":l[1]||(l[1]=r=>a.value.assetToken=r),style:{width:"100%"}},{default:e(()=>[(h(!0),$(ae,null,te(_.tokenList,r=>(h(),x(G,{key:r.token,label:r.symbol+(r.token?" - "+r.token:""),value:r.token},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["label"]),t(k,{prop:"amount",label:p(i)("transaction.amount"),style:{width:"100%"},rules:[{required:!0,message:p(i)("transaction.please input amount"),trigger:"blur"}]},{default:e(()=>[t(s,{gutter:20,style:{width:"100%"}},{default:e(()=>[t(n,{span:24},{default:e(()=>[t(U,{modelValue:a.value.amount,"onUpdate:modelValue":l[2]||(l[2]=r=>a.value.amount=r)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),se={class:"card-header"},le={class:"font-medium"},oe={style:{display:"flex","align-items":"left"}},ie=b("i",{class:"el-icon-time"},null,-1),ue={style:{"margin-left":"10px"}},re={style:{display:"flex","align-items":"left"}},pe={style:{"margin-left":"3px"}},de=I({name:"Assets"}),xe=I({...de,setup(L){const C=["0xdb5D970F03bfD19c1E51D57BcEd114BC35A0808f"],_=d(!1),y=d(null),m=d(null),T=d([]),M=d(!1),f=d(null);async function F(){m.value=V().getWallet,y.value=S().getWeb3}const W=async()=>{_.value=!0;const A=await y.value.eth.getBalance(V().getWallet);T.value.push({symbol:"BNB",token:"",balance:H(A,18)}),C.map(async w=>{const c=R(J,w,y.value),g=await c.methods.symbol().call(),o=await c.methods.decimals().call(),l=await c.methods.balanceOf(V().getWallet).call(),n={symbol:g,token:w,balance:H(l,o)};T.value.push(n)}),_.value=!1};q(()=>{F(),W()});const a=A=>{M.value=!0,f.value=A};return(A,w)=>{const c=u("el-table-column"),g=u("el-button"),o=u("el-table"),l=u("el-card"),n=z("loading");return h(),$("div",null,[t(l,{shadow:"never"},{header:e(()=>[b("div",se,[b("span",le,v(p(i)("assets.assets")+"-"+m.value),1)])]),default:e(()=>[P((h(),x(o,{data:T.value,style:{width:"100%"}},{default:e(()=>[t(c,{label:p(i)("assets.asset")},{default:e(s=>[b("div",oe,[ie,b("span",ue,v(s.row.symbol),1)])]),_:1},8,["label"]),t(c,{label:p(i)("assets.balance")},{default:e(s=>[b("div",re,[b("span",null,v(s.row.balance),1),b("span",pe,v(s.row.symbol),1)])]),_:1},8,["label"]),t(c,{label:p(i)("assets.operation")},{default:e(s=>[t(g,{type:"primary",size:"small",onClick:k=>a(s.row)},{default:e(()=>[B(v(p(i)("wallet.btnSend")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[n,_.value]])]),_:1}),t(ne,{visible:M.value,"onUpdate:visible":w[0]||(w[0]=s=>M.value=s),data:f.value,tokenList:T.value},null,8,["visible","data","tokenList"])])}}});export{xe as default};
