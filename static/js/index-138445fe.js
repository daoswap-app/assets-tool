import{t as c}from"./i18n-c677edf9.js";import{u as h,g,M as x,w as z}from"./web3-ed59ec2e.js";import{u as C}from"./web3Modal-7484dbf1.js";import{x as T,r as u,o as A,a7 as m,y as k,z as D,P as n,I as a,A as l,O as i,u as o,H as G,M as B,L}from"./runtime-core.esm-bundler-c80a0204.js";import"./__vite-browser-external-c2c4480c.js";import"./vue-i18n.runtime.esm-bundler-d653d868.js";import"./index-dd8ad2b3.js";import"./preload-helper-101896b7.js";import"./vue-router-935545c9.js";import"./___vite-browser-external_commonjs-proxy-66fe83c2.js";const $=[{name:"Görli Ether",token:"0xdb5d970f03bfd19c1e51d57bced114bc35a0808f",balance:"0.2",symbol:"ETH"},{name:"BNB Mainnet",token:"0xdb5d970f03bfd19c1e51d57bced114bc35a0808f",balance:"1.1",symbol:"BNB"},{name:"BNB Testnet",token:"0xdb5d970f03bfd19c1e51d57bced114bc35a0808f",balance:"0.1",symbol:"tbnb"},{name:"Görli Ether",token:"0xdb5d970f03bfd19c1e51d57bced114bc35a0808f",balance:"0.3",symbol:"ETH"}],q={class:"card-header"},O={class:"font-medium"},P={style:{display:"flex","align-items":"left"}},Q=l("i",{class:"el-icon-time"},null,-1),U={style:{"margin-left":"10px"}},j={style:{display:"flex","align-items":"left"}},F={style:{"margin-left":"3px"}},J={style:{display:"flex","align-items":"left"}},K=l("i",{class:"el-icon-time"},null,-1),R={style:{"margin-left":"10px"}},X={style:{display:"flex","align-items":"left"}},Y={style:{"margin-left":"3px"}},Z=T({name:"Transactions"}),ue=T({...Z,setup(ee){const f=u(!1),W=u(null),b=u(null),_=u(null),w=u([]),S=async()=>{f.value=!0;const s=g(x,h().getWallet,_.value),r=await s.methods.getTransactionCount(0).call();for(let e=0;e<r;e++){const d=await s.methods.getTransaction(e).call(),p=await s.methods.getTransactionConfirmationStatus(e,b.value.address).call(),v={id:e,destination:d.destination,value:z(d.value,_.value),executeState:d.state,confirmStatus:p};w.value.push(v)}};A(()=>{W.value=h().getWallet,b.value=C().getWallet,_.value=C().getWeb3,S()});const y=u("0");function E({index:s}){y.value=s}const N=s=>{f.value=!0,g(x,h().getWallet,_.value).methods.confirmTransaction(s.id).send({from:b.value.address}).then(e=>{console.info(e)}).catch(e=>{console.error(e)}).finally(()=>{f.value=!1})},V=s=>{f.value=!0,g(x,h().getWallet,_.value).methods.executeTransaction(s.id).send({from:b.value.address}).then(e=>{console.info(e)}).catch(e=>{console.error(e)}).finally(()=>{f.value=!1})};return(s,r)=>{const e=m("el-table-column"),d=m("el-button"),p=m("el-table"),v=m("el-tab-pane"),H=m("el-tabs"),M=m("el-card");return k(),D("div",null,[n(M,{shadow:"never"},{header:a(()=>[l("div",q,[l("span",O,i(o(c)("transaction.transactions")),1)])]),default:a(()=>[n(H,{modelValue:y.value,"onUpdate:modelValue":r[0]||(r[0]=t=>y.value=t),onTabClick:E},{default:a(()=>[n(v,{label:o(c)("transaction.queue"),name:"0"},{default:a(()=>[n(p,{data:w.value,style:{width:"100%"}},{default:a(()=>[n(e,{label:o(c)("transaction.destination")},{default:a(t=>[l("div",P,[Q,l("span",U,i(t.row.destination),1)])]),_:1},8,["label"]),n(e,{label:o(c)("transaction.value")},{default:a(t=>[l("div",j,[l("span",null,i(t.row.value),1),l("span",F,i(t.row.symbol),1)])]),_:1},8,["label"]),n(e,{label:o(c)("assets.operation")},{default:a(t=>[t.row.confirmStatus?L("",!0):(k(),G(d,{key:0,type:"primary",size:"small",onClick:I=>N(t.row)},{default:a(()=>[B(i(o(c)("transaction.btnConfirm")),1)]),_:2},1032,["onClick"])),n(d,{type:"primary",size:"small",onClick:I=>V(t.row)},{default:a(()=>[B(i(o(c)("transaction.btnExecute")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["label"]),n(v,{label:o(c)("transaction.history"),name:"1"},{default:a(()=>[n(p,{data:o($),style:{width:"100%"}},{default:a(()=>[n(e,{label:o(c)("assets.asset")},{default:a(t=>[l("div",J,[K,l("span",R,i(t.row.name),1)])]),_:1},8,["label"]),n(e,{label:o(c)("assets.balance")},{default:a(t=>[l("div",X,[l("span",null,i(t.row.balance),1),l("span",Y,i(t.row.symbol),1)])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1})])}}});export{ue as default};
