import{t as c}from"./i18n-c677edf9.js";import{u as y,g as w,M as C,w as T}from"./web3-ec174890.js";import{u as k}from"./web3Modal-ce195ba9.js";import{x as V,r as d,o as D,a7 as p,y as W,z as L,P as s,I as n,A as o,O as u,u as r,H as P,M as B,L as $}from"./runtime-core.esm-bundler-c80a0204.js";import"./__vite-browser-external-c2c4480c.js";import"./vue-i18n.runtime.esm-bundler-d653d868.js";import"./index-f3f9a886.js";import"./preload-helper-101896b7.js";import"./vue-router-935545c9.js";import"./___vite-browser-external_commonjs-proxy-66fe83c2.js";const q={class:"card-header"},O={class:"font-medium"},Q={style:{display:"flex","align-items":"left"}},U=o("i",{class:"el-icon-time"},null,-1),j={style:{"margin-left":"10px"}},F={style:{display:"flex","align-items":"left"}},G={style:{"margin-left":"3px"}},J={style:{display:"flex","align-items":"left"}},K=o("i",{class:"el-icon-time"},null,-1),R={style:{"margin-left":"10px"}},X={style:{display:"flex","align-items":"left"}},Y={style:{"margin-left":"3px"}},Z=V({name:"Transactions"}),dt=V({...Z,setup(tt){const v=d(!1),I=d(null),b=d(null),m=d(null),x=d([]),S=d([]),M=async()=>{v.value=!0;const l=w(C,y().getWallet,m.value),_=await l.methods.getTransactionCount(0).call();for(let a=0;a<_;a++){const i=await l.methods.getTransaction(a).call(),f=await l.methods.getTransactionConfirmationStatus(a,b.value.address).call(),h={id:a,destination:i.destination,value:T(i.value,m.value),executeState:i.state,confirmStatus:f};x.value.push(h)}const t=await l.methods.getTransactionCount(1).call();for(let a=0;a<t;a++){const i=await l.methods.getTransaction(a).call(),f=await l.methods.getTransactionConfirmationStatus(a,b.value.address).call(),h={id:a,destination:i.destination,value:T(i.value,m.value),executeState:i.state,confirmStatus:f};S.value.push(h)}};D(()=>{I.value=y().getWallet,b.value=k().getWallet,m.value=k().getWeb3,M()});const g=d("0");function A({index:l}){g.value=l}const E=l=>{v.value=!0,w(C,y().getWallet,m.value).methods.confirmTransaction(l.id).send({from:b.value.address}).then(t=>{console.info(t)}).catch(t=>{console.error(t)}).finally(()=>{v.value=!1})},H=l=>{v.value=!0,w(C,y().getWallet,m.value).methods.executeTransaction(l.id).send({from:b.value.address}).then(t=>{console.info(t)}).catch(t=>{console.error(t)}).finally(()=>{v.value=!1})};return(l,_)=>{const t=p("el-table-column"),a=p("el-button"),i=p("el-table"),f=p("el-tab-pane"),h=p("el-tabs"),N=p("el-card");return W(),L("div",null,[s(N,{shadow:"never"},{header:n(()=>[o("div",q,[o("span",O,u(r(c)("transaction.transactions")),1)])]),default:n(()=>[s(h,{modelValue:g.value,"onUpdate:modelValue":_[0]||(_[0]=e=>g.value=e),onTabClick:A},{default:n(()=>[s(f,{label:r(c)("transaction.queue"),name:"0"},{default:n(()=>[s(i,{data:x.value,style:{width:"100%"}},{default:n(()=>[s(t,{label:r(c)("transaction.destination")},{default:n(e=>[o("div",Q,[U,o("span",j,u(e.row.destination),1)])]),_:1},8,["label"]),s(t,{label:r(c)("transaction.value")},{default:n(e=>[o("div",F,[o("span",null,u(e.row.value),1),o("span",G,u(e.row.symbol),1)])]),_:1},8,["label"]),s(t,{label:r(c)("assets.operation")},{default:n(e=>[e.row.confirmStatus?$("",!0):(W(),P(a,{key:0,type:"primary",size:"small",onClick:z=>E(e.row)},{default:n(()=>[B(u(r(c)("transaction.btnConfirm")),1)]),_:2},1032,["onClick"])),s(a,{type:"primary",size:"small",onClick:z=>H(e.row)},{default:n(()=>[B(u(r(c)("transaction.btnExecute")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["label"]),s(f,{label:r(c)("transaction.history"),name:"1"},{default:n(()=>[s(i,{data:S.value,style:{width:"100%"}},{default:n(()=>[s(t,{label:r(c)("transaction.destination")},{default:n(e=>[o("div",J,[K,o("span",R,u(e.row.destination),1)])]),_:1},8,["label"]),s(t,{label:r(c)("transaction.value")},{default:n(e=>[o("div",X,[o("span",null,u(e.row.value),1),o("span",Y,u(e.row.symbol),1)])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1})])}}});export{dt as default};
