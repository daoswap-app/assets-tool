import{t as b,v as S}from"./i18n-4a0f4af2.js";import H from"./Card-1e665c7b.js";import{A as U,_ as $,W as J}from"./add-circle-line-27d8bd35.js";import{u as q}from"./hooks-51d06512.js";import{W as G}from"./constants-b9202782.js";import{g as K}from"./web3-dfdb1234.js";import{u as m}from"./wallet-9d9b6135.js";import{x,r,o as Q,a7 as s,aa as X,y as c,z as v,A as Y,P as n,I as d,M as Z,O as ee,u as p,J as W,F as k,a0 as te,H as le,L as ae,S as z}from"./runtime-core.esm-bundler-c80a0204.js";import"./vue-i18n.runtime.esm-bundler-d653d868.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./addresses-acfad7e8.js";import"./utils-47c995b4.js";import"./index-b5479df7.js";import"./___vite-browser-external_commonjs-proxy-e8043f7a.js";import"./web3Modal-4ce521cd.js";import"./web3.min-16c48c0e.js";import"./index-51c58d4e.js";import"./vue-router-935545c9.js";import"./index-7a7855ce.js";const oe={width:1024,height:1024,body:'<path fill="currentColor" d="m795.904 750.72l124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704a352 352 0 0 0 0 704z"/>'},ne=oe,se={class:"main"},re={class:"w-full flex justify-between mb-4"},ue=x({name:"HomeWallet"}),xe=x({...ue,props:{connectedWallet:{type:Object,default:null},web3:{type:Object,default:null}},setup(D){const f=D,A=`
        <path class="path" d="
          M 30 15
          L 28 17
          M 25.61 25.61
          A 15 15, 0, 0, 1, 15 30
          A 15 15, 0, 1, 1, 27.99 7.5
          L 15 15
        " style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>
      `,e=r({current:1,pageSize:12,total:0}),l=r([]),g=r(!0),u=r(null),_=async()=>{try{const o=await K(J,G[f.connectedWallet.chainId],f.web3).methods.getWalletList().call({from:f.connectedWallet.address});l.value=o,l.value.length>0?u.value?l.value.filter(w=>w.token.toLowerCase()===u.value.toLowerCase()).length<=0&&(m().setDefaultWallet(l.value[0].token),u.value=l.value[0].token):(m().setDefaultWallet(l.value[0].token),u.value=l.value[0].token):m().removeDefaultWallet(),e.value={...e.value,total:l.value.length}}catch{}finally{setTimeout(()=>{g.value=!1},500)}};Q(()=>{_()});const h=r(!1),C=r(null),i=r(""),I=a=>{e.value.pageSize=a,e.value.current=1},V=a=>{e.value.current=a},y=a=>{h.value=!0,z(()=>{C.value=a??null})},B=a=>{z(()=>{g.value=!0,m().setDefaultWallet(a.token),e.value.total=0,_()})},M=()=>{_()};return(a,o)=>{const L=s("el-button"),w=s("IconifyIconOffline"),O=s("el-icon"),T=s("el-input"),N=s("el-empty"),P=s("el-col"),R=s("el-row"),j=s("el-pagination"),E=X("loading");return c(),v("div",se,[Y("div",re,[n(L,{icon:p(q)(p(U)),onClick:o[0]||(o[0]=t=>y())},{default:d(()=>[Z(ee(p(b)("wallet.btnAdd")),1)]),_:1},8,["icon"]),n(T,{style:{width:"300px"},modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=t=>i.value=t),placeholder:p(b)("wallet.address"),clearable:""},{suffix:d(()=>[n(O,{class:"el-input__icon"},{default:d(()=>[W(n(w,{icon:p(ne)},null,8,["icon"]),[[S,i.value.length===0]])]),_:1})]),_:1},8,["modelValue","placeholder"])]),W((c(),v("div",{"element-loading-svg":A,"element-loading-svg-view-box":"-10, -10, 50, 50"},[W(n(N,{description:"暂无数据"},null,512),[[S,l.value.slice(e.value.pageSize*(e.value.current-1),e.value.pageSize*e.value.current).filter(t=>t.name.toLowerCase().includes(i.value.toLowerCase())).length===0]]),e.value.total>0?(c(),v(k,{key:0},[n(R,{gutter:16},{default:d(()=>[(c(!0),v(k,null,te(l.value.slice(e.value.pageSize*(e.value.current-1),e.value.pageSize*e.value.current).filter(t=>t.name.toLowerCase().includes(i.value.toLowerCase())),(t,F)=>(c(),le(P,{key:F,xs:24,sm:12,md:8,lg:6,xl:4},{default:d(()=>[n(H,{wallet:t,"default-wallet":u.value,onManageWallet:y,onChangeWallet:B},null,8,["wallet","default-wallet"])]),_:2},1024))),128))]),_:1}),n(j,{class:"float-right",currentPage:e.value.current,"onUpdate:currentPage":o[2]||(o[2]=t=>e.value.current=t),"page-size":e.value.pageSize,total:e.value.total,"page-sizes":[12,24,36],background:!0,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:I,onCurrentChange:V},null,8,["currentPage","page-size","total"])],64)):ae("",!0)])),[[E,g.value]]),n($,{visible:h.value,"onUpdate:visible":o[3]||(o[3]=t=>h.value=t),data:C.value,onRefreshWalletList:M},null,8,["visible","data"])])}}});export{xe as default};
