import{D as Cn,i as Sn}from"./___vite-browser-external_commonjs-proxy-1cc6769e.js";import{a5 as On,a6 as Un,a7 as Ln,a8 as Fn,a9 as Dn,aa as jn,ab as Mn,ac as $n,ad as Tr,ae as m,af as E,ag as V,ah as Se,ai as nt,aj as ye,ak as it,I as vt,al as j,am as Pt,w as Ar,an as Z,ao as L,ap as Rr,aq as z,ar as R,as as ce,x as Pr,at as q,au as Oe,av as we,aw as K,h as Ue,ax as be,ay as he,az as Ir,aA as ne,k as Ae,j as Br,aB as ve,aC as Xe,aD as qn,t as Ze,b as It,aE as ue,aF as Gn,K as Et,T as kt,aG as Cr,Q as Sr,A as Wn,v as Hn,F as Jn,C as zn,E as Kn,r as Vn,s as Xn,P as Zn,u as Yn,Z as Qn,aH as ei,aI as ti,aJ as ri,aK as ni,aL as ii,aM as si,aN as oi,L as ai,y as li,B as ci,aO as ui,n as hi,_ as fi,a as di,U as pi,f as gi,p as mi,q as yi,l as wi,i as bi,aP as vi,aQ as Ei,a4 as ki,aR as _i,aS as xi,aT as Ni,aU as Ti,aV as Ai,H as Ri,aW as Pi,J as Ii,M as Bi,O as Ci,aX as Si,aY as Oi,aZ as Ui,a_ as Li,a$ as Fi,b0 as Di,b1 as ji,b2 as Mi,b3 as $i,b4 as qi,b5 as Gi,b6 as Wi,b7 as Hi,b8 as Ji,b9 as zi,ba as Ki,bb as Vi,bc as Xi,bd as Zi,S as Yi,e as Qi,d as es,be as Or,bf as Ur,bg as Lr,bh as Fr,bi as Dr}from"./chains-f720db1d.js";const jr="0x0000000000000000000000000000000000000000",ts="Ξ",Mr=Object.freeze(Object.defineProperty({__proto__:null,AddressZero:jr,NegativeOne:On,Zero:Un,One:Ln,Two:Fn,WeiPerEther:Dn,MaxUint256:jn,MinInt256:Mn,MaxInt256:$n,HashZero:Tr,EtherSymbol:ts},Symbol.toStringTag,{value:"Module"}));function po(i){return function(e,t){const r=e[i];return t[i]-r}}function go(i,e){if(i==="")return"";if(arguments.length===0)return null;const t=e||"{y}-{m}-{d} {h}:{i}:{s}";let r;typeof i=="object"?r=i:(typeof i=="string"&&/^[0-9]+$/.test(i)&&(i=parseInt(i)),typeof i=="number"&&i.toString().length===10&&(i=i*1e3),r=new Date(i));const n={y:r.getFullYear(),m:r.getMonth()+1,d:r.getDate(),h:r.getHours(),i:r.getMinutes(),s:r.getSeconds(),a:r.getDay()};return t.replace(/{([ymdhisa])+}/g,(l,c)=>{const f=n[c];return c==="a"?["日","一","二","三","四","五","六"][f]:f.toString().padStart(2,"0")})}const rs="contracts/5.7.0";var se=globalThis&&globalThis.__awaiter||function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{d(r.next(g))}catch(w){l(w)}}function f(g){try{d(r.throw(g))}catch(w){l(w)}}function d(g){g.done?a(g.value):n(g.value).then(c,f)}d((r=r.apply(i,e||[])).next())})};const B=new m(rs),ns={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0,ccipReadEnabled:!0};function Ye(i,e){return se(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&B.throwArgumentError("invalid address or ENS name","name",t);try{return ye(t)}catch{}i||B.throwError("a provider or signer is needed to resolve ENS names",m.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const r=yield i.resolveName(t);return r==null&&B.throwArgumentError("resolver or addr is not configured for ENS name","name",t),r})}function Re(i,e,t){return se(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((r,n)=>Re(i,Array.isArray(e)?e[n]:e[r.name],r))):t.type==="address"?yield Ye(i,e):t.type==="tuple"?yield Re(i,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(r=>Re(i,r,t.arrayChildren))):Promise.reject(B.makeError("invalid value for array",m.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function st(i,e,t){return se(this,void 0,void 0,function*(){let r={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(r=j(t.pop())),B.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),i.signer?r.from?r.from=q({override:Ye(i.signer,r.from),signer:i.signer.getAddress()}).then(d=>se(this,void 0,void 0,function*(){return ye(d.signer)!==d.override&&B.throwError("Contract with a Signer cannot override from",m.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),d.override})):r.from=i.signer.getAddress():r.from&&(r.from=Ye(i.provider,r.from));const n=yield q({args:Re(i.signer||i.provider,t,e.inputs),address:i.resolvedAddress,overrides:q(r)||{}}),a=i.interface.encodeFunctionData(e,n.args),l={data:a,to:n.address},c=n.overrides;if(c.nonce!=null&&(l.nonce=R.from(c.nonce).toNumber()),c.gasLimit!=null&&(l.gasLimit=R.from(c.gasLimit)),c.gasPrice!=null&&(l.gasPrice=R.from(c.gasPrice)),c.maxFeePerGas!=null&&(l.maxFeePerGas=R.from(c.maxFeePerGas)),c.maxPriorityFeePerGas!=null&&(l.maxPriorityFeePerGas=R.from(c.maxPriorityFeePerGas)),c.from!=null&&(l.from=c.from),c.type!=null&&(l.type=c.type),c.accessList!=null&&(l.accessList=Oe(c.accessList)),l.gasLimit==null&&e.gas!=null){let d=21e3;const g=we(a);for(let w=0;w<g.length;w++)d+=4,g[w]&&(d+=64);l.gasLimit=R.from(e.gas).add(d)}if(c.value){const d=R.from(c.value);!d.isZero()&&!e.payable&&B.throwError("non-payable method cannot override value",m.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),l.value=d}c.customData&&(l.customData=j(c.customData)),c.ccipReadEnabled&&(l.ccipReadEnabled=!!c.ccipReadEnabled),delete r.nonce,delete r.gasLimit,delete r.gasPrice,delete r.from,delete r.value,delete r.type,delete r.accessList,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.customData,delete r.ccipReadEnabled;const f=Object.keys(r).filter(d=>r[d]!=null);return f.length&&B.throwError(`cannot override ${f.map(d=>JSON.stringify(d)).join(",")}`,m.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:f}),l})}function is(i,e){return function(...t){return st(i,e,t)}}function ss(i,e){const t=i.signer||i.provider;return function(...r){return se(this,void 0,void 0,function*(){t||B.throwError("estimate require a provider or signer",m.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const n=yield st(i,e,r);return yield t.estimateGas(n)})}}function $r(i,e){const t=e.wait.bind(e);e.wait=r=>t(r).then(n=>(n.events=n.logs.map(a=>{let l=Z(a),c=null;try{c=i.interface.parseLog(a)}catch{}return c&&(l.args=c.args,l.decode=(f,d)=>i.interface.decodeEventLog(c.eventFragment,f,d),l.event=c.name,l.eventSignature=c.signature),l.removeListener=()=>i.provider,l.getBlock=()=>i.provider.getBlock(n.blockHash),l.getTransaction=()=>i.provider.getTransaction(n.transactionHash),l.getTransactionReceipt=()=>Promise.resolve(n),l}),n))}function qr(i,e,t){const r=i.signer||i.provider;return function(...n){return se(this,void 0,void 0,function*(){let a;if(n.length===e.inputs.length+1&&typeof n[n.length-1]=="object"){const f=j(n.pop());f.blockTag!=null&&(a=yield f.blockTag),delete f.blockTag,n.push(f)}i.deployTransaction!=null&&(yield i._deployed(a));const l=yield st(i,e,n),c=yield r.call(l,a);try{let f=i.interface.decodeFunctionResult(e,c);return t&&e.outputs.length===1&&(f=f[0]),f}catch(f){throw f.code===m.errors.CALL_EXCEPTION&&(f.address=i.address,f.args=n,f.transaction=l),f}})}}function os(i,e){return function(...t){return se(this,void 0,void 0,function*(){i.signer||B.throwError("sending a transaction requires a signer",m.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),i.deployTransaction!=null&&(yield i._deployed());const r=yield st(i,e,t),n=yield i.signer.sendTransaction(r);return $r(i,n),n})}}function Xt(i,e,t){return e.constant?qr(i,e,t):os(i,e)}function Gr(i){return i.address&&(i.topics==null||i.topics.length===0)?"*":(i.address||"*")+"@"+(i.topics?i.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class Be{constructor(e,t){E(this,"tag",e),E(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(r=>t||r.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(r=>{const n=e.slice();return setTimeout(()=>{r.listener.apply(this,n)},0),!r.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class as extends Be{constructor(){super("error",null)}}class Zt extends Be{constructor(e,t,r,n){const a={address:e};let l=t.getEventTopic(r);n?(l!==n[0]&&B.throwArgumentError("topic mismatch","topics",n),a.topics=n.slice()):a.topics=[l],super(Gr(a),a),E(this,"address",e),E(this,"interface",t),E(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,r)=>this.interface.decodeEventLog(this.fragment,t,r);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=Pr(e.args);if(t.length)throw t[0].error;const r=(e.args||[]).slice();return r.push(e),r}}class Yt extends Be{constructor(e,t){super("*",{address:e}),E(this,"address",e),E(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(r,n)=>this.interface.decodeEventLog(t.eventFragment,r,n),e.args=t.args}catch{}}}class Bt{constructor(e,t,r){E(this,"interface",V(new.target,"getInterface")(t)),r==null?(E(this,"provider",null),E(this,"signer",null)):Se.isSigner(r)?(E(this,"provider",r.provider||null),E(this,"signer",r)):nt.isProvider(r)?(E(this,"provider",r),E(this,"signer",null)):B.throwArgumentError("invalid signer or provider","signerOrProvider",r),E(this,"callStatic",{}),E(this,"estimateGas",{}),E(this,"functions",{}),E(this,"populateTransaction",{}),E(this,"filters",{});{const l={};Object.keys(this.interface.events).forEach(c=>{const f=this.interface.events[c];E(this.filters,c,(...d)=>({address:this.address,topics:this.interface.encodeFilterTopics(f,d)})),l[f.name]||(l[f.name]=[]),l[f.name].push(c)}),Object.keys(l).forEach(c=>{const f=l[c];f.length===1?E(this.filters,c,this.filters[f[0]]):B.warn(`Duplicate definition of ${c} (${f.join(", ")})`)})}if(E(this,"_runningEvents",{}),E(this,"_wrappedEmits",{}),e==null&&B.throwArgumentError("invalid contract address or ENS name","addressOrName",e),E(this,"address",e),this.provider)E(this,"resolvedAddress",Ye(this.provider,e));else try{E(this,"resolvedAddress",Promise.resolve(ye(e)))}catch{B.throwError("provider is required to use ENS name as contract address",m.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(l=>{});const n={},a={};Object.keys(this.interface.functions).forEach(l=>{const c=this.interface.functions[l];if(a[l]){B.warn(`Duplicate ABI entry for ${JSON.stringify(l)}`);return}a[l]=!0;{const f=c.name;n[`%${f}`]||(n[`%${f}`]=[]),n[`%${f}`].push(l)}this[l]==null&&E(this,l,Xt(this,c,!0)),this.functions[l]==null&&E(this.functions,l,Xt(this,c,!1)),this.callStatic[l]==null&&E(this.callStatic,l,qr(this,c,!0)),this.populateTransaction[l]==null&&E(this.populateTransaction,l,is(this,c)),this.estimateGas[l]==null&&E(this.estimateGas,l,ss(this,c))}),Object.keys(n).forEach(l=>{const c=n[l];if(c.length>1)return;l=l.substring(1);const f=c[0];try{this[l]==null&&E(this,l,this[f])}catch{}this.functions[l]==null&&E(this.functions,l,this.functions[f]),this.callStatic[l]==null&&E(this.callStatic,l,this.callStatic[f]),this.populateTransaction[l]==null&&E(this.populateTransaction,l,this.populateTransaction[f]),this.estimateGas[l]==null&&E(this.estimateGas,l,this.estimateGas[f])})}static getContractAddress(e){return it(e)}static getInterface(e){return vt.isInterface(e)?e:new vt(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&B.throwError("contract not deployed",m.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||B.throwError("sending a transactions require a signer",m.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=j(e||{});return["from","to"].forEach(function(r){t[r]!=null&&B.throwError("cannot override "+r,m.errors.UNSUPPORTED_OPERATION,{operation:r})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new Pt(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&E(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Ar.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new as);if(e==="event")return this._normalizeRunningEvent(new Be("event",null));if(e==="*")return this._normalizeRunningEvent(new Yt(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new Zt(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const r=e.topics[0];if(typeof r!="string")throw new Error("invalid topic");const n=this.interface.getEvent(r);return this._normalizeRunningEvent(new Zt(this.address,this.interface,n,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Be(Gr(t),t))}return this._normalizeRunningEvent(new Yt(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,r){const n=Z(t);return n.removeListener=()=>{r&&(e.removeListener(r),this._checkRunningEvents(e))},n.getBlock=()=>this.provider.getBlock(t.blockHash),n.getTransaction=()=>this.provider.getTransaction(t.transactionHash),n.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(n),n}_addEventListener(e,t,r){if(this.provider||B.throwError("events require a provider or a signer with a provider",m.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const n=a=>{let l=this._wrapEvent(e,a,t);if(l.decodeError==null)try{const c=e.getEmit(l);this.emit(e.filter,...c)}catch(c){l.decodeError=c.error}e.filter!=null&&this.emit("event",l),l.decodeError!=null&&this.emit("error",l.decodeError,l)};this._wrappedEmits[e.tag]=n,e.filter!=null&&this.provider.on(e.filter,n)}}queryFilter(e,t,r){const n=this._getRunningEvent(e),a=j(n.filter);return typeof t=="string"&&L(t,32)?(r!=null&&B.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),a.blockHash=t):(a.fromBlock=t??0,a.toBlock=r??"latest"),this.provider.getLogs(a).then(l=>l.map(c=>this._wrapEvent(n,c,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const r=this._getRunningEvent(e),n=r.run(t)>0;return this._checkRunningEvents(r),n}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,r)=>t+this._runningEvents[r].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let r in this._runningEvents)this._runningEvents[r].listeners().forEach(n=>{t.push(n)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const r in this._runningEvents){const n=this._runningEvents[r];n.removeAllListeners(),this._checkRunningEvents(n)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this}removeListener(e,t){return this.off(e,t)}}class Qe extends Bt{}class Wr{constructor(e,t,r){let n=null;typeof t=="string"?n=t:Rr(t)?n=z(t):t&&typeof t.object=="string"?n=t.object:n="!",n.substring(0,2)!=="0x"&&(n="0x"+n),(!L(n)||n.length%2)&&B.throwArgumentError("invalid bytecode","bytecode",t),r&&!Se.isSigner(r)&&B.throwArgumentError("invalid signer","signer",r),E(this,"bytecode",n),E(this,"interface",V(new.target,"getInterface")(e)),E(this,"signer",r||null)}getDeployTransaction(...e){let t={};if(e.length===this.interface.deploy.inputs.length+1&&typeof e[e.length-1]=="object"){t=j(e.pop());for(const r in t)if(!ns[r])throw new Error("unknown transaction override "+r)}return["data","from","to"].forEach(r=>{t[r]!=null&&B.throwError("cannot override "+r,m.errors.UNSUPPORTED_OPERATION,{operation:r})}),t.value&&!R.from(t.value).isZero()&&!this.interface.deploy.payable&&B.throwError("non-payable constructor cannot override value",m.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:t.value}),B.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),t.data=z(ce([this.bytecode,this.interface.encodeDeploy(e)])),t}deploy(...e){return se(this,void 0,void 0,function*(){let t={};e.length===this.interface.deploy.inputs.length+1&&(t=e.pop()),B.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");const r=yield Re(this.signer,e,this.interface.deploy.inputs);r.push(t);const n=this.getDeployTransaction(...r),a=yield this.signer.sendTransaction(n),l=V(this.constructor,"getContractAddress")(a),c=V(this.constructor,"getContract")(l,this.interface,this.signer);return $r(c,a),E(c,"deployTransaction",a),c})}attach(e){return this.constructor.getContract(e,this.interface,this.signer)}connect(e){return new this.constructor(this.interface,this.bytecode,e)}static fromSolidity(e,t){e==null&&B.throwError("missing compiler output",m.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),typeof e=="string"&&(e=JSON.parse(e));const r=e.abi;let n=null;return e.bytecode?n=e.bytecode:e.evm&&e.evm.bytecode&&(n=e.evm.bytecode),new this(r,n,t)}static getInterface(e){return Qe.getInterface(e)}static getContractAddress(e){return it(e)}static getContract(e,t,r){return new Qe(e,t,r)}}const ls="networks/5.7.1",Qt=new m(ls);function cs(i){return i&&typeof i.renetwork=="function"}function te(i){const e=function(t,r){r==null&&(r={});const n=[];if(t.InfuraProvider&&r.infura!=="-")try{n.push(new t.InfuraProvider(i,r.infura))}catch{}if(t.EtherscanProvider&&r.etherscan!=="-")try{n.push(new t.EtherscanProvider(i,r.etherscan))}catch{}if(t.AlchemyProvider&&r.alchemy!=="-")try{n.push(new t.AlchemyProvider(i,r.alchemy))}catch{}if(t.PocketProvider&&r.pocket!=="-"){const a=["goerli","ropsten","rinkeby","sepolia"];try{const l=new t.PocketProvider(i,r.pocket);l.network&&a.indexOf(l.network.name)===-1&&n.push(l)}catch{}}if(t.CloudflareProvider&&r.cloudflare!=="-")try{n.push(new t.CloudflareProvider(i))}catch{}if(t.AnkrProvider&&r.ankr!=="-")try{const a=["ropsten"],l=new t.AnkrProvider(i,r.ankr);l.network&&a.indexOf(l.network.name)===-1&&n.push(l)}catch{}if(n.length===0)return null;if(t.FallbackProvider){let a=1;return r.quorum!=null?a=r.quorum:i==="homestead"&&(a=2),new t.FallbackProvider(n,a)}return n[0]};return e.renetwork=function(t){return te(t)},e}function et(i,e){const t=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(i,e):null};return t.renetwork=function(r){return et(i,r)},t}const er={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:te("homestead")},tr={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:te("ropsten")},rr={chainId:63,name:"classicMordor",_defaultProvider:et("https://www.ethercluster.com/mordor","classicMordor")},je={unspecified:{chainId:0,name:"unspecified"},homestead:er,mainnet:er,morden:{chainId:2,name:"morden"},ropsten:tr,testnet:tr,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:te("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:te("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:te("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:te("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:et("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:rr,classicTestnet:rr,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:et("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:te("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:te("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Ct(i){if(i==null)return null;if(typeof i=="number"){for(const r in je){const n=je[r];if(n.chainId===i)return{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress||null,_defaultProvider:n._defaultProvider||null}}return{chainId:i,name:"unknown"}}if(typeof i=="string"){const r=je[i];return r==null?null:{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress,_defaultProvider:r._defaultProvider||null}}const e=je[i.name];if(!e)return typeof i.chainId!="number"&&Qt.throwArgumentError("invalid network chainId","network",i),i;i.chainId!==0&&i.chainId!==e.chainId&&Qt.throwArgumentError("network chainId mismatch","network",i);let t=i._defaultProvider||null;return t==null&&e._defaultProvider&&(cs(e._defaultProvider)?t=e._defaultProvider.renetwork(i):t=e._defaultProvider),{name:i.name,chainId:e.chainId,ensAddress:i.ensAddress||e.ensAddress||null,_defaultProvider:t}}var tt="qpzry9x8gf2tvdw0s3jn54khce6mua7l",_t={};for(var Me=0;Me<tt.length;Me++){var ft=tt.charAt(Me);if(_t[ft]!==void 0)throw new TypeError(ft+" is ambiguous");_t[ft]=Me}function me(i){var e=i>>25;return(i&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function Hr(i){for(var e=1,t=0;t<i.length;++t){var r=i.charCodeAt(t);if(r<33||r>126)return"Invalid prefix ("+i+")";e=me(e)^r>>5}for(e=me(e),t=0;t<i.length;++t){var n=i.charCodeAt(t);e=me(e)^n&31}return e}function us(i,e,t){if(t=t||90,i.length+7+e.length>t)throw new TypeError("Exceeds length limit");i=i.toLowerCase();var r=Hr(i);if(typeof r=="string")throw new Error(r);for(var n=i+"1",a=0;a<e.length;++a){var l=e[a];if(l>>5)throw new Error("Non 5-bit word");r=me(r)^l,n+=tt.charAt(l)}for(a=0;a<6;++a)r=me(r);for(r^=1,a=0;a<6;++a){var c=r>>(5-a)*5&31;n+=tt.charAt(c)}return n}function Jr(i,e){if(e=e||90,i.length<8)return i+" too short";if(i.length>e)return"Exceeds length limit";var t=i.toLowerCase(),r=i.toUpperCase();if(i!==t&&i!==r)return"Mixed-case string "+i;i=t;var n=i.lastIndexOf("1");if(n===-1)return"No separator character for "+i;if(n===0)return"Missing prefix for "+i;var a=i.slice(0,n),l=i.slice(n+1);if(l.length<6)return"Data too short";var c=Hr(a);if(typeof c=="string")return c;for(var f=[],d=0;d<l.length;++d){var g=l.charAt(d),w=_t[g];if(w===void 0)return"Unknown character "+g;c=me(c)^w,!(d+6>=l.length)&&f.push(w)}return c!==1?"Invalid checksum for "+i:{prefix:a,words:f}}function hs(){var i=Jr.apply(null,arguments);if(typeof i=="object")return i}function fs(i){var e=Jr.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function ot(i,e,t,r){for(var n=0,a=0,l=(1<<t)-1,c=[],f=0;f<i.length;++f)for(n=n<<e|i[f],a+=e;a>=t;)a-=t,c.push(n>>a&l);if(r)a>0&&c.push(n<<t-a&l);else{if(a>=e)return"Excess padding";if(n<<t-a&l)return"Non-zero padding"}return c}function ds(i){var e=ot(i,8,5,!0);if(Array.isArray(e))return e}function ps(i){var e=ot(i,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function gs(i){var e=ot(i,5,8,!1);if(Array.isArray(e))return e}function ms(i){var e=ot(i,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var ys={decodeUnsafe:hs,decode:fs,encode:us,toWordsUnsafe:ds,toWords:ps,fromWordsUnsafe:gs,fromWords:ms};const nr=ys,G="providers/5.7.2",Ee=new m(G);class k{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),n=this.blockTag.bind(this),a=this.data.bind(this),l=this.hash.bind(this),c=this.hex.bind(this),f=this.number.bind(this),d=this.type.bind(this),g=w=>this.data(w,!0);return e.transaction={hash:l,type:d,accessList:k.allowNull(this.accessList.bind(this),null),blockHash:k.allowNull(l,null),blockNumber:k.allowNull(f,null),transactionIndex:k.allowNull(f,null),confirmations:k.allowNull(f,null),from:t,gasPrice:k.allowNull(r),maxPriorityFeePerGas:k.allowNull(r),maxFeePerGas:k.allowNull(r),gasLimit:r,to:k.allowNull(t,null),value:r,nonce:f,data:a,r:k.allowNull(this.uint256),s:k.allowNull(this.uint256),v:k.allowNull(f),creates:k.allowNull(t,null),raw:k.allowNull(a)},e.transactionRequest={from:k.allowNull(t),nonce:k.allowNull(f),gasLimit:k.allowNull(r),gasPrice:k.allowNull(r),maxPriorityFeePerGas:k.allowNull(r),maxFeePerGas:k.allowNull(r),to:k.allowNull(t),value:k.allowNull(r),data:k.allowNull(g),type:k.allowNull(f),accessList:k.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:f,blockNumber:f,transactionHash:l,address:t,topics:k.arrayOf(l),data:a,logIndex:f,blockHash:l},e.receipt={to:k.allowNull(this.address,null),from:k.allowNull(this.address,null),contractAddress:k.allowNull(t,null),transactionIndex:f,root:k.allowNull(c),gasUsed:r,logsBloom:k.allowNull(a),blockHash:l,transactionHash:l,logs:k.arrayOf(this.receiptLog.bind(this)),blockNumber:f,confirmations:k.allowNull(f,null),cumulativeGasUsed:r,effectiveGasPrice:k.allowNull(r),status:k.allowNull(f),type:d},e.block={hash:k.allowNull(l),parentHash:l,number:f,timestamp:f,nonce:k.allowNull(c),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:k.allowNull(t),extraData:a,transactions:k.allowNull(k.arrayOf(l)),baseFeePerGas:k.allowNull(r)},e.blockWithTransactions=j(e.block),e.blockWithTransactions.transactions=k.allowNull(k.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:k.allowNull(n,void 0),toBlock:k.allowNull(n,void 0),blockHash:k.allowNull(l,void 0),address:k.allowNull(t,void 0),topics:k.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:k.allowNull(f),blockHash:k.allowNull(l),transactionIndex:f,removed:k.allowNull(this.boolean.bind(this)),address:t,data:k.allowFalsish(a,"0x"),topics:k.arrayOf(l),transactionHash:l,logIndex:f},e}accessList(e){return Oe(e||[])}number(e){return e==="0x"?0:R.from(e).toNumber()}type(e){return e==="0x"||e==null?0:R.from(e).toNumber()}bigNumber(e){return R.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),L(e))?e.toLowerCase():Ee.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!==0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return ye(e)}callAddress(e){if(!L(e,32))return null;const t=ye(K(e,12));return t===jr?null:t}contractAddress(e){return it(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||L(e))return Ue(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return be(r)!==32?Ee.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(e==null)return null;const t=R.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!L(e))throw new Error("invalid uint256");return he(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const r=e._difficulty!=null?e._difficulty:e.difficulty,n=k.check(t,e);return n._difficulty=r==null?null:R.from(r),n}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return k.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&R.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const t=k.check(this.formats.transaction,e);if(e.chainId!=null){let r=e.chainId;L(r)&&(r=R.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;r==null&&t.v==null&&(r=e.chainId),L(r)&&(r=R.from(r).toNumber()),typeof r!="number"&&t.v!=null&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),typeof r!="number"&&(r=0),t.chainId=r}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return Ir(e)}receiptLog(e){return k.check(this.formats.receiptLog,e)}receipt(e){const t=k.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const r=R.from(t.root).toNumber();r===0||r===1?(t.status!=null&&t.status!==r&&Ee.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=r,delete t.root):Ee.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&Ee.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return k.check(this.formats.filter,e)}filterLog(e){return k.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const n in e)try{const a=e[n](t[n]);a!==void 0&&(r[n]=a)}catch(a){throw a.checkKey=n,a.checkValue=t[n],a}return r}static allowNull(e,t){return function(r){return r==null?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach(function(n){r.push(e(n))}),r}}}function zr(i){return i&&typeof i.isCommunityResource=="function"}function xt(i){return zr(i)&&i.isCommunityResource()}let ir=!1;function Le(){ir||(ir=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var A=globalThis&&globalThis.__awaiter||function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{d(r.next(g))}catch(w){l(w)}}function f(g){try{d(r.throw(g))}catch(w){l(w)}}function d(g){g.done?a(g.value):n(g.value).then(c,f)}d((r=r.apply(i,e||[])).next())})};const P=new m(G),ws=10;function sr(i){return i==null?"null":(be(i)!==32&&P.throwArgumentError("invalid topic","topic",i),i.toLowerCase())}function or(i){for(i=i.slice();i.length>0&&i[i.length-1]==null;)i.pop();return i.map(e=>{if(Array.isArray(e)){const t={};e.forEach(n=>{t[sr(n)]=!0});const r=Object.keys(t);return r.sort(),r.join("|")}else return sr(e)}).join("&")}function bs(i){return i===""?[]:i.split(/&/g).map(e=>{if(e==="")return[];const t=e.split("|").map(r=>r==="null"?null:r);return t.length===1?t[0]:t})}function de(i){if(typeof i=="string"){if(i=i.toLowerCase(),be(i)===32)return"tx:"+i;if(i.indexOf(":")===-1)return i}else{if(Array.isArray(i))return"filter:*:"+or(i);if(Gn.isForkEvent(i))throw P.warn("not implemented"),new Error("not implemented");if(i&&typeof i=="object")return"filter:"+(i.address||"*")+":"+or(i.topics||[])}throw new Error("invalid event - "+i)}function ke(){return new Date().getTime()}function ar(i){return new Promise(e=>{setTimeout(e,i)})}const vs=["block","network","pending","poll"];class Es{constructor(e,t,r){E(this,"tag",e),E(this,"listener",t),E(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],r=bs(e[2]),n={};return r.length>0&&(n.topics=r),t&&t!=="*"&&(n.address=t),n}pollable(){return this.tag.indexOf(":")>=0||vs.indexOf(this.tag)>=0}}const ks={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function dt(i){return he(R.from(i).toHexString(),32)}function lr(i){return Xe.encode(ce([i,K(Et(Et(i)),0,4)]))}const Kr=new RegExp("^(ipfs)://(.*)$","i"),cr=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Kr,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Je(i,e){try{return It(Ce(i,e))}catch{}return null}function Ce(i,e){if(i==="0x")return null;const t=R.from(K(i,e,e+32)).toNumber(),r=R.from(K(i,t,t+32)).toNumber();return K(i,t+32,t+32+r)}function pt(i){return i.match(/^ipfs:\/\/ipfs\//i)?i=i.substring(12):i.match(/^ipfs:\/\//i)?i=i.substring(7):P.throwArgumentError("unsupported IPFS format","link",i),`https://gateway.ipfs.io/ipfs/${i}`}function ur(i){const e=we(i);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function _s(i){if(i.length%32===0)return i;const e=new Uint8Array(Math.ceil(i.length/32)*32);return e.set(i),e}function Vr(i){const e=[];let t=0;for(let r=0;r<i.length;r++)e.push(null),t+=32;for(let r=0;r<i.length;r++){const n=we(i[r]);e[r]=ur(t),e.push(ur(n.length)),e.push(_s(n)),t+=32+Math.ceil(n.length/32)*32}return ne(e)}class Nt{constructor(e,t,r,n){E(this,"provider",e),E(this,"name",r),E(this,"address",e.formatter.address(t)),E(this,"_resolvedAddress",n)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>R.from(e).eq(1)).catch(e=>{if(e.code===m.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return A(this,void 0,void 0,function*(){const r={to:this.address,ccipReadEnabled:!0,data:ne([e,Ae(this.name),t||"0x"])};let n=!1;(yield this.supportsWildcard())&&(n=!0,r.data=ne(["0x9061b923",Vr([Br(this.name),r.data])]));try{let a=yield this.provider.call(r);return we(a).length%32===4&&P.throwError("resolver threw error",m.errors.CALL_EXCEPTION,{transaction:r,data:a}),n&&(a=Ce(a,0)),a}catch(a){if(a.code===m.errors.CALL_EXCEPTION)return null;throw a}})}_fetchBytes(e,t){return A(this,void 0,void 0,function*(){const r=yield this._fetch(e,t);return r!=null?Ce(r,0):null})}_getAddress(e,t){const r=ks[String(e)];if(r==null&&P.throwError(`unsupported coin type: ${e}`,m.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),r.ilk==="eth")return this.provider.formatter.address(t);const n=we(t);if(r.p2pkh!=null){const a=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(a){const l=parseInt(a[1],16);if(a[2].length===l*2&&l>=1&&l<=75)return lr(ce([[r.p2pkh],"0x"+a[2]]))}}if(r.p2sh!=null){const a=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(a){const l=parseInt(a[1],16);if(a[2].length===l*2&&l>=1&&l<=75)return lr(ce([[r.p2sh],"0x"+a[2]]))}}if(r.prefix!=null){const a=n[1];let l=n[0];if(l===0?a!==20&&a!==32&&(l=-1):l=-1,l>=0&&n.length===2+a&&a>=1&&a<=75){const c=nr.toWords(n.slice(2));return c.unshift(l),nr.encode(r.prefix,c)}}return null}getAddress(e){return A(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const n=yield this._fetch("0x3b3b57de");return n==="0x"||n===Tr?null:this.provider.formatter.callAddress(n)}catch(n){if(n.code===m.errors.CALL_EXCEPTION)return null;throw n}const t=yield this._fetchBytes("0xf1cb7e06",dt(e));if(t==null||t==="0x")return null;const r=this._getAddress(e,t);return r==null&&P.throwError("invalid or unsupported coin data",m.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r})}getAvatar(){return A(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null)return null;for(let r=0;r<cr.length;r++){const n=t.match(cr[r]);if(n==null)continue;const a=n[1].toLowerCase();switch(a){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:pt(t)};case"erc721":case"erc1155":{const l=a==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:a,content:t});const c=this._resolvedAddress||(yield this.getAddress()),f=(n[2]||"").split("/");if(f.length!==2)return null;const d=yield this.provider.formatter.address(f[0]),g=he(R.from(f[1]).toHexString(),32);if(a==="erc721"){const x=this.provider.formatter.callAddress(yield this.provider.call({to:d,data:ne(["0x6352211e",g])}));if(c!==x)return null;e.push({type:"owner",content:x})}else if(a==="erc1155"){const x=R.from(yield this.provider.call({to:d,data:ne(["0x00fdd58e",he(c,32),g])}));if(x.isZero())return null;e.push({type:"balance",content:x.toString()})}const w={to:this.provider.formatter.address(f[0]),data:ne([l,g])};let N=Je(yield this.provider.call(w),0);if(N==null)return null;e.push({type:"metadata-url-base",content:N}),a==="erc1155"&&(N=N.replace("{id}",g.substring(2)),e.push({type:"metadata-url-expanded",content:N})),N.match(/^ipfs:/i)&&(N=pt(N)),e.push({type:"metadata-url",content:N});const v=yield ve(N);if(!v)return null;e.push({type:"metadata",content:JSON.stringify(v)});let _=v.image;if(typeof _!="string")return null;if(!_.match(/^(https:\/\/|data:)/i)){if(_.match(Kr)==null)return null;e.push({type:"url-ipfs",content:_}),_=pt(_)}return e.push({type:"url",content:_}),{linkage:e,url:_}}}}}catch{}return null})}getContentHash(){return A(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const l=parseInt(t[3],16);if(t[4].length===l*2)return"ipfs://"+Xe.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const l=parseInt(r[3],16);if(r[4].length===l*2)return"ipns://"+Xe.encode("0x"+r[1])}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===32*2)return"bzz://"+n[1];const a=e.match(/^0x90b2c605([0-9a-f]*)$/);if(a&&a[1].length===34*2){const l={"=":"","+":"-","/":"_"};return"sia://"+qn("0x"+a[1]).replace(/[=+\/]/g,f=>l[f])}return P.throwError("invalid or unsupported content hash data",m.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return A(this,void 0,void 0,function*(){let t=Ze(e);t=ce([dt(64),dt(t.length),t]),t.length%32!==0&&(t=ce([t,he("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",z(t));return r==null||r==="0x"?null:It(r)})}}let gt=null,xs=1;class at extends nt{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),E(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=V(new.target,"getNetwork")(e);t?(E(this,"_network",t),this.emit("network",t,null)):P.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return A(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||P.throwError("no network detected",m.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:E(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return ue(()=>this._ready().then(e=>e,e=>{if(!(e.code===m.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return gt==null&&(gt=new k),gt}static getNetwork(e){return Ct(e??"homestead")}ccipReadFetch(e,t,r){return A(this,void 0,void 0,function*(){if(this.disableCcipRead||r.length===0)return null;const n=e.to.toLowerCase(),a=t.toLowerCase(),l=[];for(let c=0;c<r.length;c++){const f=r[c],d=f.replace("{sender}",n).replace("{data}",a),g=f.indexOf("{data}")>=0?null:JSON.stringify({data:a,sender:n}),w=yield ve({url:d,errorPassThrough:!0},g,(v,_)=>(v.status=_.statusCode,v));if(w.data)return w.data;const N=w.message||"unknown error";if(w.status>=400&&w.status<500)return P.throwError(`response not found during CCIP fetch: ${N}`,m.errors.SERVER_ERROR,{url:f,errorMessage:N});l.push(N)}return P.throwError(`error encountered during CCIP fetch: ${l.map(c=>JSON.stringify(c)).join(", ")}`,m.errors.SERVER_ERROR,{urls:r,errorMessages:l})})}_getInternalBlockNumber(e){return A(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const n=this._internalBlockNumber;try{const a=yield n;if(ke()-a.respTime<=e)return a.blockNumber;break}catch{if(this._internalBlockNumber===n)break}}const t=ke(),r=q({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(n=>null,n=>n)}).then(({blockNumber:n,networkError:a})=>{if(a)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),a;const l=ke();return n=R.from(n).toNumber(),n<this._maxInternalBlockNumber&&(n=this._maxInternalBlockNumber),this._maxInternalBlockNumber=n,this._setFastBlockNumber(n),{blockNumber:n,reqTime:t,respTime:l}});return this._internalBlockNumber=r,r.catch(n=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)}),(yield r).blockNumber})}poll(){return A(this,void 0,void 0,function*(){const e=xs++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(n){this.emit("error",n);return}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)P.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",P.makeError("network block skew detected",m.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let n=this._emitted.block+1;n<=r;n++)this.emit("block",n);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(n=>{if(n==="block")return;const a=this._emitted[n];a!=="pending"&&r-a>12&&delete this._emitted[n]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=r-1),this._events.forEach(n=>{switch(n.type){case"tx":{const a=n.hash;let l=this.getTransactionReceipt(a).then(c=>(!c||c.blockNumber==null||(this._emitted["t:"+a]=c.blockNumber,this.emit(a,c)),null)).catch(c=>{this.emit("error",c)});t.push(l);break}case"filter":{if(!n._inflight){n._inflight=!0,n._lastBlockNumber===-2&&(n._lastBlockNumber=r-1);const a=n.filter;a.fromBlock=n._lastBlockNumber+1,a.toBlock=r;const l=a.toBlock-this._maxFilterBlockRange;l>a.fromBlock&&(a.fromBlock=l),a.fromBlock<0&&(a.fromBlock=0);const c=this.getLogs(a).then(f=>{n._inflight=!1,f.length!==0&&f.forEach(d=>{d.blockNumber>n._lastBlockNumber&&(n._lastBlockNumber=d.blockNumber),this._emitted["b:"+d.blockHash]=d.blockNumber,this._emitted["t:"+d.transactionHash]=d.blockNumber,this.emit(a,d)})}).catch(f=>{this.emit("error",f),n._inflight=!1});t.push(c)}break}}}),this._lastBlockNumber=r,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(n=>{this.emit("error",n)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return A(this,void 0,void 0,function*(){return P.throwError("provider does not support network detection",m.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return A(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield ar(0),this._network;const r=P.makeError("underlying network changed",m.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=ke();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=ke(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return A(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,r||0,null)})}_waitForTransaction(e,t,r,n){return A(this,void 0,void 0,function*(){const a=yield this.getTransactionReceipt(e);return(a?a.confirmations:0)>=t?a:new Promise((l,c)=>{const f=[];let d=!1;const g=function(){return d?!0:(d=!0,f.forEach(N=>{N()}),!1)},w=N=>{N.confirmations<t||g()||l(N)};if(this.on(e,w),f.push(()=>{this.removeListener(e,w)}),n){let N=n.startBlock,v=null;const _=x=>A(this,void 0,void 0,function*(){d||(yield ar(1e3),this.getTransactionCount(n.from).then(W=>A(this,void 0,void 0,function*(){if(!d){if(W<=n.nonce)N=x;else{{const T=yield this.getTransaction(e);if(T&&T.blockNumber!=null)return}for(v==null&&(v=N-3,v<n.startBlock&&(v=n.startBlock));v<=x;){if(d)return;const T=yield this.getBlockWithTransactions(v);for(let F=0;F<T.transactions.length;F++){const O=T.transactions[F];if(O.hash===e)return;if(O.from===n.from&&O.nonce===n.nonce){if(d)return;const oe=yield this.waitForTransaction(O.hash,t);if(g())return;let H="replaced";O.data===n.data&&O.to===n.to&&O.value.eq(n.value)?H="repriced":O.data==="0x"&&O.from===O.to&&O.value.isZero()&&(H="cancelled"),c(P.makeError("transaction was replaced",m.errors.TRANSACTION_REPLACED,{cancelled:H==="replaced"||H==="cancelled",reason:H,replacement:this._wrapTransaction(O),hash:e,receipt:oe}));return}}v++}}d||this.once("block",_)}}),W=>{d||this.once("block",_)}))});if(d)return;this.once("block",_),f.push(()=>{this.removeListener("block",_)})}if(typeof r=="number"&&r>0){const N=setTimeout(()=>{g()||c(P.makeError("timeout exceeded",m.errors.TIMEOUT,{timeout:r}))},r);N.unref&&N.unref(),f.push(()=>{clearTimeout(N)})}})})}getBlockNumber(){return A(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return A(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return R.from(e)}catch(t){return P.throwError("bad result from backend",m.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return A(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield q({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getBalance",r);try{return R.from(n)}catch(a){return P.throwError("bad result from backend",m.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:a})}})}getTransactionCount(e,t){return A(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield q({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getTransactionCount",r);try{return R.from(n).toNumber()}catch(a){return P.throwError("bad result from backend",m.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:a})}})}getCode(e,t){return A(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield q({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getCode",r);try{return z(n)}catch(a){return P.throwError("bad result from backend",m.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:a})}})}getStorageAt(e,t,r){return A(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield q({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(l=>Ue(l))}),a=yield this.perform("getStorageAt",n);try{return z(a)}catch(l){return P.throwError("bad result from backend",m.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:a,error:l})}})}_wrapTransaction(e,t,r){if(t!=null&&be(t)!==32)throw new Error("invalid response - sendTransaction");const n=e;return t!=null&&e.hash!==t&&P.throwError("Transaction hash mismatch from Provider.sendTransaction.",m.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),n.wait=(a,l)=>A(this,void 0,void 0,function*(){a==null&&(a=1),l==null&&(l=0);let c;a!==0&&r!=null&&(c={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const f=yield this._waitForTransaction(e.hash,a,l,c);return f==null&&a===0?null:(this._emitted["t:"+e.hash]=f.blockNumber,f.status===0&&P.throwError("transaction failed",m.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:f}),f)}),n}sendTransaction(e){return A(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(a=>z(a)),r=this.formatter.transaction(e);r.confirmations==null&&(r.confirmations=0);const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const a=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,a,n)}catch(a){throw a.transaction=r,a.transactionHash=r.hash,a}})}_getTransactionRequest(e){return A(this,void 0,void 0,function*(){const t=yield e,r={};return["from","to"].forEach(n=>{t[n]!=null&&(r[n]=Promise.resolve(t[n]).then(a=>a?this._getAddress(a):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(n=>{t[n]!=null&&(r[n]=Promise.resolve(t[n]).then(a=>a?R.from(a):null))}),["type"].forEach(n=>{t[n]!=null&&(r[n]=Promise.resolve(t[n]).then(a=>a??null))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(n=>{t[n]!=null&&(r[n]=Promise.resolve(t[n]).then(a=>a?z(a):null))}),this.formatter.transactionRequest(yield q(r))})}_getFilter(e){return A(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{e[r]!=null&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{e[r]!=null&&(t[r]=this._getBlockTag(e[r]))}),this.formatter.filter(yield q(t))})}_call(e,t,r){return A(this,void 0,void 0,function*(){r>=ws&&P.throwError("CCIP read exceeded maximum redirections",m.errors.SERVER_ERROR,{redirects:r,transaction:e});const n=e.to,a=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&t==="latest"&&n!=null&&a.substring(0,10)==="0x556f1830"&&be(a)%32===4)try{const l=K(a,4),c=K(l,0,32);R.from(c).eq(n)||P.throwError("CCIP Read sender did not match",m.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:a});const f=[],d=R.from(K(l,32,64)).toNumber(),g=R.from(K(l,d,d+32)).toNumber(),w=K(l,d+32);for(let T=0;T<g;T++){const F=Je(w,T*32);F==null&&P.throwError("CCIP Read contained corrupt URL string",m.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:a}),f.push(F)}const N=Ce(l,64);R.from(K(l,100,128)).isZero()||P.throwError("CCIP Read callback selector included junk",m.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:a});const v=K(l,96,100),_=Ce(l,128),x=yield this.ccipReadFetch(e,N,f);x==null&&P.throwError("CCIP Read disabled or provided no URLs",m.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:a});const W={to:n,data:ne([v,Vr([x,_])])};return this._call(W,t,r+1)}catch(l){if(l.code===m.errors.SERVER_ERROR)throw l}try{return z(a)}catch(l){return P.throwError("bad result from backend",m.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:a,error:l})}})}call(e,t){return A(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield q({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)})}estimateGas(e){return A(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield q({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return R.from(r)}catch(n){return P.throwError("bad result from backend",m.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:n})}})}_getAddress(e){return A(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&P.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&P.throwError("ENS name not configured",m.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return A(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128;const n={includeTransactions:!!t};if(L(e,32))n.blockHash=e;else try{n.blockTag=yield this._getBlockTag(e),L(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16))}catch{P.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return ue(()=>A(this,void 0,void 0,function*(){const a=yield this.perform("getBlock",n);if(a==null)return n.blockHash!=null&&this._emitted["b:"+n.blockHash]==null||n.blockTag!=null&&r>this._emitted.block?null:void 0;if(t){let l=null;for(let f=0;f<a.transactions.length;f++){const d=a.transactions[f];if(d.blockNumber==null)d.confirmations=0;else if(d.confirmations==null){l==null&&(l=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let g=l-d.blockNumber+1;g<=0&&(g=1),d.confirmations=g}}const c=this.formatter.blockWithTransactions(a);return c.transactions=c.transactions.map(f=>this._wrapTransaction(f)),c}return this.formatter.block(a)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return A(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return ue(()=>A(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;const n=this.formatter.transactionResponse(r);if(n.blockNumber==null)n.confirmations=0;else if(n.confirmations==null){let l=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;l<=0&&(l=1),n.confirmations=l}return this._wrapTransaction(n)}),{oncePoll:this})})}getTransactionReceipt(e){return A(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return ue(()=>A(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;if(r.blockHash==null)return;const n=this.formatter.receipt(r);if(n.blockNumber==null)n.confirmations=0;else if(n.confirmations==null){let l=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;l<=0&&(l=1),n.confirmations=l}return n}),{oncePoll:this})})}getLogs(e){return A(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield q({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach(n=>{n.removed==null&&(n.removed=!1)}),k.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return A(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return A(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&P.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return A(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;const r=yield this._getResolver(t,"getResolver");if(r!=null){const n=new Nt(this,r,e);return t!==e&&!(yield n.supportsWildcard())?null:n}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return A(this,void 0,void 0,function*(){t==null&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||P.throwError("network does not support ENS",m.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const n=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+Ae(e).substring(2)});return this.formatter.callAddress(n)}catch{}return null})}resolveName(e){return A(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(r){if(L(e))throw r}typeof e!="string"&&P.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return A(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(r==null)return null;const n=Je(yield this.call({to:r,data:"0x691f3431"+Ae(t).substring(2)}),0);return(yield this.resolveName(n))!=e?null:n})}getAvatar(e){return A(this,void 0,void 0,function*(){let t=null;if(L(e)){const a=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",l=yield this._getResolver(a,"getAvatar");if(!l)return null;t=new Nt(this,l,a);try{const c=yield t.getAvatar();if(c)return c.url}catch(c){if(c.code!==m.errors.CALL_EXCEPTION)throw c}try{const c=Je(yield this.call({to:l,data:"0x691f3431"+Ae(a).substring(2)}),0);t=yield this.getResolver(c)}catch(c){if(c.code!==m.errors.CALL_EXCEPTION)throw c;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return r==null?null:r.url})}perform(e,t){return P.throwError(e+" not implemented",m.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,r){const n=new Es(de(e),t,r);return this._events.push(n),this._startEvent(n),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,n=[],a=de(e);return this._events=this._events.filter(l=>l.tag!==a?!0:(setTimeout(()=>{l.listener.apply(this,t)},0),r=!0,l.once?(n.push(l),!1):!0)),n.forEach(l=>{this._stopEvent(l)}),r}listenerCount(e){if(!e)return this._events.length;let t=de(e);return this._events.filter(r=>r.tag===t).length}listeners(e){if(e==null)return this._events.map(r=>r.listener);let t=de(e);return this._events.filter(r=>r.tag===t).map(r=>r.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const r=[];let n=!1,a=de(e);return this._events=this._events.filter(l=>l.tag!==a||l.listener!=t||n?!0:(n=!0,r.push(l),!1)),r.forEach(l=>{this._stopEvent(l)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const r=de(e);this._events=this._events.filter(n=>n.tag!==r?!0:(t.push(n),!1))}return t.forEach(r=>{this._stopEvent(r)}),this}}var ee=globalThis&&globalThis.__awaiter||function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{d(r.next(g))}catch(w){l(w)}}function f(g){try{d(r.throw(g))}catch(w){l(w)}}function d(g){g.done?a(g.value):n(g.value).then(c,f)}d((r=r.apply(i,e||[])).next())})};const D=new m(G),Ns=["call","estimateGas"];function Pe(i,e){if(i==null)return null;if(typeof i.message=="string"&&i.message.match("reverted")){const t=L(i.data)?i.data:null;if(!e||t)return{message:i.message,data:t}}if(typeof i=="object"){for(const t in i){const r=Pe(i[t],e);if(r)return r}return null}if(typeof i=="string")try{return Pe(JSON.parse(i),e)}catch{}return null}function Xr(i,e,t){const r=t.transaction||t.signedTransaction;if(i==="call"){const a=Pe(e,!0);if(a)return a.data;D.throwError("missing revert data in call exception; Transaction reverted without a reason string",m.errors.CALL_EXCEPTION,{data:"0x",transaction:r,error:e})}if(i==="estimateGas"){let a=Pe(e.body,!1);a==null&&(a=Pe(e,!1)),a&&D.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",m.errors.UNPREDICTABLE_GAS_LIMIT,{reason:a.message,method:i,transaction:r,error:e})}let n=e.message;throw e.code===m.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?n=e.error.message:typeof e.body=="string"?n=e.body:typeof e.responseText=="string"&&(n=e.responseText),n=(n||"").toLowerCase(),n.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&D.throwError("insufficient funds for intrinsic transaction cost",m.errors.INSUFFICIENT_FUNDS,{error:e,method:i,transaction:r}),n.match(/nonce (is )?too low/i)&&D.throwError("nonce has already been used",m.errors.NONCE_EXPIRED,{error:e,method:i,transaction:r}),n.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&D.throwError("replacement fee too low",m.errors.REPLACEMENT_UNDERPRICED,{error:e,method:i,transaction:r}),n.match(/only replay-protected/i)&&D.throwError("legacy pre-eip-155 transactions not supported",m.errors.UNSUPPORTED_OPERATION,{error:e,method:i,transaction:r}),Ns.indexOf(i)>=0&&n.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&D.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",m.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:i,transaction:r}),e}function hr(i){return new Promise(function(e){setTimeout(e,i)})}function Ts(i){if(i.error){const e=new Error(i.error.message);throw e.code=i.error.code,e.data=i.error.data,e}return i.result}function _e(i){return i&&i.toLowerCase()}const Tt={};class St extends Se{constructor(e,t,r){if(super(),e!==Tt)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");E(this,"provider",t),r==null&&(r=0),typeof r=="string"?(E(this,"_address",this.provider.formatter.address(r)),E(this,"_index",null)):typeof r=="number"?(E(this,"_index",r),E(this,"_address",null)):D.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return D.throwError("cannot alter JSON-RPC Signer connection",m.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new As(Tt,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&D.throwError("unknown account #"+this._index,m.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=j(e);const t=this.getAddress().then(r=>(r&&(r=r.toLowerCase()),r));if(e.gasLimit==null){const r=j(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(r=>ee(this,void 0,void 0,function*(){if(r==null)return null;const n=yield this.provider.resolveName(r);return n==null&&D.throwArgumentError("provided ENS name resolves to null","tx.to",r),n}))),q({tx:q(e),sender:t}).then(({tx:r,sender:n})=>{r.from!=null?r.from.toLowerCase()!==n&&D.throwArgumentError("from address mismatch","transaction",e):r.from=n;const a=this.provider.constructor.hexlifyTransaction(r,{from:!0});return this.provider.send("eth_sendTransaction",[a]).then(l=>l,l=>(typeof l.message=="string"&&l.message.match(/user denied/i)&&D.throwError("user rejected transaction",m.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:r}),Xr("sendTransaction",l,a)))})}signTransaction(e){return D.throwError("signing transactions is unsupported",m.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return ee(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield ue(()=>ee(this,void 0,void 0,function*(){const n=yield this.provider.getTransaction(r);if(n!==null)return this.provider._wrapTransaction(n,r,t)}),{oncePoll:this.provider})}catch(n){throw n.transactionHash=r,n}})}signMessage(e){return ee(this,void 0,void 0,function*(){const t=typeof e=="string"?Ze(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[z(t),r.toLowerCase()])}catch(n){throw typeof n.message=="string"&&n.message.match(/user denied/i)&&D.throwError("user rejected signing",m.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),n}})}_legacySignMessage(e){return ee(this,void 0,void 0,function*(){const t=typeof e=="string"?Ze(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),z(t)])}catch(n){throw typeof n.message=="string"&&n.message.match(/user denied/i)&&D.throwError("user rejected signing",m.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),n}})}_signTypedData(e,t,r){return ee(this,void 0,void 0,function*(){const n=yield kt.resolveNames(e,t,r,l=>this.provider.resolveName(l)),a=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[a.toLowerCase(),JSON.stringify(kt.getPayload(n.domain,t,n.value))])}catch(l){throw typeof l.message=="string"&&l.message.match(/user denied/i)&&D.throwError("user rejected signing",m.errors.ACTION_REJECTED,{action:"_signTypedData",from:a,messageData:{domain:n.domain,types:t,value:n.value}}),l}})}unlock(e){return ee(this,void 0,void 0,function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class As extends St{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:r=>this.provider.waitForTransaction(t,r)}))}}const Rs={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class fe extends at{constructor(e,t){let r=t;r==null&&(r=new Promise((n,a)=>{setTimeout(()=>{this.detectNetwork().then(l=>{n(l)},l=>{a(l)})},0)})),super(r),e||(e=V(this.constructor,"defaultUrl")()),typeof e=="string"?E(this,"connection",Object.freeze({url:e})):E(this,"connection",Object.freeze(j(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return ee(this,void 0,void 0,function*(){yield hr(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=V(this.constructor,"getNetwork");try{return t(R.from(e).toNumber())}catch(r){return D.throwError("could not detect network",m.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:r})}}return D.throwError("could not detect network",m.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new St(Tt,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Z(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(n&&this._cache[e])return this._cache[e];const a=ve(this.connection,JSON.stringify(r),Ts).then(l=>(this.emit("debug",{action:"response",request:r,response:l,provider:this}),l),l=>{throw this.emit("debug",{action:"response",error:l,request:r,provider:this}),l});return n&&(this._cache[e]=a,setTimeout(()=>{this._cache[e]=null},0)),a}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[_e(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[_e(t.address),t.blockTag]];case"getCode":return["eth_getCode",[_e(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[_e(t.address),he(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[V(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[V(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=_e(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return ee(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const n=t.transaction;if(n&&n.type!=null&&R.from(n.type).isZero()&&n.maxFeePerGas==null&&n.maxPriorityFeePerGas==null){const a=yield this.getFeeData();a.maxFeePerGas==null&&a.maxPriorityFeePerGas==null&&(t=j(t),t.transaction=j(n),delete t.transaction.type)}}const r=this.prepareRequest(e,t);r==null&&D.throwError(e+" not implemented",m.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(n){return Xr(e,n,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){function n(){e.send("eth_getFilterChanges",[r]).then(function(a){if(e._pendingFilter!=t)return null;let l=Promise.resolve();return a.forEach(function(c){e._emitted["t:"+c.toLowerCase()]="pending",l=l.then(function(){return e.getTransaction(c).then(function(f){return e.emit("pending",f),null})})}),l.then(function(){return hr(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[r]);return}return setTimeout(function(){n()},0),null}).catch(a=>{})}return n(),r}).catch(r=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=j(Rs);if(t)for(const a in t)t[a]&&(r[a]=!0);Cr(e,r);const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(a){if(e[a]==null)return;const l=Ue(R.from(e[a]));a==="gasLimit"&&(a="gas"),n[a]=l}),["from","to","data"].forEach(function(a){e[a]!=null&&(n[a]=z(e[a]))}),e.accessList&&(n.accessList=Oe(e.accessList)),n}}let Ie=null;try{if(Ie=WebSocket,Ie==null)throw new Error("inject please")}catch{const e=new m(G);Ie=function(){e.throwError("WebSockets not supported in this environment",m.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var mt=globalThis&&globalThis.__awaiter||function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{d(r.next(g))}catch(w){l(w)}}function f(g){try{d(r.throw(g))}catch(w){l(w)}}function d(g){g.done?a(g.value):n(g.value).then(c,f)}d((r=r.apply(i,e||[])).next())})};const $e=new m(G);let Ps=1;class lt extends fe{constructor(e,t){t==="any"&&$e.throwError("WebSocketProvider does not support 'any' network yet",m.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof e=="string"?super(e,t):super("_websocket",t),this._pollingInterval=-1,this._wsReady=!1,typeof e=="string"?E(this,"_websocket",new Ie(this.connection.url)):E(this,"_websocket",e),E(this,"_requests",{}),E(this,"_subs",{}),E(this,"_subIds",{}),E(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(n=>{this.websocket.send(this._requests[n].payload)})},this.websocket.onmessage=n=>{const a=n.data,l=JSON.parse(a);if(l.id!=null){const c=String(l.id),f=this._requests[c];if(delete this._requests[c],l.result!==void 0)f.callback(null,l.result),this.emit("debug",{action:"response",request:JSON.parse(f.payload),response:l.result,provider:this});else{let d=null;l.error?(d=new Error(l.error.message||"unknown error"),E(d,"code",l.error.code||null),E(d,"response",a)):d=new Error("unknown error"),f.callback(d,void 0),this.emit("debug",{action:"response",error:d,request:JSON.parse(f.payload),provider:this})}}else if(l.method==="eth_subscription"){const c=this._subs[l.params.subscription];c&&c.processFunc(l.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){$e.throwError("cannot reset events block on WebSocketProvider",m.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){$e.throwError("cannot set polling interval on WebSocketProvider",m.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return mt(this,void 0,void 0,function*(){return null})}set polling(e){e&&$e.throwError("cannot set polling on WebSocketProvider",m.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const r=Ps++;return new Promise((n,a)=>{function l(f,d){return f?a(f):n(d)}const c=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(c),provider:this}),this._requests[String(r)]={callback:l,payload:c},this._wsReady&&this.websocket.send(c)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return mt(this,void 0,void 0,function*(){let n=this._subIds[e];n==null&&(n=Promise.all(t).then(l=>this.send("eth_subscribe",l)),this._subIds[e]=n);const a=yield n;this._subs[a]={tag:e,processFunc:r}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],t=>{const r=R.from(t.number).toNumber();this._emitted.block=r,this.emit("block",r)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],t=>{this.emit("pending",t)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],t=>{t.removed==null&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))});break;case"tx":{const t=r=>{const n=r.hash;this.getTransactionReceipt(n).then(a=>{a&&this.emit(n,a)})};t(e),this._subscribe("tx",["newHeads"],r=>{this._events.filter(n=>n.type==="tx").forEach(t)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let t=e.tag;if(e.type==="tx"){if(this._events.filter(n=>n.type==="tx").length)return;t="tx"}else if(this.listenerCount(e.event))return;const r=this._subIds[t];r&&(delete this._subIds[t],r.then(n=>{this._subs[n]&&(delete this._subs[n],this.send("eth_unsubscribe",[n]))}))}destroy(){return mt(this,void 0,void 0,function*(){this.websocket.readyState===Ie.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var Is=globalThis&&globalThis.__awaiter||function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{d(r.next(g))}catch(w){l(w)}}function f(g){try{d(r.throw(g))}catch(w){l(w)}}function d(g){g.done?a(g.value):n(g.value).then(c,f)}d((r=r.apply(i,e||[])).next())})};const Ne=new m(G);class Zr extends fe{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return Is(this,void 0,void 0,function*(){let t=this.network;return t==null&&(t=yield e.detectNetwork.call(this),t||Ne.throwError("no network detected",m.errors.UNKNOWN_ERROR,{}),this._network==null&&(E(this,"_network",t),this.emit("network",t,null))),t})}}class re extends Zr{constructor(e,t){Ne.checkAbstract(new.target,re),e=V(new.target,"getNetwork")(e),t=V(new.target,"getApiKey")(t);const r=V(new.target,"getUrl")(e,t);super(r,e),typeof t=="string"?E(this,"apiKey",t):t!=null&&Object.keys(t).forEach(n=>{E(this,n,t[n])})}_startPending(){Ne.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return Ne.throwError("API provider does not support signing",m.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return Ne.throwError("not implemented; sub-classes must override getUrl",m.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const fr=new m(G),ze="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class Yr extends lt{constructor(e,t){const r=new Ot(e,t),n=r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(n,r.network),E(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===ze}}class Ot extends re{static getWebSocketProvider(e,t){return new Yr(e,t)}static getApiKey(e){return e==null?ze:(e&&typeof e!="string"&&fr.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;default:fr.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+t,throttleCallback:(n,a)=>(t===ze&&Le(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===ze}}const Bs=new m(G),qe="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function Cs(i){switch(i){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return Bs.throwArgumentError("unsupported network","name",i)}class Qr extends re{isCommunityResource(){return this.apiKey===qe}static getApiKey(e){return e??qe}static getUrl(e,t){t==null&&(t=qe);const r={allowGzip:!0,url:"https://"+Cs(e.name)+t,throttleCallback:(n,a)=>(t.apiKey===qe&&Le(),Promise.resolve(!0))};return t.projectSecret!=null&&(r.user="",r.password=t.projectSecret),r}}var Ss=globalThis&&globalThis.__awaiter||function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{d(r.next(g))}catch(w){l(w)}}function f(g){try{d(r.throw(g))}catch(w){l(w)}}function d(g){g.done?a(g.value):n(g.value).then(c,f)}d((r=r.apply(i,e||[])).next())})};const dr=new m(G);class en extends re{static getApiKey(e){return e!=null&&dr.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="https://cloudflare-eth.com/";break;default:dr.throwArgumentError("unsupported network","network",arguments[0])}return r}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return Ss(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,e,t)})}}var Ge=globalThis&&globalThis.__awaiter||function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{d(r.next(g))}catch(w){l(w)}}function f(g){try{d(r.throw(g))}catch(w){l(w)}}function d(g){g.done?a(g.value):n(g.value).then(c,f)}d((r=r.apply(i,e||[])).next())})};const ie=new m(G);function pr(i){const e={};for(let t in i){if(i[t]==null)continue;let r=i[t];t==="type"&&r===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[t]?r=Ue(z(r)):t==="accessList"?r="["+Oe(r).map(n=>`{address:"${n.address}",storageKeys:["${n.storageKeys.join('","')}"]}`).join(",")+"]":r=z(r),e[t]=r)}return e}function Os(i){if(i.status==0&&(i.message==="No records found"||i.message==="No transactions found"))return i.result;if(i.status!=1||typeof i.message!="string"||!i.message.match(/^OK/)){const e=new Error("invalid response");throw e.result=JSON.stringify(i),(i.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return i.result}function gr(i){if(i&&i.status==0&&i.message=="NOTOK"&&(i.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(i),e.throttleRetry=!0,e}if(i.jsonrpc!="2.0"){const e=new Error("invalid response");throw e.result=JSON.stringify(i),e}if(i.error){const e=new Error(i.error.message||"unknown error");throw i.error.code&&(e.code=i.error.code),i.error.data&&(e.data=i.error.data),e}return i.result}function mr(i){if(i==="pending")throw new Error("pending not supported");return i==="latest"?i:parseInt(i.substring(2),16)}function yt(i,e,t){if(i==="call"&&e.code===m.errors.SERVER_ERROR){const n=e.error;if(n&&(n.message.match(/reverted/i)||n.message.match(/VM execution error/i))){let a=n.data;if(a&&(a="0x"+a.replace(/^.*0x/i,"")),L(a))return a;ie.throwError("missing revert data in call exception",m.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let r=e.message;throw e.code===m.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?r=e.error.message:typeof e.body=="string"?r=e.body:typeof e.responseText=="string"&&(r=e.responseText)),r=(r||"").toLowerCase(),r.match(/insufficient funds/)&&ie.throwError("insufficient funds for intrinsic transaction cost",m.errors.INSUFFICIENT_FUNDS,{error:e,method:i,transaction:t}),r.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&ie.throwError("nonce has already been used",m.errors.NONCE_EXPIRED,{error:e,method:i,transaction:t}),r.match(/another transaction with same nonce/)&&ie.throwError("replacement fee too low",m.errors.REPLACEMENT_UNDERPRICED,{error:e,method:i,transaction:t}),r.match(/execution failed due to an exception|execution reverted/)&&ie.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",m.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:i,transaction:t}),e}class tn extends at{constructor(e,t){super(e),E(this,"baseUrl",this.getBaseUrl()),E(this,"apiKey",t||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return ie.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,t){const r=Object.keys(t).reduce((a,l)=>{const c=t[l];return c!=null&&(a+=`&${l}=${c}`),a},""),n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${n}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,r){return Ge(this,void 0,void 0,function*(){const n=r?this.getPostUrl():this.getUrl(e,t),a=r?this.getPostData(e,t):null,l=e==="proxy"?gr:Os;this.emit("debug",{action:"request",request:n,provider:this});const c={url:n,throttleSlotInterval:1e3,throttleCallback:(g,w)=>(this.isCommunityResource()&&Le(),Promise.resolve(!0))};let f=null;a&&(c.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},f=Object.keys(a).map(g=>`${g}=${a[g]}`).join("&"));const d=yield ve(c,f,l||gr);return this.emit("debug",{action:"response",request:n,response:Z(d),provider:this}),d})}detectNetwork(){return Ge(this,void 0,void 0,function*(){return this.network})}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return Ge(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch(n=>yt("sendTransaction",n,t.signedTransaction));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if(t.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const n=pr(t.transaction);n.module="proxy",n.action="eth_call";try{return yield this.fetch("proxy",n,!0)}catch(a){return yt("call",a,t.transaction)}}case"estimateGas":{const n=pr(t.transaction);n.module="proxy",n.action="eth_estimateGas";try{return yield this.fetch("proxy",n,!0)}catch(a){return yt("estimateGas",a,t.transaction)}}case"getLogs":{const n={action:"getLogs"};if(t.filter.fromBlock&&(n.fromBlock=mr(t.filter.fromBlock)),t.filter.toBlock&&(n.toBlock=mr(t.filter.toBlock)),t.filter.address&&(n.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&ie.throwError("unsupported topic count",m.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),t.filter.topics.length===1)){const c=t.filter.topics[0];(typeof c!="string"||c.length!==66)&&ie.throwError("unsupported topic format",m.errors.UNSUPPORTED_OPERATION,{topic0:c}),n.topic0=c}const a=yield this.fetch("logs",n);let l={};for(let c=0;c<a.length;c++){const f=a[c];if(f.blockHash==null){if(l[f.blockNumber]==null){const d=yield this.getBlock(f.blockNumber);d&&(l[f.blockNumber]=d.hash)}f.blockHash=l[f.blockNumber]}}return a}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,t)})}getHistory(e,t,r){return Ge(this,void 0,void 0,function*(){const n={action:"txlist",address:yield this.resolveName(e),startblock:t??0,endblock:r??99999999,sort:"asc"};return(yield this.fetch("account",n)).map(l=>{["contractAddress","to"].forEach(function(f){l[f]==""&&delete l[f]}),l.creates==null&&l.contractAddress!=null&&(l.creates=l.contractAddress);const c=this.formatter.transactionResponse(l);return l.timeStamp&&(c.timestamp=parseInt(l.timeStamp)),c})})}isCommunityResource(){return this.apiKey==null}}var rt=globalThis&&globalThis.__awaiter||function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{d(r.next(g))}catch(w){l(w)}}function f(g){try{d(r.throw(g))}catch(w){l(w)}}function d(g){g.done?a(g.value):n(g.value).then(c,f)}d((r=r.apply(i,e||[])).next())})};const le=new m(G);function We(){return new Date().getTime()}function yr(i){let e=null;for(let t=0;t<i.length;t++){const r=i[t];if(r==null)return null;e?e.name===r.name&&e.chainId===r.chainId&&(e.ensAddress===r.ensAddress||e.ensAddress==null&&r.ensAddress==null)||le.throwArgumentError("provider mismatch","networks",i):e=r}return e}function wr(i,e){i=i.slice().sort();const t=Math.floor(i.length/2);if(i.length%2)return i[t];const r=i[t-1],n=i[t];return e!=null&&Math.abs(r-n)>e?null:(r+n)/2}function ge(i){if(i===null)return"null";if(typeof i=="number"||typeof i=="boolean")return JSON.stringify(i);if(typeof i=="string")return i;if(R.isBigNumber(i))return i.toString();if(Array.isArray(i))return JSON.stringify(i.map(e=>ge(e)));if(typeof i=="object"){const e=Object.keys(i);return e.sort(),"{"+e.map(t=>{let r=i[t];return typeof r=="function"?r="[function]":r=ge(r),JSON.stringify(t)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof i)}let Us=1;function br(i){let e=null,t=null,r=new Promise(l=>{e=function(){t&&(clearTimeout(t),t=null),l()},t=setTimeout(e,i)});const n=l=>(r=r.then(l),r);function a(){return r}return{cancel:e,getPromise:a,wait:n}}const Ls=[m.errors.CALL_EXCEPTION,m.errors.INSUFFICIENT_FUNDS,m.errors.NONCE_EXPIRED,m.errors.REPLACEMENT_UNDERPRICED,m.errors.UNPREDICTABLE_GAS_LIMIT],Fs=["address","args","errorArgs","errorSignature","method","transaction"];function He(i,e){const t={weight:i.weight};return Object.defineProperty(t,"provider",{get:()=>i.provider}),i.start&&(t.start=i.start),e&&(t.duration=e-i.start),i.done&&(i.error?t.error=i.error:t.result=i.result||null),t}function Ds(i,e){return function(t){const r={};t.forEach(a=>{const l=i(a.result);r[l]||(r[l]={count:0,result:a.result}),r[l].count++});const n=Object.keys(r);for(let a=0;a<n.length;a++){const l=r[n[a]];if(l.count>=e)return l.result}}}function js(i,e,t){let r=ge;switch(e){case"getBlockNumber":return function(n){const a=n.map(c=>c.result);let l=wr(n.map(c=>c.result),2);if(l!=null)return l=Math.ceil(l),a.indexOf(l+1)>=0&&l++,l>=i._highestBlockNumber&&(i._highestBlockNumber=l),i._highestBlockNumber};case"getGasPrice":return function(n){const a=n.map(l=>l.result);return a.sort(),a[Math.floor(a.length/2)]};case"getEtherPrice":return function(n){return wr(n.map(a=>a.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":r=function(n){return n==null?null:(n=j(n),n.confirmations=-1,ge(n))};break;case"getBlock":t.includeTransactions?r=function(n){return n==null?null:(n=j(n),n.transactions=n.transactions.map(a=>(a=j(a),a.confirmations=-1,a)),ge(n))}:r=function(n){return n==null?null:ge(n)};break;default:throw new Error("unknown method: "+e)}return Ds(r,i.quorum)}function xe(i,e){return rt(this,void 0,void 0,function*(){const t=i.provider;return t.blockNumber!=null&&t.blockNumber>=e||e===-1?t:ue(()=>new Promise((r,n)=>{setTimeout(function(){return t.blockNumber>=e?r(t):i.cancelled?r(null):r(void 0)},0)}),{oncePoll:t})})}function Ms(i,e,t,r){return rt(this,void 0,void 0,function*(){let n=i.provider;switch(t){case"getBlockNumber":case"getGasPrice":return n[t]();case"getEtherPrice":if(n.getEtherPrice)return n.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return r.blockTag&&L(r.blockTag)&&(n=yield xe(i,e)),n[t](r.address,r.blockTag||"latest");case"getStorageAt":return r.blockTag&&L(r.blockTag)&&(n=yield xe(i,e)),n.getStorageAt(r.address,r.position,r.blockTag||"latest");case"getBlock":return r.blockTag&&L(r.blockTag)&&(n=yield xe(i,e)),n[r.includeTransactions?"getBlockWithTransactions":"getBlock"](r.blockTag||r.blockHash);case"call":case"estimateGas":return r.blockTag&&L(r.blockTag)&&(n=yield xe(i,e)),t==="call"&&r.blockTag?n[t](r.transaction,r.blockTag):n[t](r.transaction);case"getTransaction":case"getTransactionReceipt":return n[t](r.transactionHash);case"getLogs":{let a=r.filter;return(a.fromBlock&&L(a.fromBlock)||a.toBlock&&L(a.toBlock))&&(n=yield xe(i,e)),n.getLogs(a)}}return le.throwError("unknown method error",m.errors.UNKNOWN_ERROR,{method:t,params:r})})}class rn extends at{constructor(e,t){e.length===0&&le.throwArgumentError("missing providers","providers",e);const r=e.map((l,c)=>{if(nt.isProvider(l)){const g=xt(l)?2e3:750;return Object.freeze({provider:l,weight:1,stallTimeout:g,priority:1})}const f=j(l);f.priority==null&&(f.priority=1),f.stallTimeout==null&&(f.stallTimeout=xt(l)?2e3:750),f.weight==null&&(f.weight=1);const d=f.weight;return(d%1||d>512||d<1)&&le.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${c}].weight`,d),Object.freeze(f)}),n=r.reduce((l,c)=>l+c.weight,0);t==null?t=n/2:t>n&&le.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let a=yr(r.map(l=>l.provider.network));a==null&&(a=new Promise((l,c)=>{setTimeout(()=>{this.detectNetwork().then(l,c)},0)})),super(a),E(this,"providerConfigs",Object.freeze(r)),E(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return rt(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(t=>t.provider.getNetwork()));return yr(e)})}perform(e,t){return rt(this,void 0,void 0,function*(){if(e==="sendTransaction"){const f=yield Promise.all(this.providerConfigs.map(d=>d.provider.sendTransaction(t.signedTransaction).then(g=>g.hash,g=>g)));for(let d=0;d<f.length;d++){const g=f[d];if(typeof g=="string")return g}throw f[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());const r=js(this,e,t),n=Sr(this.providerConfigs.map(j));n.sort((f,d)=>f.priority-d.priority);const a=this._highestBlockNumber;let l=0,c=!0;for(;;){const f=We();let d=n.filter(v=>v.runner&&f-v.start<v.stallTimeout).reduce((v,_)=>v+_.weight,0);for(;d<this.quorum&&l<n.length;){const v=n[l++],_=Us++;v.start=We(),v.staller=br(v.stallTimeout),v.staller.wait(()=>{v.staller=null}),v.runner=Ms(v,a,e,t).then(x=>{v.done=!0,v.result=x,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:_,backend:He(v,We()),request:{method:e,params:Z(t)},provider:this})},x=>{v.done=!0,v.error=x,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:_,backend:He(v,We()),request:{method:e,params:Z(t)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:_,backend:He(v,null),request:{method:e,params:Z(t)},provider:this}),d+=v.weight}const g=[];n.forEach(v=>{v.done||!v.runner||(g.push(v.runner),v.staller&&g.push(v.staller.getPromise()))}),g.length&&(yield Promise.race(g));const w=n.filter(v=>v.done&&v.error==null);if(w.length>=this.quorum){const v=r(w);if(v!==void 0)return n.forEach(_=>{_.staller&&_.staller.cancel(),_.cancelled=!0}),v;c||(yield br(100).getPromise()),c=!1}const N=n.reduce((v,_)=>{if(!_.done||_.error==null)return v;const x=_.error.code;return Ls.indexOf(x)>=0&&(v[x]||(v[x]={error:_.error,weight:0}),v[x].weight+=_.weight),v},{});if(Object.keys(N).forEach(v=>{const _=N[v];if(_.weight<this.quorum)return;n.forEach(T=>{T.staller&&T.staller.cancel(),T.cancelled=!0});const x=_.error,W={};Fs.forEach(T=>{x[T]!=null&&(W[T]=x[T])}),le.throwError(x.reason||x.message,v,W)}),n.filter(v=>!v.done).length===0)break}return n.forEach(f=>{f.staller&&f.staller.cancel(),f.cancelled=!0}),le.throwError("failed to meet quorum",m.errors.SERVER_ERROR,{method:e,params:t,results:n.map(f=>He(f)),provider:this})})}}const nn=null,Ke=new m(G),Te="84842078b09946638c03157f83405213";class sn extends lt{constructor(e,t){const r=new Ut(e,t),n=r.connection;n.password&&Ke.throwError("INFURA WebSocket project secrets unsupported",m.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const a=n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(a,e),E(this,"apiKey",r.projectId),E(this,"projectId",r.projectId),E(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===Te}}class Ut extends re{static getWebSocketProvider(e,t){return new sn(e,t)}static getApiKey(e){const t={apiKey:Te,projectId:Te,projectSecret:null};return e==null||(typeof e=="string"?t.projectId=e:e.projectSecret!=null?(Ke.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),Ke.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;default:Ke.throwError("unsupported network",m.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n={allowGzip:!0,url:"https://"+r+"/v3/"+t.projectId,throttleCallback:(a,l)=>(t.projectId===Te&&Le(),Promise.resolve(!0))};return t.projectSecret!=null&&(n.user="",n.password=t.projectSecret),n}isCommunityResource(){return this.projectId===Te}}class $s extends fe{send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);const n={request:r,resolve:null,reject:null},a=new Promise((l,c)=>{n.resolve=l,n.reject=c});return this._pendingBatch.push(n),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const l=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const c=l.map(f=>f.request);return this.emit("debug",{action:"requestBatch",request:Z(c),provider:this}),ve(this.connection,JSON.stringify(c)).then(f=>{this.emit("debug",{action:"response",request:c,response:f,provider:this}),l.forEach((d,g)=>{const w=f[g];if(w.error){const N=new Error(w.error.message);N.code=w.error.code,N.data=w.error.data,d.reject(N)}else d.resolve(w.result)})},f=>{this.emit("debug",{action:"response",error:f,request:c,provider:this}),l.forEach(d=>{d.reject(f)})})},10)),a}}const wt=new m(G),qs="ETHERS_JS_SHARED";class on extends re{static getApiKey(e){return e&&typeof e!="string"&&wt.throwArgumentError("invalid apiKey","apiKey",e),e||qs}static getUrl(e,t){wt.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:wt.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}}const vr=new m(G),Er="62e1ad51b37b8e00394bda3b";class an extends re{static getApiKey(e){const t={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return e==null?t.applicationId=Er:typeof e=="string"?t.applicationId=e:e.applicationSecretKey!=null?(t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey):e.applicationId?t.applicationId=e.applicationId:vr.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:vr.throwError("unsupported network",m.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n=`https://${r}/v1/lb/${t.applicationId}`,a={headers:{},url:n};return t.applicationSecretKey!=null&&(a.user="",a.password=t.applicationSecretKey),a}isCommunityResource(){return this.applicationId===Er}}const kr=new m(G);let Gs=1;function _r(i,e){const t="Web3LegacyFetcher";return function(r,n){const a={method:r,params:n,id:Gs++,jsonrpc:"2.0"};return new Promise((l,c)=>{this.emit("debug",{action:"request",fetcher:t,request:Z(a),provider:this}),e(a,(f,d)=>{if(f)return this.emit("debug",{action:"response",fetcher:t,error:f,request:a,provider:this}),c(f);if(this.emit("debug",{action:"response",fetcher:t,request:a,response:d,provider:this}),d.error){const g=new Error(d.error.message);return g.code=d.error.code,g.data=d.error.data,c(g)}l(d.result)})})}}function Ws(i){return function(e,t){t==null&&(t=[]);const r={method:e,params:t};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Z(r),provider:this}),i.request(r).then(n=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,response:n,provider:this}),n),n=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,error:n,provider:this}),n})}}class ln extends fe{constructor(e,t){e==null&&kr.throwArgumentError("missing provider","provider",e);let r=null,n=null,a=null;typeof e=="function"?(r="unknown:",n=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),a=e,e.request?(r===""&&(r="eip-1193:"),n=Ws(e)):e.sendAsync?n=_r(e,e.sendAsync.bind(e)):e.send?n=_r(e,e.send.bind(e)):kr.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),E(this,"jsonRpcFetchFunc",n),E(this,"provider",a)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const xr=new m(G);function Lt(i,e){if(i==null&&(i="homestead"),typeof i=="string"){const r=i.match(/^(ws|http)s?:/i);if(r)switch(r[1].toLowerCase()){case"http":case"https":return new fe(i);case"ws":case"wss":return new lt(i);default:xr.throwArgumentError("unsupported URL scheme","network",i)}}const t=Ct(i);return(!t||!t._defaultProvider)&&xr.throwError("unsupported getDefaultProvider network",m.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:i}),t._defaultProvider({FallbackProvider:rn,AlchemyProvider:Ot,AnkrProvider:Qr,CloudflareProvider:en,EtherscanProvider:tn,InfuraProvider:Ut,JsonRpcProvider:fe,NodesmithProvider:on,PocketProvider:an,Web3Provider:ln,IpcProvider:nn},e)}const cn=Object.freeze(Object.defineProperty({__proto__:null,Provider:nt,BaseProvider:at,Resolver:Nt,UrlJsonRpcProvider:re,FallbackProvider:rn,AlchemyProvider:Ot,AlchemyWebSocketProvider:Yr,AnkrProvider:Qr,CloudflareProvider:en,EtherscanProvider:tn,InfuraProvider:Ut,InfuraWebSocketProvider:sn,JsonRpcProvider:fe,JsonRpcBatchProvider:$s,NodesmithProvider:on,PocketProvider:an,StaticJsonRpcProvider:Zr,Web3Provider:ln,WebSocketProvider:lt,IpcProvider:nn,JsonRpcSigner:St,getDefaultProvider:Lt,getNetwork:Ct,isCommunityResource:xt,isCommunityResourcable:zr,showThrottleMessage:Le,Formatter:k},Symbol.toStringTag,{value:"Module"})),un=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:Wn,defaultAbiCoder:Hn,Fragment:Jn,ConstructorFragment:zn,ErrorFragment:Kn,EventFragment:Vn,FunctionFragment:Xn,ParamType:Zn,FormatTypes:Yn,checkResultErrors:Pr,Logger:m,RLP:Qn,_fetchData:ei,fetchJson:ve,poll:ue,checkProperties:Cr,deepCopy:Z,defineReadOnly:E,getStatic:V,resolveProperties:q,shallowCopy:j,arrayify:we,concat:ce,stripZeros:ti,zeroPad:ri,isBytes:Rr,isBytesLike:ni,defaultPath:ii,HDNode:si,SigningKey:oi,Interface:vt,LogDescription:ai,TransactionDescription:li,base58:Xe,base64:ci,hexlify:z,isHexString:L,hexConcat:ne,hexStripZeros:ui,hexValue:Ue,hexZeroPad:he,hexDataLength:be,hexDataSlice:K,nameprep:hi,_toEscapedUtf8String:fi,toUtf8Bytes:Ze,toUtf8CodePoints:di,toUtf8String:It,Utf8ErrorFuncs:pi,formatBytes32String:gi,parseBytes32String:mi,dnsEncode:Br,hashMessage:yi,namehash:Ae,isValidName:wi,id:bi,_TypedDataEncoder:kt,getAddress:ye,getIcapAddress:vi,getContractAddress:it,getCreate2Address:Ei,isAddress:ki,formatEther:_i,parseEther:xi,formatUnits:Ni,parseUnits:Ti,commify:Ai,computeHmac:Ri,keccak256:Pi,ripemd160:Ii,sha256:Et,sha512:Bi,randomBytes:Ci,shuffled:Sr,solidityPack:Si,solidityKeccak256:Oi,soliditySha256:Ui,splitSignature:Li,joinSignature:Fi,accessListify:Oe,parseTransaction:Ir,serializeTransaction:Di,get TransactionTypes(){return ji},getJsonWalletAddress:Mi,computeAddress:$i,recoverAddress:qi,computePublicKey:Gi,recoverPublicKey:Wi,verifyMessage:Hi,verifyTypedData:Ji,getAccountPath:zi,mnemonicToEntropy:Ki,entropyToMnemonic:Vi,isValidMnemonic:Xi,mnemonicToSeed:Zi,get SupportedAlgorithm(){return Yi},get UnicodeNormalizationForm(){return Qi},get Utf8ErrorReason(){return es},Indexed:Ar},Symbol.toStringTag,{value:"Module"})),Ft="ethers/5.7.2",hn=new m(Ft),fn=Object.freeze(Object.defineProperty({__proto__:null,Signer:Se,Wallet:Or,VoidSigner:Pt,getDefaultProvider:Lt,providers:cn,BaseContract:Bt,Contract:Qe,ContractFactory:Wr,BigNumber:R,FixedNumber:Ur,constants:Mr,get errors(){return Lr},logger:hn,utils:un,wordlists:Fr,version:Ft,Wordlist:Dr},Symbol.toStringTag,{value:"Module"}));try{const i=window;i._ethers==null&&(i._ethers=fn)}catch{}const Hs=Object.freeze(Object.defineProperty({__proto__:null,ethers:fn,Signer:Se,Wallet:Or,VoidSigner:Pt,getDefaultProvider:Lt,providers:cn,BaseContract:Bt,Contract:Qe,ContractFactory:Wr,BigNumber:R,FixedNumber:Ur,constants:Mr,get errors(){return Lr},logger:hn,utils:un,wordlists:Fr,version:Ft,Wordlist:Dr},Symbol.toStringTag,{value:"Module"})),Js=Cn(Hs);var dn={},ct={};ct.byteLength=Vs;ct.toByteArray=Zs;ct.fromByteArray=eo;var Q=[],X=[],zs=typeof Uint8Array<"u"?Uint8Array:Array,bt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var pe=0,Ks=bt.length;pe<Ks;++pe)Q[pe]=bt[pe],X[bt.charCodeAt(pe)]=pe;X["-".charCodeAt(0)]=62;X["_".charCodeAt(0)]=63;function pn(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function Vs(i){var e=pn(i),t=e[0],r=e[1];return(t+r)*3/4-r}function Xs(i,e,t){return(e+t)*3/4-t}function Zs(i){var e,t=pn(i),r=t[0],n=t[1],a=new zs(Xs(i,r,n)),l=0,c=n>0?r-4:r,f;for(f=0;f<c;f+=4)e=X[i.charCodeAt(f)]<<18|X[i.charCodeAt(f+1)]<<12|X[i.charCodeAt(f+2)]<<6|X[i.charCodeAt(f+3)],a[l++]=e>>16&255,a[l++]=e>>8&255,a[l++]=e&255;return n===2&&(e=X[i.charCodeAt(f)]<<2|X[i.charCodeAt(f+1)]>>4,a[l++]=e&255),n===1&&(e=X[i.charCodeAt(f)]<<10|X[i.charCodeAt(f+1)]<<4|X[i.charCodeAt(f+2)]>>2,a[l++]=e>>8&255,a[l++]=e&255),a}function Ys(i){return Q[i>>18&63]+Q[i>>12&63]+Q[i>>6&63]+Q[i&63]}function Qs(i,e,t){for(var r,n=[],a=e;a<t;a+=3)r=(i[a]<<16&16711680)+(i[a+1]<<8&65280)+(i[a+2]&255),n.push(Ys(r));return n.join("")}function eo(i){for(var e,t=i.length,r=t%3,n=[],a=16383,l=0,c=t-r;l<c;l+=a)n.push(Qs(i,l,l+a>c?c:l+a));return r===1?(e=i[t-1],n.push(Q[e>>2]+Q[e<<4&63]+"==")):r===2&&(e=(i[t-2]<<8)+i[t-1],n.push(Q[e>>10]+Q[e>>4&63]+Q[e<<2&63]+"=")),n.join("")}var Dt={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Dt.read=function(i,e,t,r,n){var a,l,c=n*8-r-1,f=(1<<c)-1,d=f>>1,g=-7,w=t?n-1:0,N=t?-1:1,v=i[e+w];for(w+=N,a=v&(1<<-g)-1,v>>=-g,g+=c;g>0;a=a*256+i[e+w],w+=N,g-=8);for(l=a&(1<<-g)-1,a>>=-g,g+=r;g>0;l=l*256+i[e+w],w+=N,g-=8);if(a===0)a=1-d;else{if(a===f)return l?NaN:(v?-1:1)*(1/0);l=l+Math.pow(2,r),a=a-d}return(v?-1:1)*l*Math.pow(2,a-r)};Dt.write=function(i,e,t,r,n,a){var l,c,f,d=a*8-n-1,g=(1<<d)-1,w=g>>1,N=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=r?0:a-1,_=r?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,l=g):(l=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-l))<1&&(l--,f*=2),l+w>=1?e+=N/f:e+=N*Math.pow(2,1-w),e*f>=2&&(l++,f/=2),l+w>=g?(c=0,l=g):l+w>=1?(c=(e*f-1)*Math.pow(2,n),l=l+w):(c=e*Math.pow(2,w-1)*Math.pow(2,n),l=0));n>=8;i[t+v]=c&255,v+=_,c/=256,n-=8);for(l=l<<n|c,d+=n;d>0;i[t+v]=l&255,v+=_,l/=256,d-=8);i[t+v-_]|=x*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){var e=ct,t=Dt,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=c,i.SlowBuffer=F,i.INSPECT_MAX_BYTES=50;var n=2147483647;i.kMaxLength=n,c.TYPED_ARRAY_SUPPORT=a(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{var u=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(u,s),u.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function l(u){if(u>n)throw new RangeError('The value "'+u+'" is invalid for option "size"');var s=new Uint8Array(u);return Object.setPrototypeOf(s,c.prototype),s}function c(u,s,o){if(typeof u=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(u)}return f(u,s,o)}c.poolSize=8192;function f(u,s,o){if(typeof u=="string")return N(u,s);if(ArrayBuffer.isView(u))return _(u);if(u==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u);if(Y(u,ArrayBuffer)||u&&Y(u.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Y(u,SharedArrayBuffer)||u&&Y(u.buffer,SharedArrayBuffer)))return x(u,s,o);if(typeof u=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var h=u.valueOf&&u.valueOf();if(h!=null&&h!==u)return c.from(h,s,o);var p=W(u);if(p)return p;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof u[Symbol.toPrimitive]=="function")return c.from(u[Symbol.toPrimitive]("string"),s,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u)}c.from=function(u,s,o){return f(u,s,o)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function d(u){if(typeof u!="number")throw new TypeError('"size" argument must be of type number');if(u<0)throw new RangeError('The value "'+u+'" is invalid for option "size"')}function g(u,s,o){return d(u),u<=0?l(u):s!==void 0?typeof o=="string"?l(u).fill(s,o):l(u).fill(s):l(u)}c.alloc=function(u,s,o){return g(u,s,o)};function w(u){return d(u),l(u<0?0:T(u)|0)}c.allocUnsafe=function(u){return w(u)},c.allocUnsafeSlow=function(u){return w(u)};function N(u,s){if((typeof s!="string"||s==="")&&(s="utf8"),!c.isEncoding(s))throw new TypeError("Unknown encoding: "+s);var o=O(u,s)|0,h=l(o),p=h.write(u,s);return p!==o&&(h=h.slice(0,p)),h}function v(u){for(var s=u.length<0?0:T(u.length)|0,o=l(s),h=0;h<s;h+=1)o[h]=u[h]&255;return o}function _(u){if(Y(u,Uint8Array)){var s=new Uint8Array(u);return x(s.buffer,s.byteOffset,s.byteLength)}return v(u)}function x(u,s,o){if(s<0||u.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(u.byteLength<s+(o||0))throw new RangeError('"length" is outside of buffer bounds');var h;return s===void 0&&o===void 0?h=new Uint8Array(u):o===void 0?h=new Uint8Array(u,s):h=new Uint8Array(u,s,o),Object.setPrototypeOf(h,c.prototype),h}function W(u){if(c.isBuffer(u)){var s=T(u.length)|0,o=l(s);return o.length===0||u.copy(o,0,0,s),o}if(u.length!==void 0)return typeof u.length!="number"||ht(u.length)?l(0):v(u);if(u.type==="Buffer"&&Array.isArray(u.data))return v(u.data)}function T(u){if(u>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return u|0}function F(u){return+u!=u&&(u=0),c.alloc(+u)}c.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==c.prototype},c.compare=function(s,o){if(Y(s,Uint8Array)&&(s=c.from(s,s.offset,s.byteLength)),Y(o,Uint8Array)&&(o=c.from(o,o.offset,o.byteLength)),!c.isBuffer(s)||!c.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===o)return 0;for(var h=s.length,p=o.length,y=0,b=Math.min(h,p);y<b;++y)if(s[y]!==o[y]){h=s[y],p=o[y];break}return h<p?-1:p<h?1:0},c.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(s,o){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return c.alloc(0);var h;if(o===void 0)for(o=0,h=0;h<s.length;++h)o+=s[h].length;var p=c.allocUnsafe(o),y=0;for(h=0;h<s.length;++h){var b=s[h];if(Y(b,Uint8Array))y+b.length>p.length?c.from(b).copy(p,y):Uint8Array.prototype.set.call(p,b,y);else if(c.isBuffer(b))b.copy(p,y);else throw new TypeError('"list" argument must be an Array of Buffers');y+=b.length}return p};function O(u,s){if(c.isBuffer(u))return u.length;if(ArrayBuffer.isView(u)||Y(u,ArrayBuffer))return u.byteLength;if(typeof u!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof u);var o=u.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&o===0)return 0;for(var p=!1;;)switch(s){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return ut(u).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o*2;case"hex":return o>>>1;case"base64":return zt(u).length;default:if(p)return h?-1:ut(u).length;s=(""+s).toLowerCase(),p=!0}}c.byteLength=O;function oe(u,s,o){var h=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((o===void 0||o>this.length)&&(o=this.length),o<=0)||(o>>>=0,s>>>=0,o<=s))return"";for(u||(u="utf8");;)switch(u){case"hex":return Nn(this,s,o);case"utf8":case"utf-8":return qt(this,s,o);case"ascii":return _n(this,s,o);case"latin1":case"binary":return xn(this,s,o);case"base64":return En(this,s,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Tn(this,s,o);default:if(h)throw new TypeError("Unknown encoding: "+u);u=(u+"").toLowerCase(),h=!0}}c.prototype._isBuffer=!0;function H(u,s,o){var h=u[s];u[s]=u[o],u[o]=h}c.prototype.swap16=function(){var s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var o=0;o<s;o+=2)H(this,o,o+1);return this},c.prototype.swap32=function(){var s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var o=0;o<s;o+=4)H(this,o,o+3),H(this,o+1,o+2);return this},c.prototype.swap64=function(){var s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var o=0;o<s;o+=8)H(this,o,o+7),H(this,o+1,o+6),H(this,o+2,o+5),H(this,o+3,o+4);return this},c.prototype.toString=function(){var s=this.length;return s===0?"":arguments.length===0?qt(this,0,s):oe.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(s){if(!c.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:c.compare(this,s)===0},c.prototype.inspect=function(){var s="",o=i.INSPECT_MAX_BYTES;return s=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(s+=" ... "),"<Buffer "+s+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(s,o,h,p,y){if(Y(s,Uint8Array)&&(s=c.from(s,s.offset,s.byteLength)),!c.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(o===void 0&&(o=0),h===void 0&&(h=s?s.length:0),p===void 0&&(p=0),y===void 0&&(y=this.length),o<0||h>s.length||p<0||y>this.length)throw new RangeError("out of range index");if(p>=y&&o>=h)return 0;if(p>=y)return-1;if(o>=h)return 1;if(o>>>=0,h>>>=0,p>>>=0,y>>>=0,this===s)return 0;for(var b=y-p,I=h-o,C=Math.min(b,I),S=this.slice(p,y),$=s.slice(o,h),U=0;U<C;++U)if(S[U]!==$[U]){b=S[U],I=$[U];break}return b<I?-1:I<b?1:0};function Mt(u,s,o,h,p){if(u.length===0)return-1;if(typeof o=="string"?(h=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,ht(o)&&(o=p?0:u.length-1),o<0&&(o=u.length+o),o>=u.length){if(p)return-1;o=u.length-1}else if(o<0)if(p)o=0;else return-1;if(typeof s=="string"&&(s=c.from(s,h)),c.isBuffer(s))return s.length===0?-1:$t(u,s,o,h,p);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?p?Uint8Array.prototype.indexOf.call(u,s,o):Uint8Array.prototype.lastIndexOf.call(u,s,o):$t(u,[s],o,h,p);throw new TypeError("val must be string, number or Buffer")}function $t(u,s,o,h,p){var y=1,b=u.length,I=s.length;if(h!==void 0&&(h=String(h).toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(u.length<2||s.length<2)return-1;y=2,b/=2,I/=2,o/=2}function C(Kt,Vt){return y===1?Kt[Vt]:Kt.readUInt16BE(Vt*y)}var S;if(p){var $=-1;for(S=o;S<b;S++)if(C(u,S)===C(s,$===-1?0:S-$)){if($===-1&&($=S),S-$+1===I)return $*y}else $!==-1&&(S-=S-$),$=-1}else for(o+I>b&&(o=b-I),S=o;S>=0;S--){for(var U=!0,De=0;De<I;De++)if(C(u,S+De)!==C(s,De)){U=!1;break}if(U)return S}return-1}c.prototype.includes=function(s,o,h){return this.indexOf(s,o,h)!==-1},c.prototype.indexOf=function(s,o,h){return Mt(this,s,o,h,!0)},c.prototype.lastIndexOf=function(s,o,h){return Mt(this,s,o,h,!1)};function mn(u,s,o,h){o=Number(o)||0;var p=u.length-o;h?(h=Number(h),h>p&&(h=p)):h=p;var y=s.length;h>y/2&&(h=y/2);for(var b=0;b<h;++b){var I=parseInt(s.substr(b*2,2),16);if(ht(I))return b;u[o+b]=I}return b}function yn(u,s,o,h){return Fe(ut(s,u.length-o),u,o,h)}function wn(u,s,o,h){return Fe(Pn(s),u,o,h)}function bn(u,s,o,h){return Fe(zt(s),u,o,h)}function vn(u,s,o,h){return Fe(In(s,u.length-o),u,o,h)}c.prototype.write=function(s,o,h,p){if(o===void 0)p="utf8",h=this.length,o=0;else if(h===void 0&&typeof o=="string")p=o,h=this.length,o=0;else if(isFinite(o))o=o>>>0,isFinite(h)?(h=h>>>0,p===void 0&&(p="utf8")):(p=h,h=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var y=this.length-o;if((h===void 0||h>y)&&(h=y),s.length>0&&(h<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");p||(p="utf8");for(var b=!1;;)switch(p){case"hex":return mn(this,s,o,h);case"utf8":case"utf-8":return yn(this,s,o,h);case"ascii":case"latin1":case"binary":return wn(this,s,o,h);case"base64":return bn(this,s,o,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vn(this,s,o,h);default:if(b)throw new TypeError("Unknown encoding: "+p);p=(""+p).toLowerCase(),b=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function En(u,s,o){return s===0&&o===u.length?e.fromByteArray(u):e.fromByteArray(u.slice(s,o))}function qt(u,s,o){o=Math.min(u.length,o);for(var h=[],p=s;p<o;){var y=u[p],b=null,I=y>239?4:y>223?3:y>191?2:1;if(p+I<=o){var C,S,$,U;switch(I){case 1:y<128&&(b=y);break;case 2:C=u[p+1],(C&192)===128&&(U=(y&31)<<6|C&63,U>127&&(b=U));break;case 3:C=u[p+1],S=u[p+2],(C&192)===128&&(S&192)===128&&(U=(y&15)<<12|(C&63)<<6|S&63,U>2047&&(U<55296||U>57343)&&(b=U));break;case 4:C=u[p+1],S=u[p+2],$=u[p+3],(C&192)===128&&(S&192)===128&&($&192)===128&&(U=(y&15)<<18|(C&63)<<12|(S&63)<<6|$&63,U>65535&&U<1114112&&(b=U))}}b===null?(b=65533,I=1):b>65535&&(b-=65536,h.push(b>>>10&1023|55296),b=56320|b&1023),h.push(b),p+=I}return kn(h)}var Gt=4096;function kn(u){var s=u.length;if(s<=Gt)return String.fromCharCode.apply(String,u);for(var o="",h=0;h<s;)o+=String.fromCharCode.apply(String,u.slice(h,h+=Gt));return o}function _n(u,s,o){var h="";o=Math.min(u.length,o);for(var p=s;p<o;++p)h+=String.fromCharCode(u[p]&127);return h}function xn(u,s,o){var h="";o=Math.min(u.length,o);for(var p=s;p<o;++p)h+=String.fromCharCode(u[p]);return h}function Nn(u,s,o){var h=u.length;(!s||s<0)&&(s=0),(!o||o<0||o>h)&&(o=h);for(var p="",y=s;y<o;++y)p+=Bn[u[y]];return p}function Tn(u,s,o){for(var h=u.slice(s,o),p="",y=0;y<h.length-1;y+=2)p+=String.fromCharCode(h[y]+h[y+1]*256);return p}c.prototype.slice=function(s,o){var h=this.length;s=~~s,o=o===void 0?h:~~o,s<0?(s+=h,s<0&&(s=0)):s>h&&(s=h),o<0?(o+=h,o<0&&(o=0)):o>h&&(o=h),o<s&&(o=s);var p=this.subarray(s,o);return Object.setPrototypeOf(p,c.prototype),p};function M(u,s,o){if(u%1!==0||u<0)throw new RangeError("offset is not uint");if(u+s>o)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(s,o,h){s=s>>>0,o=o>>>0,h||M(s,o,this.length);for(var p=this[s],y=1,b=0;++b<o&&(y*=256);)p+=this[s+b]*y;return p},c.prototype.readUintBE=c.prototype.readUIntBE=function(s,o,h){s=s>>>0,o=o>>>0,h||M(s,o,this.length);for(var p=this[s+--o],y=1;o>0&&(y*=256);)p+=this[s+--o]*y;return p},c.prototype.readUint8=c.prototype.readUInt8=function(s,o){return s=s>>>0,o||M(s,1,this.length),this[s]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(s,o){return s=s>>>0,o||M(s,2,this.length),this[s]|this[s+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(s,o){return s=s>>>0,o||M(s,2,this.length),this[s]<<8|this[s+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(s,o){return s=s>>>0,o||M(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(s,o){return s=s>>>0,o||M(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},c.prototype.readIntLE=function(s,o,h){s=s>>>0,o=o>>>0,h||M(s,o,this.length);for(var p=this[s],y=1,b=0;++b<o&&(y*=256);)p+=this[s+b]*y;return y*=128,p>=y&&(p-=Math.pow(2,8*o)),p},c.prototype.readIntBE=function(s,o,h){s=s>>>0,o=o>>>0,h||M(s,o,this.length);for(var p=o,y=1,b=this[s+--p];p>0&&(y*=256);)b+=this[s+--p]*y;return y*=128,b>=y&&(b-=Math.pow(2,8*o)),b},c.prototype.readInt8=function(s,o){return s=s>>>0,o||M(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},c.prototype.readInt16LE=function(s,o){s=s>>>0,o||M(s,2,this.length);var h=this[s]|this[s+1]<<8;return h&32768?h|4294901760:h},c.prototype.readInt16BE=function(s,o){s=s>>>0,o||M(s,2,this.length);var h=this[s+1]|this[s]<<8;return h&32768?h|4294901760:h},c.prototype.readInt32LE=function(s,o){return s=s>>>0,o||M(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},c.prototype.readInt32BE=function(s,o){return s=s>>>0,o||M(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},c.prototype.readFloatLE=function(s,o){return s=s>>>0,o||M(s,4,this.length),t.read(this,s,!0,23,4)},c.prototype.readFloatBE=function(s,o){return s=s>>>0,o||M(s,4,this.length),t.read(this,s,!1,23,4)},c.prototype.readDoubleLE=function(s,o){return s=s>>>0,o||M(s,8,this.length),t.read(this,s,!0,52,8)},c.prototype.readDoubleBE=function(s,o){return s=s>>>0,o||M(s,8,this.length),t.read(this,s,!1,52,8)};function J(u,s,o,h,p,y){if(!c.isBuffer(u))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>p||s<y)throw new RangeError('"value" argument is out of bounds');if(o+h>u.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(s,o,h,p){if(s=+s,o=o>>>0,h=h>>>0,!p){var y=Math.pow(2,8*h)-1;J(this,s,o,h,y,0)}var b=1,I=0;for(this[o]=s&255;++I<h&&(b*=256);)this[o+I]=s/b&255;return o+h},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(s,o,h,p){if(s=+s,o=o>>>0,h=h>>>0,!p){var y=Math.pow(2,8*h)-1;J(this,s,o,h,y,0)}var b=h-1,I=1;for(this[o+b]=s&255;--b>=0&&(I*=256);)this[o+b]=s/I&255;return o+h},c.prototype.writeUint8=c.prototype.writeUInt8=function(s,o,h){return s=+s,o=o>>>0,h||J(this,s,o,1,255,0),this[o]=s&255,o+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(s,o,h){return s=+s,o=o>>>0,h||J(this,s,o,2,65535,0),this[o]=s&255,this[o+1]=s>>>8,o+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(s,o,h){return s=+s,o=o>>>0,h||J(this,s,o,2,65535,0),this[o]=s>>>8,this[o+1]=s&255,o+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(s,o,h){return s=+s,o=o>>>0,h||J(this,s,o,4,4294967295,0),this[o+3]=s>>>24,this[o+2]=s>>>16,this[o+1]=s>>>8,this[o]=s&255,o+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(s,o,h){return s=+s,o=o>>>0,h||J(this,s,o,4,4294967295,0),this[o]=s>>>24,this[o+1]=s>>>16,this[o+2]=s>>>8,this[o+3]=s&255,o+4},c.prototype.writeIntLE=function(s,o,h,p){if(s=+s,o=o>>>0,!p){var y=Math.pow(2,8*h-1);J(this,s,o,h,y-1,-y)}var b=0,I=1,C=0;for(this[o]=s&255;++b<h&&(I*=256);)s<0&&C===0&&this[o+b-1]!==0&&(C=1),this[o+b]=(s/I>>0)-C&255;return o+h},c.prototype.writeIntBE=function(s,o,h,p){if(s=+s,o=o>>>0,!p){var y=Math.pow(2,8*h-1);J(this,s,o,h,y-1,-y)}var b=h-1,I=1,C=0;for(this[o+b]=s&255;--b>=0&&(I*=256);)s<0&&C===0&&this[o+b+1]!==0&&(C=1),this[o+b]=(s/I>>0)-C&255;return o+h},c.prototype.writeInt8=function(s,o,h){return s=+s,o=o>>>0,h||J(this,s,o,1,127,-128),s<0&&(s=255+s+1),this[o]=s&255,o+1},c.prototype.writeInt16LE=function(s,o,h){return s=+s,o=o>>>0,h||J(this,s,o,2,32767,-32768),this[o]=s&255,this[o+1]=s>>>8,o+2},c.prototype.writeInt16BE=function(s,o,h){return s=+s,o=o>>>0,h||J(this,s,o,2,32767,-32768),this[o]=s>>>8,this[o+1]=s&255,o+2},c.prototype.writeInt32LE=function(s,o,h){return s=+s,o=o>>>0,h||J(this,s,o,4,2147483647,-2147483648),this[o]=s&255,this[o+1]=s>>>8,this[o+2]=s>>>16,this[o+3]=s>>>24,o+4},c.prototype.writeInt32BE=function(s,o,h){return s=+s,o=o>>>0,h||J(this,s,o,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[o]=s>>>24,this[o+1]=s>>>16,this[o+2]=s>>>8,this[o+3]=s&255,o+4};function Wt(u,s,o,h,p,y){if(o+h>u.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function Ht(u,s,o,h,p){return s=+s,o=o>>>0,p||Wt(u,s,o,4),t.write(u,s,o,h,23,4),o+4}c.prototype.writeFloatLE=function(s,o,h){return Ht(this,s,o,!0,h)},c.prototype.writeFloatBE=function(s,o,h){return Ht(this,s,o,!1,h)};function Jt(u,s,o,h,p){return s=+s,o=o>>>0,p||Wt(u,s,o,8),t.write(u,s,o,h,52,8),o+8}c.prototype.writeDoubleLE=function(s,o,h){return Jt(this,s,o,!0,h)},c.prototype.writeDoubleBE=function(s,o,h){return Jt(this,s,o,!1,h)},c.prototype.copy=function(s,o,h,p){if(!c.isBuffer(s))throw new TypeError("argument should be a Buffer");if(h||(h=0),!p&&p!==0&&(p=this.length),o>=s.length&&(o=s.length),o||(o=0),p>0&&p<h&&(p=h),p===h||s.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("sourceEnd out of bounds");p>this.length&&(p=this.length),s.length-o<p-h&&(p=s.length-o+h);var y=p-h;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,h,p):Uint8Array.prototype.set.call(s,this.subarray(h,p),o),y},c.prototype.fill=function(s,o,h,p){if(typeof s=="string"){if(typeof o=="string"?(p=o,o=0,h=this.length):typeof h=="string"&&(p=h,h=this.length),p!==void 0&&typeof p!="string")throw new TypeError("encoding must be a string");if(typeof p=="string"&&!c.isEncoding(p))throw new TypeError("Unknown encoding: "+p);if(s.length===1){var y=s.charCodeAt(0);(p==="utf8"&&y<128||p==="latin1")&&(s=y)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(o<0||this.length<o||this.length<h)throw new RangeError("Out of range index");if(h<=o)return this;o=o>>>0,h=h===void 0?this.length:h>>>0,s||(s=0);var b;if(typeof s=="number")for(b=o;b<h;++b)this[b]=s;else{var I=c.isBuffer(s)?s:c.from(s,p),C=I.length;if(C===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(b=0;b<h-o;++b)this[b+o]=I[b%C]}return this};var An=/[^+/0-9A-Za-z-_]/g;function Rn(u){if(u=u.split("=")[0],u=u.trim().replace(An,""),u.length<2)return"";for(;u.length%4!==0;)u=u+"=";return u}function ut(u,s){s=s||1/0;for(var o,h=u.length,p=null,y=[],b=0;b<h;++b){if(o=u.charCodeAt(b),o>55295&&o<57344){if(!p){if(o>56319){(s-=3)>-1&&y.push(239,191,189);continue}else if(b+1===h){(s-=3)>-1&&y.push(239,191,189);continue}p=o;continue}if(o<56320){(s-=3)>-1&&y.push(239,191,189),p=o;continue}o=(p-55296<<10|o-56320)+65536}else p&&(s-=3)>-1&&y.push(239,191,189);if(p=null,o<128){if((s-=1)<0)break;y.push(o)}else if(o<2048){if((s-=2)<0)break;y.push(o>>6|192,o&63|128)}else if(o<65536){if((s-=3)<0)break;y.push(o>>12|224,o>>6&63|128,o&63|128)}else if(o<1114112){if((s-=4)<0)break;y.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else throw new Error("Invalid code point")}return y}function Pn(u){for(var s=[],o=0;o<u.length;++o)s.push(u.charCodeAt(o)&255);return s}function In(u,s){for(var o,h,p,y=[],b=0;b<u.length&&!((s-=2)<0);++b)o=u.charCodeAt(b),h=o>>8,p=o%256,y.push(p),y.push(h);return y}function zt(u){return e.toByteArray(Rn(u))}function Fe(u,s,o,h){for(var p=0;p<h&&!(p+o>=s.length||p>=u.length);++p)s[p+o]=u[p];return p}function Y(u,s){return u instanceof s||u!=null&&u.constructor!=null&&u.constructor.name!=null&&u.constructor.name===s.name}function ht(u){return u!==u}var Bn=function(){for(var u="0123456789abcdef",s=new Array(256),o=0;o<16;++o)for(var h=o*16,p=0;p<16;++p)s[h+p]=u[o]+u[p];return s}()})(dn);/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var to=function(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)},ro=function(){function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}}();function At(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}else return Array.from(i)}function no(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var ae=Js,jt=dn.Buffer,Nr=to,io=function(){function i(e){if(no(this,i),this.abi=[],typeof e=="string")try{var t=Sn;this.abi=JSON.parse(t.readFileSync(e))}catch{try{this.abi=JSON.parse(e)}catch(n){throw new Error("Invalid ABI: "+n.message)}}else if(e instanceof Object)this.abi=e;else throw new TypeError("Must pass ABI array object or file path to constructor")}return ro(i,[{key:"decodeConstructor",value:function(t){Nr(t)&&(t=t.toString("utf8")),typeof t!="string"&&(t=""),t=t.trim();for(var r=0;r<this.abi.length;r++){var n=this.abi[r];if(n.type==="constructor"){var a=n.name||null,l=n.inputs?n.inputs.map(function(d){return d.type}):[],c=n.inputs?n.inputs.map(function(d){return d.name}):[];if(t=t.slice(-256),t.length!==256)throw new Error("fail");t.indexOf("0x")!==0&&(t="0x"+t);var f=ae.utils.defaultAbiCoder.decode(l,t);return f=Ve(f),{method:a,types:l,inputs:f,names:c}}}throw new Error("not found")}},{key:"decodeData",value:function(t){Nr(t)&&(t=t.toString("utf8")),typeof t!="string"&&(t=""),t=t.trim();var r=jt.from(t.replace(/^0x/,""),"hex"),n=co(r.subarray(0,4)),a=r.subarray(4),l=this.abi.reduce(function(f,d){try{if(d.type==="constructor"||d.type==="event")return f;var g=d.name||null,w=d.inputs?d.inputs.map(function(T){return T.type.includes("tuple")?T:T.type}):[],N=d.inputs?d.inputs.map(function(T){return T.type.includes("tuple")?[T.name,T.components.map(function(F){return F.name})]:T.name}):[],v=lo(g,w);if(v===n){var _=[];a=so(w,a);try{_=ae.utils.defaultAbiCoder.decode(w,a)}catch{try{var x=new ae.utils.Interface([]);_=x.decodeFunctionData(ae.utils.FunctionFragment.fromObject(d),t)}catch{}}_=_.map(function(T,F){if(w[F].components){var O=w[F].components;return gn(T,O)}return w[F]==="address"?T.split("0x")[1]:w[F]==="address[]"?T.map(function(oe){return oe.split("0x")[1]}):T});var W=w.map(function(T){if(T.components){var F=T.components.reduce(function(oe,H){return[].concat(At(oe),[H.type])},[]),O="("+F.join(",")+")";return T.type==="tuple[]"?O+"[]":O}return T});return _=Ve(_),{method:g,types:W,inputs:_,names:N}}return f}catch{return f}},{method:null,types:[],inputs:[],names:[]});if(l.method||this.abi.reduce(function(f,d){if(d.type==="constructor"||d.type==="event")return f;var g=d.name||null;try{var w=new ae.utils.Interface([]),N=w.decodeFunctionData(ae.utils.FunctionFragment.fromObject(d),t),v=Ve(N);l.method=g,l.inputs=v,l.names=d.inputs?d.inputs.map(function(x){return x.type.includes("tuple")?[x.name,x.components.map(function(W){return W.name})]:x.name}):[];var _=d.inputs?d.inputs.map(function(x){return x.type.includes("tuple")?x:x.type}):[];l.types=_.map(function(x){if(x.components){var W=x.components.reduce(function(F,O){return[].concat(At(F),[O.type])},[]),T="("+W.join(",")+")";return x.type==="tuple[]"?T+"[]":T}return x})}catch{}}),!l.method)try{var c=this.decodeConstructor(t);if(c)return c}catch{}return l}}]),i}();function gn(i,e){return i.map(function(t,r){var n=e[r]?e[r].type:null;return n==="address"&&typeof t=="string"?t.split("0x")[1]:n==="address[]"||Array.isArray()?t.map(function(a){return a.split("0x")[1]}):Array.isArray(t)?gn(t,e):t})}function Ve(i){return[].concat(At(i.map(function(e){return Array.isArray(e)?Ve(e):e})))}function so(i,e){for(var t=0,r=0;r<i.length;r++){var n=i[r];if(n==="address"&&e.set(jt.alloc(12),t),ao(n)){var a=oo(n);a&&a!=="dynamic"?t+=32*a:t+=32}else t+=32}return e}function oo(i){var e=i.match(/(.*)\[(.*?)\]$/);return e?e[2]===""?"dynamic":parseInt(e[2],10):null}function ao(i){return i.lastIndexOf("]")===i.length-1}function Rt(i,e){if(i instanceof Object&&i.components&&(i=i.components),!Array.isArray(i))return i instanceof Object&&i.type?i.type:i;var t="("+i.reduce(function(r,n){return n.type==="tuple"?r.push(Rt(n.components)):n.type==="tuple[]"?r.push(Rt(n.components)+"[]"):r.push(n.type),r},[]).join(",")+")";return e?t+"[]":t}function lo(i,e){var t=i+"("+e.reduce(function(r,n){return r.push(Rt(n,n.type==="tuple[]")),r},[]).join(",")+")";return ae.utils.keccak256(jt.from(t)).slice(2,10)}function co(i){return Array.from(i,function(e){return("0"+(e&255).toString(16)).slice(-2)}).join("")}var uo=io;const mo=uo;export{mo as I,po as c,go as p};
