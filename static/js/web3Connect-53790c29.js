import{d as h}from"./vue-router-935545c9.js";import{t as r}from"./___vite-browser-external_commonjs-proxy-76af39aa.js";import{u as _,w as k}from"./index-a318ffbc.js";import{u as i}from"./web3Modal-12ac3f2c.js";import{m as C}from"./message-ff31a5ee.js";import{x,r as c,o as S,j as B,a7 as E,y as n,z as s,A as W,P as f,I as v,M as y,O as l,u}from"./runtime-core.esm-bundler-c80a0204.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import"./vue-i18n.runtime.esm-bundler-d653d868.js";import"./index-83b979c8.js";import"./web3.min-dce210ab.js";import"./index-a9568fb4.js";import"./index-3d55e6a1.js";import"./index-9f185cd9.js";const I={class:"container"},L={key:0,class:"wallet"},M={key:1},N={key:2},U=x({__name:"web3Connect",setup(V){const w=h(),o=c(!1),a=c(null),t=c(!0);async function d(){try{o.value=!0,i().getConnectedWallet().then(async e=>{t.value=e.isSupport,a.value=i().getWeb3,e.address&&t.value&&await b(),o.value=!1})}catch(e){console.error(e),o.value=!1}}function g(){i().disconnectWallet(),_().logOut()}const b=async()=>{o.value=!0,_().loginByUsername({username:"admin",password:"admin123"}).then(e=>{e.success&&k().then(()=>{w.push("/"),C("登录成功",{type:"success"})}),o.value=!1})};function p({code:e}){e==="Enter"&&d()}return S(()=>{window.document.addEventListener("keypress",p)}),B(()=>{window.document.removeEventListener("keypress",p)}),(e,H)=>{const m=E("el-button");return n(),s("div",null,[W("div",I,[a.value&&t.value?(n(),s("div",L,[f(m,{class:"w-full",size:"default",type:"danger",loading:o.value,onClick:g},{default:v(()=>[y(l(u(r)("web3.disconnect")),1)]),_:1},8,["loading"])])):!a.value&&t.value?(n(),s("div",M,[f(m,{class:"w-full",size:"default",type:"primary",loading:o.value,onClick:d},{default:v(()=>[y(l(u(r)("web3.connectWallet")),1)]),_:1},8,["loading"])])):(n(),s("div",N,l(u(r)("web3.noSupportChain")),1))])])}}});const X=z(U,[["__scopeId","data-v-d06459bd"]]);export{X as default};
