import{t as c}from"./i18n-c677edf9.js";import{u as z,g as w,M as x,w as T}from"./web3-1b4edc00.js";import{u as k}from"./web3Modal-e725f7b8.js";import{x as B,r as d,o as D,a7 as f,y as I,z as P,P as l,I as e,A as n,O as u,u as r,H as L,M as W,L as $}from"./runtime-core.esm-bundler-c80a0204.js";import"./__vite-browser-external-c2c4480c.js";import"./vue-i18n.runtime.esm-bundler-d653d868.js";import"./index-1278628c.js";import"./preload-helper-101896b7.js";import"./vue-router-935545c9.js";import"./___vite-browser-external_commonjs-proxy-66fe83c2.js";const q={class:"card-header"},O={class:"font-medium"},Q={style:{display:"flex","align-items":"left"}},U=n("i",{class:"el-icon-time"},null,-1),j={style:{"margin-left":"10px"}},F={style:{display:"flex","align-items":"left"}},G={style:{"margin-left":"3px"}},J={style:{display:"flex","align-items":"left"}},K=n("i",{class:"el-icon-time"},null,-1),R={style:{"margin-left":"10px"}},X={style:{display:"flex","align-items":"left"}},Y={style:{"margin-left":"3px"}},Z=B({name:"Transactions"}),dt=B({...Z,setup(tt){const p=d(!1),v=d(null),b=d(null),m=d(null),C=d([]),S=d([]),V=async()=>{p.value=!0;const o=w(x,v.value,m.value);(await o.methods.getTransactionIds(0).call()).map(async s=>{const i=await o.methods.getTransaction(s).call(),_=await o.methods.getTransactionConfirmationStatus(s,b.value.address).call(),y={id:s,destination:i.to,value:T(i.value,m.value),executeState:i.state,confirmStatus:_};C.value.push(y)}),(await o.methods.getTransactionIds(1).call()).map(async s=>{const i=await o.methods.getTransaction(s).call(),_=await o.methods.getTransactionConfirmationStatus(s,b.value.address).call(),y={id:s,destination:i.to,value:T(i.value,m.value),executeState:i.state,confirmStatus:_};S.value.push(y)})};D(()=>{v.value=z().getWallet,b.value=k().getWallet,m.value=k().getWeb3,V()});const g=d("0");function A({index:o}){g.value=o}const M=o=>{p.value=!0,w(x,v.value,m.value).methods.confirmTransaction(o.id).send({from:b.value.address}).then(a=>{console.info(a)}).catch(a=>{console.error(a)}).finally(()=>{p.value=!1})},E=o=>{p.value=!0,w(x,v.value,m.value).methods.executeTransaction(o.id).send({from:b.value.address}).then(a=>{console.info(a)}).catch(a=>{console.error(a)}).finally(()=>{p.value=!1})};return(o,h)=>{const a=f("el-table-column"),s=f("el-button"),i=f("el-table"),_=f("el-tab-pane"),y=f("el-tabs"),H=f("el-card");return I(),P("div",null,[l(H,{shadow:"never"},{header:e(()=>[n("div",q,[n("span",O,u(r(c)("transaction.transactions")+"-"+v.value),1)])]),default:e(()=>[l(y,{modelValue:g.value,"onUpdate:modelValue":h[0]||(h[0]=t=>g.value=t),onTabClick:A},{default:e(()=>[l(_,{label:r(c)("transaction.queue"),name:"0"},{default:e(()=>[l(i,{data:C.value,style:{width:"100%"}},{default:e(()=>[l(a,{label:r(c)("transaction.destination")},{default:e(t=>[n("div",Q,[U,n("span",j,u(t.row.destination),1)])]),_:1},8,["label"]),l(a,{label:r(c)("transaction.value")},{default:e(t=>[n("div",F,[n("span",null,u(t.row.value),1),n("span",G,u(t.row.symbol),1)])]),_:1},8,["label"]),l(a,{label:r(c)("assets.operation")},{default:e(t=>[t.row.confirmStatus?$("",!0):(I(),L(s,{key:0,type:"primary",size:"small",onClick:N=>M(t.row)},{default:e(()=>[W(u(r(c)("transaction.btnConfirm")),1)]),_:2},1032,["onClick"])),l(s,{type:"primary",size:"small",onClick:N=>E(t.row)},{default:e(()=>[W(u(r(c)("transaction.btnExecute")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["label"]),l(_,{label:r(c)("transaction.history"),name:"1"},{default:e(()=>[l(i,{data:S.value,style:{width:"100%"}},{default:e(()=>[l(a,{label:r(c)("transaction.destination")},{default:e(t=>[n("div",J,[K,n("span",R,u(t.row.destination),1)])]),_:1},8,["label"]),l(a,{label:r(c)("transaction.value")},{default:e(t=>[n("div",X,[n("span",null,u(t.row.value),1),n("span",Y,u(t.row.symbol),1)])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1})])}}});export{dt as default};
