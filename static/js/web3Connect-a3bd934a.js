import{d as M}from"./vue-router-935545c9.js";import{E,t as p}from"./___vite-browser-external_commonjs-proxy-1cc6769e.js";import{m as g,M as S}from"./index-9faba92d.js";import{u as i}from"./web3Modal-5bc085a0.js";import{aW as y}from"./index-0324b989.js";import{x as W,r as v,o as B,j as z,a7 as L,y as d,z as f,A as O,P as w,I as C,M as b,O as h,u as k}from"./runtime-core.esm-bundler-c80a0204.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";const U=(r,s)=>{if(s){const{icon:e,type:t="info",dangerouslyUseHTMLString:n=!1,customClass:c="antd",duration:u=2e3,showClose:a=!1,center:o=!1,offset:m=20,appendTo:l=document.body,grouping:x=!1,onClose:_}=s;return y({message:r,type:t,icon:e,dangerouslyUseHTMLString:n,duration:u,showClose:a,center:o,offset:m,appendTo:l,grouping:x,customClass:c==="antd"?"pure-message":"",onClose:()=>E(_)?_():null})}else return y({message:r,customClass:"pure-message"})},j={class:"container"},H={key:0,class:"wallet"},I={key:1},N=W({__name:"web3Connect",setup(r){const s=M(),e=v(!1),t=v(null);async function n(){try{e.value=!0,i().getConnectedWallet().then(async o=>{t.value=i().getWeb3,o.address&&await u(),e.value=!1}),e.value=!1}catch(o){console.error(o),e.value=!1}}function c(){i().disconnectWallet(),g().logOut()}const u=async()=>{e.value=!0,g().loginByUsername({username:"admin",password:"admin123"}).then(o=>{o.success&&S().then(()=>{s.push("/"),U("登录成功",{type:"success"})})}),e.value=!1};function a({code:o}){o==="Enter"&&n()}return B(()=>{window.document.addEventListener("keypress",a)}),z(()=>{window.document.removeEventListener("keypress",a)}),(o,m)=>{const l=L("el-button");return d(),f("div",null,[O("div",j,[t.value?(d(),f("div",H,[w(l,{class:"w-full",size:"default",type:"danger",loading:e.value,onClick:c},{default:C(()=>[b(h(k(p)("web3.disconnect")),1)]),_:1},8,["loading"])])):(d(),f("div",I,[w(l,{class:"w-full",size:"default",type:"primary",loading:e.value,onClick:n},{default:C(()=>[b(h(k(p)("web3.connectWallet")),1)]),_:1},8,["loading"])]))])])}}});const V=T(N,[["__scopeId","data-v-8e64d690"]]),G=Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"}));export{G as a,U as m,V as w};
