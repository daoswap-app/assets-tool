import{o as Vn,t as be}from"./i18n-4a0f4af2.js";import{M as Be}from"./MultiSigWallet_abi-6912cb8d.js";import{E as Kn}from"./ERC20_abi-801f43f8.js";import{g as Ce,w as et}from"./web3-dfdb1234.js";import{E as Xn}from"./constants-b9202782.js";import{a2 as Zn,a3 as Qn,a4 as Yn,a5 as ei,a6 as ti,a7 as ri,a8 as ni,a9 as ii,aa as zr,ab as m,ac as E,ad as ee,ae as ze,af as bt,ag as Te,ah as vt,I as $t,ai as $,aj as Xt,s as Vr,ak as re,al as j,am as Kr,an as K,ao as R,ap as ge,u as Xr,aq as H,ar as Ve,as as Ne,at as Y,au as Ke,av as Ae,aw as ye,ax as Zr,ay as ce,g as $e,e as Qr,az as Re,aA as ft,aB as oi,t as dt,b as Zt,aC as me,aD as si,G as qt,T as Wt,aE as Yr,M as en,A as ai,r as li,F as ci,C as ui,E as hi,l as fi,o as di,P as pi,q as gi,W as mi,aF as yi,aG as wi,aH as bi,aI as vi,aJ as Ei,aK as ki,aL as _i,L as xi,v as Ti,x as Ni,aM as Ai,n as Ri,_ as Ii,a as Pi,U as Bi,f as Ci,p as Si,k as Oi,h as Ui,i as Li,aN as Fi,aO as Di,a1 as ji,aP as Mi,aQ as $i,aR as qi,aS as Wi,aT as Gi,B as Hi,aU as Ji,D as zi,H as Vi,K as Ki,aV as Xi,aW as Zi,aX as Qi,aY as Yi,aZ as eo,a_ as to,a$ as ro,b0 as no,b1 as io,b2 as oo,b3 as so,b4 as ao,b5 as lo,b6 as co,b7 as uo,b8 as ho,b9 as fo,ba as po,bb as go,S as mo,d as yo,c as wo,bc as tn,bd as rn,be as nn,bf as on,bg as sn}from"./index-b5479df7.js";import{r as bo}from"./___vite-browser-external_commonjs-proxy-e8043f7a.js";import{x as an,r as Se,o as vo,a7 as Oe,aa as Eo,y as Bt,z as ko,J as _o,H as gr,I as G,P as V,A as Q,O as Z,u as ve,M as Ct,L as xo}from"./runtime-core.esm-bundler-c80a0204.js";const ln="0x0000000000000000000000000000000000000000",To="Îž",cn=Object.freeze(Object.defineProperty({__proto__:null,AddressZero:ln,NegativeOne:Zn,Zero:Qn,One:Yn,Two:ei,WeiPerEther:ti,MaxUint256:ri,MinInt256:ni,MaxInt256:ii,HashZero:zr,EtherSymbol:To},Symbol.toStringTag,{value:"Module"}));function mr(i){return function(e,t){const r=e[i];return t[i]-r}}const No="contracts/5.7.0";var he=globalThis&&globalThis.__awaiter||function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{d(r.next(g))}catch(w){l(w)}}function f(g){try{d(r.throw(g))}catch(w){l(w)}}function d(g){g.done?a(g.value):n(g.value).then(c,f)}d((r=r.apply(i,e||[])).next())})};const O=new m(No),Ao={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0,ccipReadEnabled:!0};function pt(i,e){return he(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&O.throwArgumentError("invalid address or ENS name","name",t);try{return Te(t)}catch{}i||O.throwError("a provider or signer is needed to resolve ENS names",m.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const r=yield i.resolveName(t);return r==null&&O.throwArgumentError("resolver or addr is not configured for ENS name","name",t),r})}function qe(i,e,t){return he(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((r,n)=>qe(i,Array.isArray(e)?e[n]:e[r.name],r))):t.type==="address"?yield pt(i,e):t.type==="tuple"?yield qe(i,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(r=>qe(i,r,t.arrayChildren))):Promise.reject(O.makeError("invalid value for array",m.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function Et(i,e,t){return he(this,void 0,void 0,function*(){let r={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(r=$(t.pop())),O.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),i.signer?r.from?r.from=H({override:pt(i.signer,r.from),signer:i.signer.getAddress()}).then(d=>he(this,void 0,void 0,function*(){return Te(d.signer)!==d.override&&O.throwError("Contract with a Signer cannot override from",m.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),d.override})):r.from=i.signer.getAddress():r.from&&(r.from=pt(i.provider,r.from));const n=yield H({args:qe(i.signer||i.provider,t,e.inputs),address:i.resolvedAddress,overrides:H(r)||{}}),a=i.interface.encodeFunctionData(e,n.args),l={data:a,to:n.address},c=n.overrides;if(c.nonce!=null&&(l.nonce=R.from(c.nonce).toNumber()),c.gasLimit!=null&&(l.gasLimit=R.from(c.gasLimit)),c.gasPrice!=null&&(l.gasPrice=R.from(c.gasPrice)),c.maxFeePerGas!=null&&(l.maxFeePerGas=R.from(c.maxFeePerGas)),c.maxPriorityFeePerGas!=null&&(l.maxPriorityFeePerGas=R.from(c.maxPriorityFeePerGas)),c.from!=null&&(l.from=c.from),c.type!=null&&(l.type=c.type),c.accessList!=null&&(l.accessList=Ve(c.accessList)),l.gasLimit==null&&e.gas!=null){let d=21e3;const g=Ne(a);for(let w=0;w<g.length;w++)d+=4,g[w]&&(d+=64);l.gasLimit=R.from(e.gas).add(d)}if(c.value){const d=R.from(c.value);!d.isZero()&&!e.payable&&O.throwError("non-payable method cannot override value",m.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),l.value=d}c.customData&&(l.customData=$(c.customData)),c.ccipReadEnabled&&(l.ccipReadEnabled=!!c.ccipReadEnabled),delete r.nonce,delete r.gasLimit,delete r.gasPrice,delete r.from,delete r.value,delete r.type,delete r.accessList,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.customData,delete r.ccipReadEnabled;const f=Object.keys(r).filter(d=>r[d]!=null);return f.length&&O.throwError(`cannot override ${f.map(d=>JSON.stringify(d)).join(",")}`,m.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:f}),l})}function Ro(i,e){return function(...t){return Et(i,e,t)}}function Io(i,e){const t=i.signer||i.provider;return function(...r){return he(this,void 0,void 0,function*(){t||O.throwError("estimate require a provider or signer",m.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const n=yield Et(i,e,r);return yield t.estimateGas(n)})}}function un(i,e){const t=e.wait.bind(e);e.wait=r=>t(r).then(n=>(n.events=n.logs.map(a=>{let l=re(a),c=null;try{c=i.interface.parseLog(a)}catch{}return c&&(l.args=c.args,l.decode=(f,d)=>i.interface.decodeEventLog(c.eventFragment,f,d),l.event=c.name,l.eventSignature=c.signature),l.removeListener=()=>i.provider,l.getBlock=()=>i.provider.getBlock(n.blockHash),l.getTransaction=()=>i.provider.getTransaction(n.transactionHash),l.getTransactionReceipt=()=>Promise.resolve(n),l}),n))}function hn(i,e,t){const r=i.signer||i.provider;return function(...n){return he(this,void 0,void 0,function*(){let a;if(n.length===e.inputs.length+1&&typeof n[n.length-1]=="object"){const f=$(n.pop());f.blockTag!=null&&(a=yield f.blockTag),delete f.blockTag,n.push(f)}i.deployTransaction!=null&&(yield i._deployed(a));const l=yield Et(i,e,n),c=yield r.call(l,a);try{let f=i.interface.decodeFunctionResult(e,c);return t&&e.outputs.length===1&&(f=f[0]),f}catch(f){throw f.code===m.errors.CALL_EXCEPTION&&(f.address=i.address,f.args=n,f.transaction=l),f}})}}function Po(i,e){return function(...t){return he(this,void 0,void 0,function*(){i.signer||O.throwError("sending a transaction requires a signer",m.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),i.deployTransaction!=null&&(yield i._deployed());const r=yield Et(i,e,t),n=yield i.signer.sendTransaction(r);return un(i,n),n})}}function yr(i,e,t){return e.constant?hn(i,e,t):Po(i,e)}function fn(i){return i.address&&(i.topics==null||i.topics.length===0)?"*":(i.address||"*")+"@"+(i.topics?i.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class He{constructor(e,t){E(this,"tag",e),E(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(r=>t||r.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(r=>{const n=e.slice();return setTimeout(()=>{r.listener.apply(this,n)},0),!r.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class Bo extends He{constructor(){super("error",null)}}class wr extends He{constructor(e,t,r,n){const a={address:e};let l=t.getEventTopic(r);n?(l!==n[0]&&O.throwArgumentError("topic mismatch","topics",n),a.topics=n.slice()):a.topics=[l],super(fn(a),a),E(this,"address",e),E(this,"interface",t),E(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,r)=>this.interface.decodeEventLog(this.fragment,t,r);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=Xr(e.args);if(t.length)throw t[0].error;const r=(e.args||[]).slice();return r.push(e),r}}class br extends He{constructor(e,t){super("*",{address:e}),E(this,"address",e),E(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(r,n)=>this.interface.decodeEventLog(t.eventFragment,r,n),e.args=t.args}catch{}}}class Qt{constructor(e,t,r){E(this,"interface",ee(new.target,"getInterface")(t)),r==null?(E(this,"provider",null),E(this,"signer",null)):ze.isSigner(r)?(E(this,"provider",r.provider||null),E(this,"signer",r)):bt.isProvider(r)?(E(this,"provider",r),E(this,"signer",null)):O.throwArgumentError("invalid signer or provider","signerOrProvider",r),E(this,"callStatic",{}),E(this,"estimateGas",{}),E(this,"functions",{}),E(this,"populateTransaction",{}),E(this,"filters",{});{const l={};Object.keys(this.interface.events).forEach(c=>{const f=this.interface.events[c];E(this.filters,c,(...d)=>({address:this.address,topics:this.interface.encodeFilterTopics(f,d)})),l[f.name]||(l[f.name]=[]),l[f.name].push(c)}),Object.keys(l).forEach(c=>{const f=l[c];f.length===1?E(this.filters,c,this.filters[f[0]]):O.warn(`Duplicate definition of ${c} (${f.join(", ")})`)})}if(E(this,"_runningEvents",{}),E(this,"_wrappedEmits",{}),e==null&&O.throwArgumentError("invalid contract address or ENS name","addressOrName",e),E(this,"address",e),this.provider)E(this,"resolvedAddress",pt(this.provider,e));else try{E(this,"resolvedAddress",Promise.resolve(Te(e)))}catch{O.throwError("provider is required to use ENS name as contract address",m.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(l=>{});const n={},a={};Object.keys(this.interface.functions).forEach(l=>{const c=this.interface.functions[l];if(a[l]){O.warn(`Duplicate ABI entry for ${JSON.stringify(l)}`);return}a[l]=!0;{const f=c.name;n[`%${f}`]||(n[`%${f}`]=[]),n[`%${f}`].push(l)}this[l]==null&&E(this,l,yr(this,c,!0)),this.functions[l]==null&&E(this.functions,l,yr(this,c,!1)),this.callStatic[l]==null&&E(this.callStatic,l,hn(this,c,!0)),this.populateTransaction[l]==null&&E(this.populateTransaction,l,Ro(this,c)),this.estimateGas[l]==null&&E(this.estimateGas,l,Io(this,c))}),Object.keys(n).forEach(l=>{const c=n[l];if(c.length>1)return;l=l.substring(1);const f=c[0];try{this[l]==null&&E(this,l,this[f])}catch{}this.functions[l]==null&&E(this.functions,l,this.functions[f]),this.callStatic[l]==null&&E(this.callStatic,l,this.callStatic[f]),this.populateTransaction[l]==null&&E(this.populateTransaction,l,this.populateTransaction[f]),this.estimateGas[l]==null&&E(this.estimateGas,l,this.estimateGas[f])})}static getContractAddress(e){return vt(e)}static getInterface(e){return $t.isInterface(e)?e:new $t(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&O.throwError("contract not deployed",m.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||O.throwError("sending a transactions require a signer",m.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=$(e||{});return["from","to"].forEach(function(r){t[r]!=null&&O.throwError("cannot override "+r,m.errors.UNSUPPORTED_OPERATION,{operation:r})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new Xt(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&E(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Vr.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new Bo);if(e==="event")return this._normalizeRunningEvent(new He("event",null));if(e==="*")return this._normalizeRunningEvent(new br(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new wr(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const r=e.topics[0];if(typeof r!="string")throw new Error("invalid topic");const n=this.interface.getEvent(r);return this._normalizeRunningEvent(new wr(this.address,this.interface,n,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new He(fn(t),t))}return this._normalizeRunningEvent(new br(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,r){const n=re(t);return n.removeListener=()=>{r&&(e.removeListener(r),this._checkRunningEvents(e))},n.getBlock=()=>this.provider.getBlock(t.blockHash),n.getTransaction=()=>this.provider.getTransaction(t.transactionHash),n.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(n),n}_addEventListener(e,t,r){if(this.provider||O.throwError("events require a provider or a signer with a provider",m.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const n=a=>{let l=this._wrapEvent(e,a,t);if(l.decodeError==null)try{const c=e.getEmit(l);this.emit(e.filter,...c)}catch(c){l.decodeError=c.error}e.filter!=null&&this.emit("event",l),l.decodeError!=null&&this.emit("error",l.decodeError,l)};this._wrappedEmits[e.tag]=n,e.filter!=null&&this.provider.on(e.filter,n)}}queryFilter(e,t,r){const n=this._getRunningEvent(e),a=$(n.filter);return typeof t=="string"&&j(t,32)?(r!=null&&O.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),a.blockHash=t):(a.fromBlock=t??0,a.toBlock=r??"latest"),this.provider.getLogs(a).then(l=>l.map(c=>this._wrapEvent(n,c,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const r=this._getRunningEvent(e),n=r.run(t)>0;return this._checkRunningEvents(r),n}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,r)=>t+this._runningEvents[r].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let r in this._runningEvents)this._runningEvents[r].listeners().forEach(n=>{t.push(n)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const r in this._runningEvents){const n=this._runningEvents[r];n.removeAllListeners(),this._checkRunningEvents(n)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this}removeListener(e,t){return this.off(e,t)}}class gt extends Qt{}class dn{constructor(e,t,r){let n=null;typeof t=="string"?n=t:Kr(t)?n=K(t):t&&typeof t.object=="string"?n=t.object:n="!",n.substring(0,2)!=="0x"&&(n="0x"+n),(!j(n)||n.length%2)&&O.throwArgumentError("invalid bytecode","bytecode",t),r&&!ze.isSigner(r)&&O.throwArgumentError("invalid signer","signer",r),E(this,"bytecode",n),E(this,"interface",ee(new.target,"getInterface")(e)),E(this,"signer",r||null)}getDeployTransaction(...e){let t={};if(e.length===this.interface.deploy.inputs.length+1&&typeof e[e.length-1]=="object"){t=$(e.pop());for(const r in t)if(!Ao[r])throw new Error("unknown transaction override "+r)}return["data","from","to"].forEach(r=>{t[r]!=null&&O.throwError("cannot override "+r,m.errors.UNSUPPORTED_OPERATION,{operation:r})}),t.value&&!R.from(t.value).isZero()&&!this.interface.deploy.payable&&O.throwError("non-payable constructor cannot override value",m.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:t.value}),O.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),t.data=K(ge([this.bytecode,this.interface.encodeDeploy(e)])),t}deploy(...e){return he(this,void 0,void 0,function*(){let t={};e.length===this.interface.deploy.inputs.length+1&&(t=e.pop()),O.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");const r=yield qe(this.signer,e,this.interface.deploy.inputs);r.push(t);const n=this.getDeployTransaction(...r),a=yield this.signer.sendTransaction(n),l=ee(this.constructor,"getContractAddress")(a),c=ee(this.constructor,"getContract")(l,this.interface,this.signer);return un(c,a),E(c,"deployTransaction",a),c})}attach(e){return this.constructor.getContract(e,this.interface,this.signer)}connect(e){return new this.constructor(this.interface,this.bytecode,e)}static fromSolidity(e,t){e==null&&O.throwError("missing compiler output",m.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),typeof e=="string"&&(e=JSON.parse(e));const r=e.abi;let n=null;return e.bytecode?n=e.bytecode:e.evm&&e.evm.bytecode&&(n=e.evm.bytecode),new this(r,n,t)}static getInterface(e){return gt.getInterface(e)}static getContractAddress(e){return vt(e)}static getContract(e,t,r){return new gt(e,t,r)}}const Co="networks/5.7.1",vr=new m(Co);function So(i){return i&&typeof i.renetwork=="function"}function ae(i){const e=function(t,r){r==null&&(r={});const n=[];if(t.InfuraProvider&&r.infura!=="-")try{n.push(new t.InfuraProvider(i,r.infura))}catch{}if(t.EtherscanProvider&&r.etherscan!=="-")try{n.push(new t.EtherscanProvider(i,r.etherscan))}catch{}if(t.AlchemyProvider&&r.alchemy!=="-")try{n.push(new t.AlchemyProvider(i,r.alchemy))}catch{}if(t.PocketProvider&&r.pocket!=="-"){const a=["goerli","ropsten","rinkeby","sepolia"];try{const l=new t.PocketProvider(i,r.pocket);l.network&&a.indexOf(l.network.name)===-1&&n.push(l)}catch{}}if(t.CloudflareProvider&&r.cloudflare!=="-")try{n.push(new t.CloudflareProvider(i))}catch{}if(t.AnkrProvider&&r.ankr!=="-")try{const a=["ropsten"],l=new t.AnkrProvider(i,r.ankr);l.network&&a.indexOf(l.network.name)===-1&&n.push(l)}catch{}if(n.length===0)return null;if(t.FallbackProvider){let a=1;return r.quorum!=null?a=r.quorum:i==="homestead"&&(a=2),new t.FallbackProvider(n,a)}return n[0]};return e.renetwork=function(t){return ae(t)},e}function mt(i,e){const t=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(i,e):null};return t.renetwork=function(r){return mt(i,r)},t}const Er={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:ae("homestead")},kr={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:ae("ropsten")},_r={chainId:63,name:"classicMordor",_defaultProvider:mt("https://www.ethercluster.com/mordor","classicMordor")},tt={unspecified:{chainId:0,name:"unspecified"},homestead:Er,mainnet:Er,morden:{chainId:2,name:"morden"},ropsten:kr,testnet:kr,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:ae("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:ae("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:ae("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:ae("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:mt("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:_r,classicTestnet:_r,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:mt("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:ae("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:ae("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Yt(i){if(i==null)return null;if(typeof i=="number"){for(const r in tt){const n=tt[r];if(n.chainId===i)return{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress||null,_defaultProvider:n._defaultProvider||null}}return{chainId:i,name:"unknown"}}if(typeof i=="string"){const r=tt[i];return r==null?null:{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress,_defaultProvider:r._defaultProvider||null}}const e=tt[i.name];if(!e)return typeof i.chainId!="number"&&vr.throwArgumentError("invalid network chainId","network",i),i;i.chainId!==0&&i.chainId!==e.chainId&&vr.throwArgumentError("network chainId mismatch","network",i);let t=i._defaultProvider||null;return t==null&&e._defaultProvider&&(So(e._defaultProvider)?t=e._defaultProvider.renetwork(i):t=e._defaultProvider),{name:i.name,chainId:e.chainId,ensAddress:i.ensAddress||e.ensAddress||null,_defaultProvider:t}}var yt="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Gt={};for(var rt=0;rt<yt.length;rt++){var St=yt.charAt(rt);if(Gt[St]!==void 0)throw new TypeError(St+" is ambiguous");Gt[St]=rt}function xe(i){var e=i>>25;return(i&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function pn(i){for(var e=1,t=0;t<i.length;++t){var r=i.charCodeAt(t);if(r<33||r>126)return"Invalid prefix ("+i+")";e=xe(e)^r>>5}for(e=xe(e),t=0;t<i.length;++t){var n=i.charCodeAt(t);e=xe(e)^n&31}return e}function Oo(i,e,t){if(t=t||90,i.length+7+e.length>t)throw new TypeError("Exceeds length limit");i=i.toLowerCase();var r=pn(i);if(typeof r=="string")throw new Error(r);for(var n=i+"1",a=0;a<e.length;++a){var l=e[a];if(l>>5)throw new Error("Non 5-bit word");r=xe(r)^l,n+=yt.charAt(l)}for(a=0;a<6;++a)r=xe(r);for(r^=1,a=0;a<6;++a){var c=r>>(5-a)*5&31;n+=yt.charAt(c)}return n}function gn(i,e){if(e=e||90,i.length<8)return i+" too short";if(i.length>e)return"Exceeds length limit";var t=i.toLowerCase(),r=i.toUpperCase();if(i!==t&&i!==r)return"Mixed-case string "+i;i=t;var n=i.lastIndexOf("1");if(n===-1)return"No separator character for "+i;if(n===0)return"Missing prefix for "+i;var a=i.slice(0,n),l=i.slice(n+1);if(l.length<6)return"Data too short";var c=pn(a);if(typeof c=="string")return c;for(var f=[],d=0;d<l.length;++d){var g=l.charAt(d),w=Gt[g];if(w===void 0)return"Unknown character "+g;c=xe(c)^w,!(d+6>=l.length)&&f.push(w)}return c!==1?"Invalid checksum for "+i:{prefix:a,words:f}}function Uo(){var i=gn.apply(null,arguments);if(typeof i=="object")return i}function Lo(i){var e=gn.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function kt(i,e,t,r){for(var n=0,a=0,l=(1<<t)-1,c=[],f=0;f<i.length;++f)for(n=n<<e|i[f],a+=e;a>=t;)a-=t,c.push(n>>a&l);if(r)a>0&&c.push(n<<t-a&l);else{if(a>=e)return"Excess padding";if(n<<t-a&l)return"Non-zero padding"}return c}function Fo(i){var e=kt(i,8,5,!0);if(Array.isArray(e))return e}function Do(i){var e=kt(i,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function jo(i){var e=kt(i,5,8,!1);if(Array.isArray(e))return e}function Mo(i){var e=kt(i,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var $o={decodeUnsafe:Uo,decode:Lo,encode:Oo,toWordsUnsafe:Fo,toWords:Do,fromWordsUnsafe:jo,fromWords:Mo};const xr=$o,J="providers/5.7.2",Ue=new m(J);class _{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),n=this.blockTag.bind(this),a=this.data.bind(this),l=this.hash.bind(this),c=this.hex.bind(this),f=this.number.bind(this),d=this.type.bind(this),g=w=>this.data(w,!0);return e.transaction={hash:l,type:d,accessList:_.allowNull(this.accessList.bind(this),null),blockHash:_.allowNull(l,null),blockNumber:_.allowNull(f,null),transactionIndex:_.allowNull(f,null),confirmations:_.allowNull(f,null),from:t,gasPrice:_.allowNull(r),maxPriorityFeePerGas:_.allowNull(r),maxFeePerGas:_.allowNull(r),gasLimit:r,to:_.allowNull(t,null),value:r,nonce:f,data:a,r:_.allowNull(this.uint256),s:_.allowNull(this.uint256),v:_.allowNull(f),creates:_.allowNull(t,null),raw:_.allowNull(a)},e.transactionRequest={from:_.allowNull(t),nonce:_.allowNull(f),gasLimit:_.allowNull(r),gasPrice:_.allowNull(r),maxPriorityFeePerGas:_.allowNull(r),maxFeePerGas:_.allowNull(r),to:_.allowNull(t),value:_.allowNull(r),data:_.allowNull(g),type:_.allowNull(f),accessList:_.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:f,blockNumber:f,transactionHash:l,address:t,topics:_.arrayOf(l),data:a,logIndex:f,blockHash:l},e.receipt={to:_.allowNull(this.address,null),from:_.allowNull(this.address,null),contractAddress:_.allowNull(t,null),transactionIndex:f,root:_.allowNull(c),gasUsed:r,logsBloom:_.allowNull(a),blockHash:l,transactionHash:l,logs:_.arrayOf(this.receiptLog.bind(this)),blockNumber:f,confirmations:_.allowNull(f,null),cumulativeGasUsed:r,effectiveGasPrice:_.allowNull(r),status:_.allowNull(f),type:d},e.block={hash:_.allowNull(l),parentHash:l,number:f,timestamp:f,nonce:_.allowNull(c),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:_.allowNull(t),extraData:a,transactions:_.allowNull(_.arrayOf(l)),baseFeePerGas:_.allowNull(r)},e.blockWithTransactions=$(e.block),e.blockWithTransactions.transactions=_.allowNull(_.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:_.allowNull(n,void 0),toBlock:_.allowNull(n,void 0),blockHash:_.allowNull(l,void 0),address:_.allowNull(t,void 0),topics:_.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:_.allowNull(f),blockHash:_.allowNull(l),transactionIndex:f,removed:_.allowNull(this.boolean.bind(this)),address:t,data:_.allowFalsish(a,"0x"),topics:_.arrayOf(l),transactionHash:l,logIndex:f},e}accessList(e){return Ve(e||[])}number(e){return e==="0x"?0:R.from(e).toNumber()}type(e){return e==="0x"||e==null?0:R.from(e).toNumber()}bigNumber(e){return R.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),j(e))?e.toLowerCase():Ue.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!==0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return Te(e)}callAddress(e){if(!j(e,32))return null;const t=Te(Y(e,12));return t===ln?null:t}contractAddress(e){return vt(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||j(e))return Ke(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return Ae(r)!==32?Ue.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(e==null)return null;const t=R.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!j(e))throw new Error("invalid uint256");return ye(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const r=e._difficulty!=null?e._difficulty:e.difficulty,n=_.check(t,e);return n._difficulty=r==null?null:R.from(r),n}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return _.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&R.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const t=_.check(this.formats.transaction,e);if(e.chainId!=null){let r=e.chainId;j(r)&&(r=R.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;r==null&&t.v==null&&(r=e.chainId),j(r)&&(r=R.from(r).toNumber()),typeof r!="number"&&t.v!=null&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),typeof r!="number"&&(r=0),t.chainId=r}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return Zr(e)}receiptLog(e){return _.check(this.formats.receiptLog,e)}receipt(e){const t=_.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const r=R.from(t.root).toNumber();r===0||r===1?(t.status!=null&&t.status!==r&&Ue.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=r,delete t.root):Ue.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&Ue.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return _.check(this.formats.filter,e)}filterLog(e){return _.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const n in e)try{const a=e[n](t[n]);a!==void 0&&(r[n]=a)}catch(a){throw a.checkKey=n,a.checkValue=t[n],a}return r}static allowNull(e,t){return function(r){return r==null?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach(function(n){r.push(e(n))}),r}}}function mn(i){return i&&typeof i.isCommunityResource=="function"}function Ht(i){return mn(i)&&i.isCommunityResource()}let Tr=!1;function Xe(){Tr||(Tr=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var A=globalThis&&globalThis.__awaiter||function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{d(r.next(g))}catch(w){l(w)}}function f(g){try{d(r.throw(g))}catch(w){l(w)}}function d(g){g.done?a(g.value):n(g.value).then(c,f)}d((r=r.apply(i,e||[])).next())})};const I=new m(J),qo=10;function Nr(i){return i==null?"null":(Ae(i)!==32&&I.throwArgumentError("invalid topic","topic",i),i.toLowerCase())}function Ar(i){for(i=i.slice();i.length>0&&i[i.length-1]==null;)i.pop();return i.map(e=>{if(Array.isArray(e)){const t={};e.forEach(n=>{t[Nr(n)]=!0});const r=Object.keys(t);return r.sort(),r.join("|")}else return Nr(e)}).join("&")}function Wo(i){return i===""?[]:i.split(/&/g).map(e=>{if(e==="")return[];const t=e.split("|").map(r=>r==="null"?null:r);return t.length===1?t[0]:t})}function Ee(i){if(typeof i=="string"){if(i=i.toLowerCase(),Ae(i)===32)return"tx:"+i;if(i.indexOf(":")===-1)return i}else{if(Array.isArray(i))return"filter:*:"+Ar(i);if(si.isForkEvent(i))throw I.warn("not implemented"),new Error("not implemented");if(i&&typeof i=="object")return"filter:"+(i.address||"*")+":"+Ar(i.topics||[])}throw new Error("invalid event - "+i)}function Le(){return new Date().getTime()}function Rr(i){return new Promise(e=>{setTimeout(e,i)})}const Go=["block","network","pending","poll"];class Ho{constructor(e,t,r){E(this,"tag",e),E(this,"listener",t),E(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],r=Wo(e[2]),n={};return r.length>0&&(n.topics=r),t&&t!=="*"&&(n.address=t),n}pollable(){return this.tag.indexOf(":")>=0||Go.indexOf(this.tag)>=0}}const Jo={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Ot(i){return ye(R.from(i).toHexString(),32)}function Ir(i){return ft.encode(ge([i,Y(qt(qt(i)),0,4)]))}const yn=new RegExp("^(ipfs)://(.*)$","i"),Pr=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),yn,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function lt(i,e){try{return Zt(Je(i,e))}catch{}return null}function Je(i,e){if(i==="0x")return null;const t=R.from(Y(i,e,e+32)).toNumber(),r=R.from(Y(i,t,t+32)).toNumber();return Y(i,t+32,t+32+r)}function Ut(i){return i.match(/^ipfs:\/\/ipfs\//i)?i=i.substring(12):i.match(/^ipfs:\/\//i)?i=i.substring(7):I.throwArgumentError("unsupported IPFS format","link",i),`https://gateway.ipfs.io/ipfs/${i}`}function Br(i){const e=Ne(i);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function zo(i){if(i.length%32===0)return i;const e=new Uint8Array(Math.ceil(i.length/32)*32);return e.set(i),e}function wn(i){const e=[];let t=0;for(let r=0;r<i.length;r++)e.push(null),t+=32;for(let r=0;r<i.length;r++){const n=Ne(i[r]);e[r]=Br(t),e.push(Br(n.length)),e.push(zo(n)),t+=32+Math.ceil(n.length/32)*32}return ce(e)}class Jt{constructor(e,t,r,n){E(this,"provider",e),E(this,"name",r),E(this,"address",e.formatter.address(t)),E(this,"_resolvedAddress",n)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>R.from(e).eq(1)).catch(e=>{if(e.code===m.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return A(this,void 0,void 0,function*(){const r={to:this.address,ccipReadEnabled:!0,data:ce([e,$e(this.name),t||"0x"])};let n=!1;(yield this.supportsWildcard())&&(n=!0,r.data=ce(["0x9061b923",wn([Qr(this.name),r.data])]));try{let a=yield this.provider.call(r);return Ne(a).length%32===4&&I.throwError("resolver threw error",m.errors.CALL_EXCEPTION,{transaction:r,data:a}),n&&(a=Je(a,0)),a}catch(a){if(a.code===m.errors.CALL_EXCEPTION)return null;throw a}})}_fetchBytes(e,t){return A(this,void 0,void 0,function*(){const r=yield this._fetch(e,t);return r!=null?Je(r,0):null})}_getAddress(e,t){const r=Jo[String(e)];if(r==null&&I.throwError(`unsupported coin type: ${e}`,m.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),r.ilk==="eth")return this.provider.formatter.address(t);const n=Ne(t);if(r.p2pkh!=null){const a=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(a){const l=parseInt(a[1],16);if(a[2].length===l*2&&l>=1&&l<=75)return Ir(ge([[r.p2pkh],"0x"+a[2]]))}}if(r.p2sh!=null){const a=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(a){const l=parseInt(a[1],16);if(a[2].length===l*2&&l>=1&&l<=75)return Ir(ge([[r.p2sh],"0x"+a[2]]))}}if(r.prefix!=null){const a=n[1];let l=n[0];if(l===0?a!==20&&a!==32&&(l=-1):l=-1,l>=0&&n.length===2+a&&a>=1&&a<=75){const c=xr.toWords(n.slice(2));return c.unshift(l),xr.encode(r.prefix,c)}}return null}getAddress(e){return A(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const n=yield this._fetch("0x3b3b57de");return n==="0x"||n===zr?null:this.provider.formatter.callAddress(n)}catch(n){if(n.code===m.errors.CALL_EXCEPTION)return null;throw n}const t=yield this._fetchBytes("0xf1cb7e06",Ot(e));if(t==null||t==="0x")return null;const r=this._getAddress(e,t);return r==null&&I.throwError("invalid or unsupported coin data",m.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r})}getAvatar(){return A(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null)return null;for(let r=0;r<Pr.length;r++){const n=t.match(Pr[r]);if(n==null)continue;const a=n[1].toLowerCase();switch(a){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:Ut(t)};case"erc721":case"erc1155":{const l=a==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:a,content:t});const c=this._resolvedAddress||(yield this.getAddress()),f=(n[2]||"").split("/");if(f.length!==2)return null;const d=yield this.provider.formatter.address(f[0]),g=ye(R.from(f[1]).toHexString(),32);if(a==="erc721"){const k=this.provider.formatter.callAddress(yield this.provider.call({to:d,data:ce(["0x6352211e",g])}));if(c!==k)return null;e.push({type:"owner",content:k})}else if(a==="erc1155"){const k=R.from(yield this.provider.call({to:d,data:ce(["0x00fdd58e",ye(c,32),g])}));if(k.isZero())return null;e.push({type:"balance",content:k.toString()})}const w={to:this.provider.formatter.address(f[0]),data:ce([l,g])};let N=lt(yield this.provider.call(w),0);if(N==null)return null;e.push({type:"metadata-url-base",content:N}),a==="erc1155"&&(N=N.replace("{id}",g.substring(2)),e.push({type:"metadata-url-expanded",content:N})),N.match(/^ipfs:/i)&&(N=Ut(N)),e.push({type:"metadata-url",content:N});const b=yield Re(N);if(!b)return null;e.push({type:"metadata",content:JSON.stringify(b)});let T=b.image;if(typeof T!="string")return null;if(!T.match(/^(https:\/\/|data:)/i)){if(T.match(yn)==null)return null;e.push({type:"url-ipfs",content:T}),T=Ut(T)}return e.push({type:"url",content:T}),{linkage:e,url:T}}}}}catch{}return null})}getContentHash(){return A(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const l=parseInt(t[3],16);if(t[4].length===l*2)return"ipfs://"+ft.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const l=parseInt(r[3],16);if(r[4].length===l*2)return"ipns://"+ft.encode("0x"+r[1])}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===32*2)return"bzz://"+n[1];const a=e.match(/^0x90b2c605([0-9a-f]*)$/);if(a&&a[1].length===34*2){const l={"=":"","+":"-","/":"_"};return"sia://"+oi("0x"+a[1]).replace(/[=+\/]/g,f=>l[f])}return I.throwError("invalid or unsupported content hash data",m.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return A(this,void 0,void 0,function*(){let t=dt(e);t=ge([Ot(64),Ot(t.length),t]),t.length%32!==0&&(t=ge([t,ye("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",K(t));return r==null||r==="0x"?null:Zt(r)})}}let Lt=null,Vo=1;class _t extends bt{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),E(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=ee(new.target,"getNetwork")(e);t?(E(this,"_network",t),this.emit("network",t,null)):I.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return A(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||I.throwError("no network detected",m.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:E(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return me(()=>this._ready().then(e=>e,e=>{if(!(e.code===m.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return Lt==null&&(Lt=new _),Lt}static getNetwork(e){return Yt(e??"homestead")}ccipReadFetch(e,t,r){return A(this,void 0,void 0,function*(){if(this.disableCcipRead||r.length===0)return null;const n=e.to.toLowerCase(),a=t.toLowerCase(),l=[];for(let c=0;c<r.length;c++){const f=r[c],d=f.replace("{sender}",n).replace("{data}",a),g=f.indexOf("{data}")>=0?null:JSON.stringify({data:a,sender:n}),w=yield Re({url:d,errorPassThrough:!0},g,(b,T)=>(b.status=T.statusCode,b));if(w.data)return w.data;const N=w.message||"unknown error";if(w.status>=400&&w.status<500)return I.throwError(`response not found during CCIP fetch: ${N}`,m.errors.SERVER_ERROR,{url:f,errorMessage:N});l.push(N)}return I.throwError(`error encountered during CCIP fetch: ${l.map(c=>JSON.stringify(c)).join(", ")}`,m.errors.SERVER_ERROR,{urls:r,errorMessages:l})})}_getInternalBlockNumber(e){return A(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const n=this._internalBlockNumber;try{const a=yield n;if(Le()-a.respTime<=e)return a.blockNumber;break}catch{if(this._internalBlockNumber===n)break}}const t=Le(),r=H({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(n=>null,n=>n)}).then(({blockNumber:n,networkError:a})=>{if(a)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),a;const l=Le();return n=R.from(n).toNumber(),n<this._maxInternalBlockNumber&&(n=this._maxInternalBlockNumber),this._maxInternalBlockNumber=n,this._setFastBlockNumber(n),{blockNumber:n,reqTime:t,respTime:l}});return this._internalBlockNumber=r,r.catch(n=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)}),(yield r).blockNumber})}poll(){return A(this,void 0,void 0,function*(){const e=Vo++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(n){this.emit("error",n);return}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)I.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",I.makeError("network block skew detected",m.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let n=this._emitted.block+1;n<=r;n++)this.emit("block",n);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(n=>{if(n==="block")return;const a=this._emitted[n];a!=="pending"&&r-a>12&&delete this._emitted[n]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=r-1),this._events.forEach(n=>{switch(n.type){case"tx":{const a=n.hash;let l=this.getTransactionReceipt(a).then(c=>(!c||c.blockNumber==null||(this._emitted["t:"+a]=c.blockNumber,this.emit(a,c)),null)).catch(c=>{this.emit("error",c)});t.push(l);break}case"filter":{if(!n._inflight){n._inflight=!0,n._lastBlockNumber===-2&&(n._lastBlockNumber=r-1);const a=n.filter;a.fromBlock=n._lastBlockNumber+1,a.toBlock=r;const l=a.toBlock-this._maxFilterBlockRange;l>a.fromBlock&&(a.fromBlock=l),a.fromBlock<0&&(a.fromBlock=0);const c=this.getLogs(a).then(f=>{n._inflight=!1,f.length!==0&&f.forEach(d=>{d.blockNumber>n._lastBlockNumber&&(n._lastBlockNumber=d.blockNumber),this._emitted["b:"+d.blockHash]=d.blockNumber,this._emitted["t:"+d.transactionHash]=d.blockNumber,this.emit(a,d)})}).catch(f=>{this.emit("error",f),n._inflight=!1});t.push(c)}break}}}),this._lastBlockNumber=r,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(n=>{this.emit("error",n)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return A(this,void 0,void 0,function*(){return I.throwError("provider does not support network detection",m.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return A(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield Rr(0),this._network;const r=I.makeError("underlying network changed",m.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Le();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=Le(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return A(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,r||0,null)})}_waitForTransaction(e,t,r,n){return A(this,void 0,void 0,function*(){const a=yield this.getTransactionReceipt(e);return(a?a.confirmations:0)>=t?a:new Promise((l,c)=>{const f=[];let d=!1;const g=function(){return d?!0:(d=!0,f.forEach(N=>{N()}),!1)},w=N=>{N.confirmations<t||g()||l(N)};if(this.on(e,w),f.push(()=>{this.removeListener(e,w)}),n){let N=n.startBlock,b=null;const T=k=>A(this,void 0,void 0,function*(){d||(yield Rr(1e3),this.getTransactionCount(n.from).then(L=>A(this,void 0,void 0,function*(){if(!d){if(L<=n.nonce)N=k;else{{const x=yield this.getTransaction(e);if(x&&x.blockNumber!=null)return}for(b==null&&(b=N-3,b<n.startBlock&&(b=n.startBlock));b<=k;){if(d)return;const x=yield this.getBlockWithTransactions(b);for(let S=0;S<x.transactions.length;S++){const B=x.transactions[S];if(B.hash===e)return;if(B.from===n.from&&B.nonce===n.nonce){if(d)return;const X=yield this.waitForTransaction(B.hash,t);if(g())return;let P="replaced";B.data===n.data&&B.to===n.to&&B.value.eq(n.value)?P="repriced":B.data==="0x"&&B.from===B.to&&B.value.isZero()&&(P="cancelled"),c(I.makeError("transaction was replaced",m.errors.TRANSACTION_REPLACED,{cancelled:P==="replaced"||P==="cancelled",reason:P,replacement:this._wrapTransaction(B),hash:e,receipt:X}));return}}b++}}d||this.once("block",T)}}),L=>{d||this.once("block",T)}))});if(d)return;this.once("block",T),f.push(()=>{this.removeListener("block",T)})}if(typeof r=="number"&&r>0){const N=setTimeout(()=>{g()||c(I.makeError("timeout exceeded",m.errors.TIMEOUT,{timeout:r}))},r);N.unref&&N.unref(),f.push(()=>{clearTimeout(N)})}})})}getBlockNumber(){return A(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return A(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return R.from(e)}catch(t){return I.throwError("bad result from backend",m.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return A(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield H({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getBalance",r);try{return R.from(n)}catch(a){return I.throwError("bad result from backend",m.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:a})}})}getTransactionCount(e,t){return A(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield H({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getTransactionCount",r);try{return R.from(n).toNumber()}catch(a){return I.throwError("bad result from backend",m.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:a})}})}getCode(e,t){return A(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield H({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getCode",r);try{return K(n)}catch(a){return I.throwError("bad result from backend",m.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:a})}})}getStorageAt(e,t,r){return A(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield H({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(l=>Ke(l))}),a=yield this.perform("getStorageAt",n);try{return K(a)}catch(l){return I.throwError("bad result from backend",m.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:a,error:l})}})}_wrapTransaction(e,t,r){if(t!=null&&Ae(t)!==32)throw new Error("invalid response - sendTransaction");const n=e;return t!=null&&e.hash!==t&&I.throwError("Transaction hash mismatch from Provider.sendTransaction.",m.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),n.wait=(a,l)=>A(this,void 0,void 0,function*(){a==null&&(a=1),l==null&&(l=0);let c;a!==0&&r!=null&&(c={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const f=yield this._waitForTransaction(e.hash,a,l,c);return f==null&&a===0?null:(this._emitted["t:"+e.hash]=f.blockNumber,f.status===0&&I.throwError("transaction failed",m.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:f}),f)}),n}sendTransaction(e){return A(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(a=>K(a)),r=this.formatter.transaction(e);r.confirmations==null&&(r.confirmations=0);const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const a=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,a,n)}catch(a){throw a.transaction=r,a.transactionHash=r.hash,a}})}_getTransactionRequest(e){return A(this,void 0,void 0,function*(){const t=yield e,r={};return["from","to"].forEach(n=>{t[n]!=null&&(r[n]=Promise.resolve(t[n]).then(a=>a?this._getAddress(a):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(n=>{t[n]!=null&&(r[n]=Promise.resolve(t[n]).then(a=>a?R.from(a):null))}),["type"].forEach(n=>{t[n]!=null&&(r[n]=Promise.resolve(t[n]).then(a=>a??null))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(n=>{t[n]!=null&&(r[n]=Promise.resolve(t[n]).then(a=>a?K(a):null))}),this.formatter.transactionRequest(yield H(r))})}_getFilter(e){return A(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{e[r]!=null&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{e[r]!=null&&(t[r]=this._getBlockTag(e[r]))}),this.formatter.filter(yield H(t))})}_call(e,t,r){return A(this,void 0,void 0,function*(){r>=qo&&I.throwError("CCIP read exceeded maximum redirections",m.errors.SERVER_ERROR,{redirects:r,transaction:e});const n=e.to,a=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&t==="latest"&&n!=null&&a.substring(0,10)==="0x556f1830"&&Ae(a)%32===4)try{const l=Y(a,4),c=Y(l,0,32);R.from(c).eq(n)||I.throwError("CCIP Read sender did not match",m.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:a});const f=[],d=R.from(Y(l,32,64)).toNumber(),g=R.from(Y(l,d,d+32)).toNumber(),w=Y(l,d+32);for(let x=0;x<g;x++){const S=lt(w,x*32);S==null&&I.throwError("CCIP Read contained corrupt URL string",m.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:a}),f.push(S)}const N=Je(l,64);R.from(Y(l,100,128)).isZero()||I.throwError("CCIP Read callback selector included junk",m.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:a});const b=Y(l,96,100),T=Je(l,128),k=yield this.ccipReadFetch(e,N,f);k==null&&I.throwError("CCIP Read disabled or provided no URLs",m.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:a});const L={to:n,data:ce([b,wn([k,T])])};return this._call(L,t,r+1)}catch(l){if(l.code===m.errors.SERVER_ERROR)throw l}try{return K(a)}catch(l){return I.throwError("bad result from backend",m.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:a,error:l})}})}call(e,t){return A(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield H({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)})}estimateGas(e){return A(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield H({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return R.from(r)}catch(n){return I.throwError("bad result from backend",m.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:n})}})}_getAddress(e){return A(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&I.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&I.throwError("ENS name not configured",m.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return A(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128;const n={includeTransactions:!!t};if(j(e,32))n.blockHash=e;else try{n.blockTag=yield this._getBlockTag(e),j(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16))}catch{I.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return me(()=>A(this,void 0,void 0,function*(){const a=yield this.perform("getBlock",n);if(a==null)return n.blockHash!=null&&this._emitted["b:"+n.blockHash]==null||n.blockTag!=null&&r>this._emitted.block?null:void 0;if(t){let l=null;for(let f=0;f<a.transactions.length;f++){const d=a.transactions[f];if(d.blockNumber==null)d.confirmations=0;else if(d.confirmations==null){l==null&&(l=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let g=l-d.blockNumber+1;g<=0&&(g=1),d.confirmations=g}}const c=this.formatter.blockWithTransactions(a);return c.transactions=c.transactions.map(f=>this._wrapTransaction(f)),c}return this.formatter.block(a)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return A(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return me(()=>A(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;const n=this.formatter.transactionResponse(r);if(n.blockNumber==null)n.confirmations=0;else if(n.confirmations==null){let l=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;l<=0&&(l=1),n.confirmations=l}return this._wrapTransaction(n)}),{oncePoll:this})})}getTransactionReceipt(e){return A(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return me(()=>A(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;if(r.blockHash==null)return;const n=this.formatter.receipt(r);if(n.blockNumber==null)n.confirmations=0;else if(n.confirmations==null){let l=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;l<=0&&(l=1),n.confirmations=l}return n}),{oncePoll:this})})}getLogs(e){return A(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield H({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach(n=>{n.removed==null&&(n.removed=!1)}),_.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return A(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return A(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&I.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return A(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;const r=yield this._getResolver(t,"getResolver");if(r!=null){const n=new Jt(this,r,e);return t!==e&&!(yield n.supportsWildcard())?null:n}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return A(this,void 0,void 0,function*(){t==null&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||I.throwError("network does not support ENS",m.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const n=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+$e(e).substring(2)});return this.formatter.callAddress(n)}catch{}return null})}resolveName(e){return A(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(r){if(j(e))throw r}typeof e!="string"&&I.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return A(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(r==null)return null;const n=lt(yield this.call({to:r,data:"0x691f3431"+$e(t).substring(2)}),0);return(yield this.resolveName(n))!=e?null:n})}getAvatar(e){return A(this,void 0,void 0,function*(){let t=null;if(j(e)){const a=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",l=yield this._getResolver(a,"getAvatar");if(!l)return null;t=new Jt(this,l,a);try{const c=yield t.getAvatar();if(c)return c.url}catch(c){if(c.code!==m.errors.CALL_EXCEPTION)throw c}try{const c=lt(yield this.call({to:l,data:"0x691f3431"+$e(a).substring(2)}),0);t=yield this.getResolver(c)}catch(c){if(c.code!==m.errors.CALL_EXCEPTION)throw c;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return r==null?null:r.url})}perform(e,t){return I.throwError(e+" not implemented",m.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,r){const n=new Ho(Ee(e),t,r);return this._events.push(n),this._startEvent(n),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,n=[],a=Ee(e);return this._events=this._events.filter(l=>l.tag!==a?!0:(setTimeout(()=>{l.listener.apply(this,t)},0),r=!0,l.once?(n.push(l),!1):!0)),n.forEach(l=>{this._stopEvent(l)}),r}listenerCount(e){if(!e)return this._events.length;let t=Ee(e);return this._events.filter(r=>r.tag===t).length}listeners(e){if(e==null)return this._events.map(r=>r.listener);let t=Ee(e);return this._events.filter(r=>r.tag===t).map(r=>r.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const r=[];let n=!1,a=Ee(e);return this._events=this._events.filter(l=>l.tag!==a||l.listener!=t||n?!0:(n=!0,r.push(l),!1)),r.forEach(l=>{this._stopEvent(l)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const r=Ee(e);this._events=this._events.filter(n=>n.tag!==r?!0:(t.push(n),!1))}return t.forEach(r=>{this._stopEvent(r)}),this}}var se=globalThis&&globalThis.__awaiter||function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{d(r.next(g))}catch(w){l(w)}}function f(g){try{d(r.throw(g))}catch(w){l(w)}}function d(g){g.done?a(g.value):n(g.value).then(c,f)}d((r=r.apply(i,e||[])).next())})};const M=new m(J),Ko=["call","estimateGas"];function We(i,e){if(i==null)return null;if(typeof i.message=="string"&&i.message.match("reverted")){const t=j(i.data)?i.data:null;if(!e||t)return{message:i.message,data:t}}if(typeof i=="object"){for(const t in i){const r=We(i[t],e);if(r)return r}return null}if(typeof i=="string")try{return We(JSON.parse(i),e)}catch{}return null}function bn(i,e,t){const r=t.transaction||t.signedTransaction;if(i==="call"){const a=We(e,!0);if(a)return a.data;M.throwError("missing revert data in call exception; Transaction reverted without a reason string",m.errors.CALL_EXCEPTION,{data:"0x",transaction:r,error:e})}if(i==="estimateGas"){let a=We(e.body,!1);a==null&&(a=We(e,!1)),a&&M.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",m.errors.UNPREDICTABLE_GAS_LIMIT,{reason:a.message,method:i,transaction:r,error:e})}let n=e.message;throw e.code===m.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?n=e.error.message:typeof e.body=="string"?n=e.body:typeof e.responseText=="string"&&(n=e.responseText),n=(n||"").toLowerCase(),n.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&M.throwError("insufficient funds for intrinsic transaction cost",m.errors.INSUFFICIENT_FUNDS,{error:e,method:i,transaction:r}),n.match(/nonce (is )?too low/i)&&M.throwError("nonce has already been used",m.errors.NONCE_EXPIRED,{error:e,method:i,transaction:r}),n.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&M.throwError("replacement fee too low",m.errors.REPLACEMENT_UNDERPRICED,{error:e,method:i,transaction:r}),n.match(/only replay-protected/i)&&M.throwError("legacy pre-eip-155 transactions not supported",m.errors.UNSUPPORTED_OPERATION,{error:e,method:i,transaction:r}),Ko.indexOf(i)>=0&&n.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&M.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",m.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:i,transaction:r}),e}function Cr(i){return new Promise(function(e){setTimeout(e,i)})}function Xo(i){if(i.error){const e=new Error(i.error.message);throw e.code=i.error.code,e.data=i.error.data,e}return i.result}function Fe(i){return i&&i.toLowerCase()}const zt={};class er extends ze{constructor(e,t,r){if(super(),e!==zt)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");E(this,"provider",t),r==null&&(r=0),typeof r=="string"?(E(this,"_address",this.provider.formatter.address(r)),E(this,"_index",null)):typeof r=="number"?(E(this,"_index",r),E(this,"_address",null)):M.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return M.throwError("cannot alter JSON-RPC Signer connection",m.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new Zo(zt,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&M.throwError("unknown account #"+this._index,m.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=$(e);const t=this.getAddress().then(r=>(r&&(r=r.toLowerCase()),r));if(e.gasLimit==null){const r=$(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(r=>se(this,void 0,void 0,function*(){if(r==null)return null;const n=yield this.provider.resolveName(r);return n==null&&M.throwArgumentError("provided ENS name resolves to null","tx.to",r),n}))),H({tx:H(e),sender:t}).then(({tx:r,sender:n})=>{r.from!=null?r.from.toLowerCase()!==n&&M.throwArgumentError("from address mismatch","transaction",e):r.from=n;const a=this.provider.constructor.hexlifyTransaction(r,{from:!0});return this.provider.send("eth_sendTransaction",[a]).then(l=>l,l=>(typeof l.message=="string"&&l.message.match(/user denied/i)&&M.throwError("user rejected transaction",m.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:r}),bn("sendTransaction",l,a)))})}signTransaction(e){return M.throwError("signing transactions is unsupported",m.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return se(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield me(()=>se(this,void 0,void 0,function*(){const n=yield this.provider.getTransaction(r);if(n!==null)return this.provider._wrapTransaction(n,r,t)}),{oncePoll:this.provider})}catch(n){throw n.transactionHash=r,n}})}signMessage(e){return se(this,void 0,void 0,function*(){const t=typeof e=="string"?dt(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[K(t),r.toLowerCase()])}catch(n){throw typeof n.message=="string"&&n.message.match(/user denied/i)&&M.throwError("user rejected signing",m.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),n}})}_legacySignMessage(e){return se(this,void 0,void 0,function*(){const t=typeof e=="string"?dt(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),K(t)])}catch(n){throw typeof n.message=="string"&&n.message.match(/user denied/i)&&M.throwError("user rejected signing",m.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),n}})}_signTypedData(e,t,r){return se(this,void 0,void 0,function*(){const n=yield Wt.resolveNames(e,t,r,l=>this.provider.resolveName(l)),a=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[a.toLowerCase(),JSON.stringify(Wt.getPayload(n.domain,t,n.value))])}catch(l){throw typeof l.message=="string"&&l.message.match(/user denied/i)&&M.throwError("user rejected signing",m.errors.ACTION_REJECTED,{action:"_signTypedData",from:a,messageData:{domain:n.domain,types:t,value:n.value}}),l}})}unlock(e){return se(this,void 0,void 0,function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class Zo extends er{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:r=>this.provider.waitForTransaction(t,r)}))}}const Qo={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class we extends _t{constructor(e,t){let r=t;r==null&&(r=new Promise((n,a)=>{setTimeout(()=>{this.detectNetwork().then(l=>{n(l)},l=>{a(l)})},0)})),super(r),e||(e=ee(this.constructor,"defaultUrl")()),typeof e=="string"?E(this,"connection",Object.freeze({url:e})):E(this,"connection",Object.freeze($(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return se(this,void 0,void 0,function*(){yield Cr(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=ee(this.constructor,"getNetwork");try{return t(R.from(e).toNumber())}catch(r){return M.throwError("could not detect network",m.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:r})}}return M.throwError("could not detect network",m.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new er(zt,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:re(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(n&&this._cache[e])return this._cache[e];const a=Re(this.connection,JSON.stringify(r),Xo).then(l=>(this.emit("debug",{action:"response",request:r,response:l,provider:this}),l),l=>{throw this.emit("debug",{action:"response",error:l,request:r,provider:this}),l});return n&&(this._cache[e]=a,setTimeout(()=>{this._cache[e]=null},0)),a}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Fe(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Fe(t.address),t.blockTag]];case"getCode":return["eth_getCode",[Fe(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Fe(t.address),ye(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[ee(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[ee(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=Fe(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return se(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const n=t.transaction;if(n&&n.type!=null&&R.from(n.type).isZero()&&n.maxFeePerGas==null&&n.maxPriorityFeePerGas==null){const a=yield this.getFeeData();a.maxFeePerGas==null&&a.maxPriorityFeePerGas==null&&(t=$(t),t.transaction=$(n),delete t.transaction.type)}}const r=this.prepareRequest(e,t);r==null&&M.throwError(e+" not implemented",m.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(n){return bn(e,n,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){function n(){e.send("eth_getFilterChanges",[r]).then(function(a){if(e._pendingFilter!=t)return null;let l=Promise.resolve();return a.forEach(function(c){e._emitted["t:"+c.toLowerCase()]="pending",l=l.then(function(){return e.getTransaction(c).then(function(f){return e.emit("pending",f),null})})}),l.then(function(){return Cr(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[r]);return}return setTimeout(function(){n()},0),null}).catch(a=>{})}return n(),r}).catch(r=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=$(Qo);if(t)for(const a in t)t[a]&&(r[a]=!0);Yr(e,r);const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(a){if(e[a]==null)return;const l=Ke(R.from(e[a]));a==="gasLimit"&&(a="gas"),n[a]=l}),["from","to","data"].forEach(function(a){e[a]!=null&&(n[a]=K(e[a]))}),e.accessList&&(n.accessList=Ve(e.accessList)),n}}let Ge=null;try{if(Ge=WebSocket,Ge==null)throw new Error("inject please")}catch{const e=new m(J);Ge=function(){e.throwError("WebSockets not supported in this environment",m.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var Ft=globalThis&&globalThis.__awaiter||function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{d(r.next(g))}catch(w){l(w)}}function f(g){try{d(r.throw(g))}catch(w){l(w)}}function d(g){g.done?a(g.value):n(g.value).then(c,f)}d((r=r.apply(i,e||[])).next())})};const nt=new m(J);let Yo=1;class xt extends we{constructor(e,t){t==="any"&&nt.throwError("WebSocketProvider does not support 'any' network yet",m.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof e=="string"?super(e,t):super("_websocket",t),this._pollingInterval=-1,this._wsReady=!1,typeof e=="string"?E(this,"_websocket",new Ge(this.connection.url)):E(this,"_websocket",e),E(this,"_requests",{}),E(this,"_subs",{}),E(this,"_subIds",{}),E(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(n=>{this.websocket.send(this._requests[n].payload)})},this.websocket.onmessage=n=>{const a=n.data,l=JSON.parse(a);if(l.id!=null){const c=String(l.id),f=this._requests[c];if(delete this._requests[c],l.result!==void 0)f.callback(null,l.result),this.emit("debug",{action:"response",request:JSON.parse(f.payload),response:l.result,provider:this});else{let d=null;l.error?(d=new Error(l.error.message||"unknown error"),E(d,"code",l.error.code||null),E(d,"response",a)):d=new Error("unknown error"),f.callback(d,void 0),this.emit("debug",{action:"response",error:d,request:JSON.parse(f.payload),provider:this})}}else if(l.method==="eth_subscription"){const c=this._subs[l.params.subscription];c&&c.processFunc(l.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){nt.throwError("cannot reset events block on WebSocketProvider",m.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){nt.throwError("cannot set polling interval on WebSocketProvider",m.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return Ft(this,void 0,void 0,function*(){return null})}set polling(e){e&&nt.throwError("cannot set polling on WebSocketProvider",m.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const r=Yo++;return new Promise((n,a)=>{function l(f,d){return f?a(f):n(d)}const c=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(c),provider:this}),this._requests[String(r)]={callback:l,payload:c},this._wsReady&&this.websocket.send(c)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return Ft(this,void 0,void 0,function*(){let n=this._subIds[e];n==null&&(n=Promise.all(t).then(l=>this.send("eth_subscribe",l)),this._subIds[e]=n);const a=yield n;this._subs[a]={tag:e,processFunc:r}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],t=>{const r=R.from(t.number).toNumber();this._emitted.block=r,this.emit("block",r)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],t=>{this.emit("pending",t)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],t=>{t.removed==null&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))});break;case"tx":{const t=r=>{const n=r.hash;this.getTransactionReceipt(n).then(a=>{a&&this.emit(n,a)})};t(e),this._subscribe("tx",["newHeads"],r=>{this._events.filter(n=>n.type==="tx").forEach(t)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let t=e.tag;if(e.type==="tx"){if(this._events.filter(n=>n.type==="tx").length)return;t="tx"}else if(this.listenerCount(e.event))return;const r=this._subIds[t];r&&(delete this._subIds[t],r.then(n=>{this._subs[n]&&(delete this._subs[n],this.send("eth_unsubscribe",[n]))}))}destroy(){return Ft(this,void 0,void 0,function*(){this.websocket.readyState===Ge.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var es=globalThis&&globalThis.__awaiter||function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{d(r.next(g))}catch(w){l(w)}}function f(g){try{d(r.throw(g))}catch(w){l(w)}}function d(g){g.done?a(g.value):n(g.value).then(c,f)}d((r=r.apply(i,e||[])).next())})};const je=new m(J);class vn extends we{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return es(this,void 0,void 0,function*(){let t=this.network;return t==null&&(t=yield e.detectNetwork.call(this),t||je.throwError("no network detected",m.errors.UNKNOWN_ERROR,{}),this._network==null&&(E(this,"_network",t),this.emit("network",t,null))),t})}}class le extends vn{constructor(e,t){je.checkAbstract(new.target,le),e=ee(new.target,"getNetwork")(e),t=ee(new.target,"getApiKey")(t);const r=ee(new.target,"getUrl")(e,t);super(r,e),typeof t=="string"?E(this,"apiKey",t):t!=null&&Object.keys(t).forEach(n=>{E(this,n,t[n])})}_startPending(){je.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return je.throwError("API provider does not support signing",m.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return je.throwError("not implemented; sub-classes must override getUrl",m.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const Sr=new m(J),ct="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class En extends xt{constructor(e,t){const r=new tr(e,t),n=r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(n,r.network),E(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===ct}}class tr extends le{static getWebSocketProvider(e,t){return new En(e,t)}static getApiKey(e){return e==null?ct:(e&&typeof e!="string"&&Sr.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;default:Sr.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+t,throttleCallback:(n,a)=>(t===ct&&Xe(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===ct}}const ts=new m(J),it="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function rs(i){switch(i){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return ts.throwArgumentError("unsupported network","name",i)}class kn extends le{isCommunityResource(){return this.apiKey===it}static getApiKey(e){return e??it}static getUrl(e,t){t==null&&(t=it);const r={allowGzip:!0,url:"https://"+rs(e.name)+t,throttleCallback:(n,a)=>(t.apiKey===it&&Xe(),Promise.resolve(!0))};return t.projectSecret!=null&&(r.user="",r.password=t.projectSecret),r}}var ns=globalThis&&globalThis.__awaiter||function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{d(r.next(g))}catch(w){l(w)}}function f(g){try{d(r.throw(g))}catch(w){l(w)}}function d(g){g.done?a(g.value):n(g.value).then(c,f)}d((r=r.apply(i,e||[])).next())})};const Or=new m(J);class _n extends le{static getApiKey(e){return e!=null&&Or.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="https://cloudflare-eth.com/";break;default:Or.throwArgumentError("unsupported network","network",arguments[0])}return r}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return ns(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,e,t)})}}var ot=globalThis&&globalThis.__awaiter||function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{d(r.next(g))}catch(w){l(w)}}function f(g){try{d(r.throw(g))}catch(w){l(w)}}function d(g){g.done?a(g.value):n(g.value).then(c,f)}d((r=r.apply(i,e||[])).next())})};const ue=new m(J);function Ur(i){const e={};for(let t in i){if(i[t]==null)continue;let r=i[t];t==="type"&&r===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[t]?r=Ke(K(r)):t==="accessList"?r="["+Ve(r).map(n=>`{address:"${n.address}",storageKeys:["${n.storageKeys.join('","')}"]}`).join(",")+"]":r=K(r),e[t]=r)}return e}function is(i){if(i.status==0&&(i.message==="No records found"||i.message==="No transactions found"))return i.result;if(i.status!=1||typeof i.message!="string"||!i.message.match(/^OK/)){const e=new Error("invalid response");throw e.result=JSON.stringify(i),(i.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return i.result}function Lr(i){if(i&&i.status==0&&i.message=="NOTOK"&&(i.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(i),e.throttleRetry=!0,e}if(i.jsonrpc!="2.0"){const e=new Error("invalid response");throw e.result=JSON.stringify(i),e}if(i.error){const e=new Error(i.error.message||"unknown error");throw i.error.code&&(e.code=i.error.code),i.error.data&&(e.data=i.error.data),e}return i.result}function Fr(i){if(i==="pending")throw new Error("pending not supported");return i==="latest"?i:parseInt(i.substring(2),16)}function Dt(i,e,t){if(i==="call"&&e.code===m.errors.SERVER_ERROR){const n=e.error;if(n&&(n.message.match(/reverted/i)||n.message.match(/VM execution error/i))){let a=n.data;if(a&&(a="0x"+a.replace(/^.*0x/i,"")),j(a))return a;ue.throwError("missing revert data in call exception",m.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let r=e.message;throw e.code===m.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?r=e.error.message:typeof e.body=="string"?r=e.body:typeof e.responseText=="string"&&(r=e.responseText)),r=(r||"").toLowerCase(),r.match(/insufficient funds/)&&ue.throwError("insufficient funds for intrinsic transaction cost",m.errors.INSUFFICIENT_FUNDS,{error:e,method:i,transaction:t}),r.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&ue.throwError("nonce has already been used",m.errors.NONCE_EXPIRED,{error:e,method:i,transaction:t}),r.match(/another transaction with same nonce/)&&ue.throwError("replacement fee too low",m.errors.REPLACEMENT_UNDERPRICED,{error:e,method:i,transaction:t}),r.match(/execution failed due to an exception|execution reverted/)&&ue.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",m.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:i,transaction:t}),e}class xn extends _t{constructor(e,t){super(e),E(this,"baseUrl",this.getBaseUrl()),E(this,"apiKey",t||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return ue.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,t){const r=Object.keys(t).reduce((a,l)=>{const c=t[l];return c!=null&&(a+=`&${l}=${c}`),a},""),n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${n}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,r){return ot(this,void 0,void 0,function*(){const n=r?this.getPostUrl():this.getUrl(e,t),a=r?this.getPostData(e,t):null,l=e==="proxy"?Lr:is;this.emit("debug",{action:"request",request:n,provider:this});const c={url:n,throttleSlotInterval:1e3,throttleCallback:(g,w)=>(this.isCommunityResource()&&Xe(),Promise.resolve(!0))};let f=null;a&&(c.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},f=Object.keys(a).map(g=>`${g}=${a[g]}`).join("&"));const d=yield Re(c,f,l||Lr);return this.emit("debug",{action:"response",request:n,response:re(d),provider:this}),d})}detectNetwork(){return ot(this,void 0,void 0,function*(){return this.network})}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return ot(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch(n=>Dt("sendTransaction",n,t.signedTransaction));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if(t.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const n=Ur(t.transaction);n.module="proxy",n.action="eth_call";try{return yield this.fetch("proxy",n,!0)}catch(a){return Dt("call",a,t.transaction)}}case"estimateGas":{const n=Ur(t.transaction);n.module="proxy",n.action="eth_estimateGas";try{return yield this.fetch("proxy",n,!0)}catch(a){return Dt("estimateGas",a,t.transaction)}}case"getLogs":{const n={action:"getLogs"};if(t.filter.fromBlock&&(n.fromBlock=Fr(t.filter.fromBlock)),t.filter.toBlock&&(n.toBlock=Fr(t.filter.toBlock)),t.filter.address&&(n.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&ue.throwError("unsupported topic count",m.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),t.filter.topics.length===1)){const c=t.filter.topics[0];(typeof c!="string"||c.length!==66)&&ue.throwError("unsupported topic format",m.errors.UNSUPPORTED_OPERATION,{topic0:c}),n.topic0=c}const a=yield this.fetch("logs",n);let l={};for(let c=0;c<a.length;c++){const f=a[c];if(f.blockHash==null){if(l[f.blockNumber]==null){const d=yield this.getBlock(f.blockNumber);d&&(l[f.blockNumber]=d.hash)}f.blockHash=l[f.blockNumber]}}return a}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,t)})}getHistory(e,t,r){return ot(this,void 0,void 0,function*(){const n={action:"txlist",address:yield this.resolveName(e),startblock:t??0,endblock:r??99999999,sort:"asc"};return(yield this.fetch("account",n)).map(l=>{["contractAddress","to"].forEach(function(f){l[f]==""&&delete l[f]}),l.creates==null&&l.contractAddress!=null&&(l.creates=l.contractAddress);const c=this.formatter.transactionResponse(l);return l.timeStamp&&(c.timestamp=parseInt(l.timeStamp)),c})})}isCommunityResource(){return this.apiKey==null}}var wt=globalThis&&globalThis.__awaiter||function(i,e,t,r){function n(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(g){try{d(r.next(g))}catch(w){l(w)}}function f(g){try{d(r.throw(g))}catch(w){l(w)}}function d(g){g.done?a(g.value):n(g.value).then(c,f)}d((r=r.apply(i,e||[])).next())})};const pe=new m(J);function st(){return new Date().getTime()}function Dr(i){let e=null;for(let t=0;t<i.length;t++){const r=i[t];if(r==null)return null;e?e.name===r.name&&e.chainId===r.chainId&&(e.ensAddress===r.ensAddress||e.ensAddress==null&&r.ensAddress==null)||pe.throwArgumentError("provider mismatch","networks",i):e=r}return e}function jr(i,e){i=i.slice().sort();const t=Math.floor(i.length/2);if(i.length%2)return i[t];const r=i[t-1],n=i[t];return e!=null&&Math.abs(r-n)>e?null:(r+n)/2}function _e(i){if(i===null)return"null";if(typeof i=="number"||typeof i=="boolean")return JSON.stringify(i);if(typeof i=="string")return i;if(R.isBigNumber(i))return i.toString();if(Array.isArray(i))return JSON.stringify(i.map(e=>_e(e)));if(typeof i=="object"){const e=Object.keys(i);return e.sort(),"{"+e.map(t=>{let r=i[t];return typeof r=="function"?r="[function]":r=_e(r),JSON.stringify(t)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof i)}let os=1;function Mr(i){let e=null,t=null,r=new Promise(l=>{e=function(){t&&(clearTimeout(t),t=null),l()},t=setTimeout(e,i)});const n=l=>(r=r.then(l),r);function a(){return r}return{cancel:e,getPromise:a,wait:n}}const ss=[m.errors.CALL_EXCEPTION,m.errors.INSUFFICIENT_FUNDS,m.errors.NONCE_EXPIRED,m.errors.REPLACEMENT_UNDERPRICED,m.errors.UNPREDICTABLE_GAS_LIMIT],as=["address","args","errorArgs","errorSignature","method","transaction"];function at(i,e){const t={weight:i.weight};return Object.defineProperty(t,"provider",{get:()=>i.provider}),i.start&&(t.start=i.start),e&&(t.duration=e-i.start),i.done&&(i.error?t.error=i.error:t.result=i.result||null),t}function ls(i,e){return function(t){const r={};t.forEach(a=>{const l=i(a.result);r[l]||(r[l]={count:0,result:a.result}),r[l].count++});const n=Object.keys(r);for(let a=0;a<n.length;a++){const l=r[n[a]];if(l.count>=e)return l.result}}}function cs(i,e,t){let r=_e;switch(e){case"getBlockNumber":return function(n){const a=n.map(c=>c.result);let l=jr(n.map(c=>c.result),2);if(l!=null)return l=Math.ceil(l),a.indexOf(l+1)>=0&&l++,l>=i._highestBlockNumber&&(i._highestBlockNumber=l),i._highestBlockNumber};case"getGasPrice":return function(n){const a=n.map(l=>l.result);return a.sort(),a[Math.floor(a.length/2)]};case"getEtherPrice":return function(n){return jr(n.map(a=>a.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":r=function(n){return n==null?null:(n=$(n),n.confirmations=-1,_e(n))};break;case"getBlock":t.includeTransactions?r=function(n){return n==null?null:(n=$(n),n.transactions=n.transactions.map(a=>(a=$(a),a.confirmations=-1,a)),_e(n))}:r=function(n){return n==null?null:_e(n)};break;default:throw new Error("unknown method: "+e)}return ls(r,i.quorum)}function De(i,e){return wt(this,void 0,void 0,function*(){const t=i.provider;return t.blockNumber!=null&&t.blockNumber>=e||e===-1?t:me(()=>new Promise((r,n)=>{setTimeout(function(){return t.blockNumber>=e?r(t):i.cancelled?r(null):r(void 0)},0)}),{oncePoll:t})})}function us(i,e,t,r){return wt(this,void 0,void 0,function*(){let n=i.provider;switch(t){case"getBlockNumber":case"getGasPrice":return n[t]();case"getEtherPrice":if(n.getEtherPrice)return n.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return r.blockTag&&j(r.blockTag)&&(n=yield De(i,e)),n[t](r.address,r.blockTag||"latest");case"getStorageAt":return r.blockTag&&j(r.blockTag)&&(n=yield De(i,e)),n.getStorageAt(r.address,r.position,r.blockTag||"latest");case"getBlock":return r.blockTag&&j(r.blockTag)&&(n=yield De(i,e)),n[r.includeTransactions?"getBlockWithTransactions":"getBlock"](r.blockTag||r.blockHash);case"call":case"estimateGas":return r.blockTag&&j(r.blockTag)&&(n=yield De(i,e)),t==="call"&&r.blockTag?n[t](r.transaction,r.blockTag):n[t](r.transaction);case"getTransaction":case"getTransactionReceipt":return n[t](r.transactionHash);case"getLogs":{let a=r.filter;return(a.fromBlock&&j(a.fromBlock)||a.toBlock&&j(a.toBlock))&&(n=yield De(i,e)),n.getLogs(a)}}return pe.throwError("unknown method error",m.errors.UNKNOWN_ERROR,{method:t,params:r})})}class Tn extends _t{constructor(e,t){e.length===0&&pe.throwArgumentError("missing providers","providers",e);const r=e.map((l,c)=>{if(bt.isProvider(l)){const g=Ht(l)?2e3:750;return Object.freeze({provider:l,weight:1,stallTimeout:g,priority:1})}const f=$(l);f.priority==null&&(f.priority=1),f.stallTimeout==null&&(f.stallTimeout=Ht(l)?2e3:750),f.weight==null&&(f.weight=1);const d=f.weight;return(d%1||d>512||d<1)&&pe.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${c}].weight`,d),Object.freeze(f)}),n=r.reduce((l,c)=>l+c.weight,0);t==null?t=n/2:t>n&&pe.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let a=Dr(r.map(l=>l.provider.network));a==null&&(a=new Promise((l,c)=>{setTimeout(()=>{this.detectNetwork().then(l,c)},0)})),super(a),E(this,"providerConfigs",Object.freeze(r)),E(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return wt(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(t=>t.provider.getNetwork()));return Dr(e)})}perform(e,t){return wt(this,void 0,void 0,function*(){if(e==="sendTransaction"){const f=yield Promise.all(this.providerConfigs.map(d=>d.provider.sendTransaction(t.signedTransaction).then(g=>g.hash,g=>g)));for(let d=0;d<f.length;d++){const g=f[d];if(typeof g=="string")return g}throw f[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());const r=cs(this,e,t),n=en(this.providerConfigs.map($));n.sort((f,d)=>f.priority-d.priority);const a=this._highestBlockNumber;let l=0,c=!0;for(;;){const f=st();let d=n.filter(b=>b.runner&&f-b.start<b.stallTimeout).reduce((b,T)=>b+T.weight,0);for(;d<this.quorum&&l<n.length;){const b=n[l++],T=os++;b.start=st(),b.staller=Mr(b.stallTimeout),b.staller.wait(()=>{b.staller=null}),b.runner=us(b,a,e,t).then(k=>{b.done=!0,b.result=k,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:T,backend:at(b,st()),request:{method:e,params:re(t)},provider:this})},k=>{b.done=!0,b.error=k,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:T,backend:at(b,st()),request:{method:e,params:re(t)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:T,backend:at(b,null),request:{method:e,params:re(t)},provider:this}),d+=b.weight}const g=[];n.forEach(b=>{b.done||!b.runner||(g.push(b.runner),b.staller&&g.push(b.staller.getPromise()))}),g.length&&(yield Promise.race(g));const w=n.filter(b=>b.done&&b.error==null);if(w.length>=this.quorum){const b=r(w);if(b!==void 0)return n.forEach(T=>{T.staller&&T.staller.cancel(),T.cancelled=!0}),b;c||(yield Mr(100).getPromise()),c=!1}const N=n.reduce((b,T)=>{if(!T.done||T.error==null)return b;const k=T.error.code;return ss.indexOf(k)>=0&&(b[k]||(b[k]={error:T.error,weight:0}),b[k].weight+=T.weight),b},{});if(Object.keys(N).forEach(b=>{const T=N[b];if(T.weight<this.quorum)return;n.forEach(x=>{x.staller&&x.staller.cancel(),x.cancelled=!0});const k=T.error,L={};as.forEach(x=>{k[x]!=null&&(L[x]=k[x])}),pe.throwError(k.reason||k.message,b,L)}),n.filter(b=>!b.done).length===0)break}return n.forEach(f=>{f.staller&&f.staller.cancel(),f.cancelled=!0}),pe.throwError("failed to meet quorum",m.errors.SERVER_ERROR,{method:e,params:t,results:n.map(f=>at(f)),provider:this})})}}const Nn=null,ut=new m(J),Me="84842078b09946638c03157f83405213";class An extends xt{constructor(e,t){const r=new rr(e,t),n=r.connection;n.password&&ut.throwError("INFURA WebSocket project secrets unsupported",m.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const a=n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(a,e),E(this,"apiKey",r.projectId),E(this,"projectId",r.projectId),E(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===Me}}class rr extends le{static getWebSocketProvider(e,t){return new An(e,t)}static getApiKey(e){const t={apiKey:Me,projectId:Me,projectSecret:null};return e==null||(typeof e=="string"?t.projectId=e:e.projectSecret!=null?(ut.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),ut.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;default:ut.throwError("unsupported network",m.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n={allowGzip:!0,url:"https://"+r+"/v3/"+t.projectId,throttleCallback:(a,l)=>(t.projectId===Me&&Xe(),Promise.resolve(!0))};return t.projectSecret!=null&&(n.user="",n.password=t.projectSecret),n}isCommunityResource(){return this.projectId===Me}}class hs extends we{send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);const n={request:r,resolve:null,reject:null},a=new Promise((l,c)=>{n.resolve=l,n.reject=c});return this._pendingBatch.push(n),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const l=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const c=l.map(f=>f.request);return this.emit("debug",{action:"requestBatch",request:re(c),provider:this}),Re(this.connection,JSON.stringify(c)).then(f=>{this.emit("debug",{action:"response",request:c,response:f,provider:this}),l.forEach((d,g)=>{const w=f[g];if(w.error){const N=new Error(w.error.message);N.code=w.error.code,N.data=w.error.data,d.reject(N)}else d.resolve(w.result)})},f=>{this.emit("debug",{action:"response",error:f,request:c,provider:this}),l.forEach(d=>{d.reject(f)})})},10)),a}}const jt=new m(J),fs="ETHERS_JS_SHARED";class Rn extends le{static getApiKey(e){return e&&typeof e!="string"&&jt.throwArgumentError("invalid apiKey","apiKey",e),e||fs}static getUrl(e,t){jt.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:jt.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}}const $r=new m(J),qr="62e1ad51b37b8e00394bda3b";class In extends le{static getApiKey(e){const t={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return e==null?t.applicationId=qr:typeof e=="string"?t.applicationId=e:e.applicationSecretKey!=null?(t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey):e.applicationId?t.applicationId=e.applicationId:$r.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:$r.throwError("unsupported network",m.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n=`https://${r}/v1/lb/${t.applicationId}`,a={headers:{},url:n};return t.applicationSecretKey!=null&&(a.user="",a.password=t.applicationSecretKey),a}isCommunityResource(){return this.applicationId===qr}}const Wr=new m(J);let ds=1;function Gr(i,e){const t="Web3LegacyFetcher";return function(r,n){const a={method:r,params:n,id:ds++,jsonrpc:"2.0"};return new Promise((l,c)=>{this.emit("debug",{action:"request",fetcher:t,request:re(a),provider:this}),e(a,(f,d)=>{if(f)return this.emit("debug",{action:"response",fetcher:t,error:f,request:a,provider:this}),c(f);if(this.emit("debug",{action:"response",fetcher:t,request:a,response:d,provider:this}),d.error){const g=new Error(d.error.message);return g.code=d.error.code,g.data=d.error.data,c(g)}l(d.result)})})}}function ps(i){return function(e,t){t==null&&(t=[]);const r={method:e,params:t};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:re(r),provider:this}),i.request(r).then(n=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,response:n,provider:this}),n),n=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,error:n,provider:this}),n})}}class Pn extends we{constructor(e,t){e==null&&Wr.throwArgumentError("missing provider","provider",e);let r=null,n=null,a=null;typeof e=="function"?(r="unknown:",n=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),a=e,e.request?(r===""&&(r="eip-1193:"),n=ps(e)):e.sendAsync?n=Gr(e,e.sendAsync.bind(e)):e.send?n=Gr(e,e.send.bind(e)):Wr.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),E(this,"jsonRpcFetchFunc",n),E(this,"provider",a)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const Hr=new m(J);function nr(i,e){if(i==null&&(i="homestead"),typeof i=="string"){const r=i.match(/^(ws|http)s?:/i);if(r)switch(r[1].toLowerCase()){case"http":case"https":return new we(i);case"ws":case"wss":return new xt(i);default:Hr.throwArgumentError("unsupported URL scheme","network",i)}}const t=Yt(i);return(!t||!t._defaultProvider)&&Hr.throwError("unsupported getDefaultProvider network",m.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:i}),t._defaultProvider({FallbackProvider:Tn,AlchemyProvider:tr,AnkrProvider:kn,CloudflareProvider:_n,EtherscanProvider:xn,InfuraProvider:rr,JsonRpcProvider:we,NodesmithProvider:Rn,PocketProvider:In,Web3Provider:Pn,IpcProvider:Nn},e)}const Bn=Object.freeze(Object.defineProperty({__proto__:null,Provider:bt,BaseProvider:_t,Resolver:Jt,UrlJsonRpcProvider:le,FallbackProvider:Tn,AlchemyProvider:tr,AlchemyWebSocketProvider:En,AnkrProvider:kn,CloudflareProvider:_n,EtherscanProvider:xn,InfuraProvider:rr,InfuraWebSocketProvider:An,JsonRpcProvider:we,JsonRpcBatchProvider:hs,NodesmithProvider:Rn,PocketProvider:In,StaticJsonRpcProvider:vn,Web3Provider:Pn,WebSocketProvider:xt,IpcProvider:Nn,JsonRpcSigner:er,getDefaultProvider:nr,getNetwork:Yt,isCommunityResource:Ht,isCommunityResourcable:mn,showThrottleMessage:Xe,Formatter:_},Symbol.toStringTag,{value:"Module"})),Cn=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:ai,defaultAbiCoder:li,Fragment:ci,ConstructorFragment:ui,ErrorFragment:hi,EventFragment:fi,FunctionFragment:di,ParamType:pi,FormatTypes:gi,checkResultErrors:Xr,Logger:m,RLP:mi,_fetchData:yi,fetchJson:Re,poll:me,checkProperties:Yr,deepCopy:re,defineReadOnly:E,getStatic:ee,resolveProperties:H,shallowCopy:$,arrayify:Ne,concat:ge,stripZeros:wi,zeroPad:bi,isBytes:Kr,isBytesLike:vi,defaultPath:Ei,HDNode:ki,SigningKey:_i,Interface:$t,LogDescription:xi,TransactionDescription:Ti,base58:ft,base64:Ni,hexlify:K,isHexString:j,hexConcat:ce,hexStripZeros:Ai,hexValue:Ke,hexZeroPad:ye,hexDataLength:Ae,hexDataSlice:Y,nameprep:Ri,_toEscapedUtf8String:Ii,toUtf8Bytes:dt,toUtf8CodePoints:Pi,toUtf8String:Zt,Utf8ErrorFuncs:Bi,formatBytes32String:Ci,parseBytes32String:Si,dnsEncode:Qr,hashMessage:Oi,namehash:$e,isValidName:Ui,id:Li,_TypedDataEncoder:Wt,getAddress:Te,getIcapAddress:Fi,getContractAddress:vt,getCreate2Address:Di,isAddress:ji,formatEther:Mi,parseEther:$i,formatUnits:qi,parseUnits:Wi,commify:Gi,computeHmac:Hi,keccak256:Ji,ripemd160:zi,sha256:qt,sha512:Vi,randomBytes:Ki,shuffled:en,solidityPack:Xi,solidityKeccak256:Zi,soliditySha256:Qi,splitSignature:Yi,joinSignature:eo,accessListify:Ve,parseTransaction:Zr,serializeTransaction:to,get TransactionTypes(){return ro},getJsonWalletAddress:no,computeAddress:io,recoverAddress:oo,computePublicKey:so,recoverPublicKey:ao,verifyMessage:lo,verifyTypedData:co,getAccountPath:uo,mnemonicToEntropy:ho,entropyToMnemonic:fo,isValidMnemonic:po,mnemonicToSeed:go,get SupportedAlgorithm(){return mo},get UnicodeNormalizationForm(){return yo},get Utf8ErrorReason(){return wo},Indexed:Vr},Symbol.toStringTag,{value:"Module"})),ir="ethers/5.7.2",Sn=new m(ir),On=Object.freeze(Object.defineProperty({__proto__:null,Signer:ze,Wallet:tn,VoidSigner:Xt,getDefaultProvider:nr,providers:Bn,BaseContract:Qt,Contract:gt,ContractFactory:dn,BigNumber:R,FixedNumber:rn,constants:cn,get errors(){return nn},logger:Sn,utils:Cn,wordlists:on,version:ir,Wordlist:sn},Symbol.toStringTag,{value:"Module"}));try{const i=window;i._ethers==null&&(i._ethers=On)}catch{}const gs=Object.freeze(Object.defineProperty({__proto__:null,ethers:On,Signer:ze,Wallet:tn,VoidSigner:Xt,getDefaultProvider:nr,providers:Bn,BaseContract:Qt,Contract:gt,ContractFactory:dn,BigNumber:R,FixedNumber:rn,constants:cn,get errors(){return nn},logger:Sn,utils:Cn,wordlists:on,version:ir,Wordlist:sn},Symbol.toStringTag,{value:"Module"})),ms=Vn(gs);var Un={},Tt={};Tt.byteLength=bs;Tt.toByteArray=Es;Tt.fromByteArray=xs;var ie=[],te=[],ys=typeof Uint8Array<"u"?Uint8Array:Array,Mt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ke=0,ws=Mt.length;ke<ws;++ke)ie[ke]=Mt[ke],te[Mt.charCodeAt(ke)]=ke;te["-".charCodeAt(0)]=62;te["_".charCodeAt(0)]=63;function Ln(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function bs(i){var e=Ln(i),t=e[0],r=e[1];return(t+r)*3/4-r}function vs(i,e,t){return(e+t)*3/4-t}function Es(i){var e,t=Ln(i),r=t[0],n=t[1],a=new ys(vs(i,r,n)),l=0,c=n>0?r-4:r,f;for(f=0;f<c;f+=4)e=te[i.charCodeAt(f)]<<18|te[i.charCodeAt(f+1)]<<12|te[i.charCodeAt(f+2)]<<6|te[i.charCodeAt(f+3)],a[l++]=e>>16&255,a[l++]=e>>8&255,a[l++]=e&255;return n===2&&(e=te[i.charCodeAt(f)]<<2|te[i.charCodeAt(f+1)]>>4,a[l++]=e&255),n===1&&(e=te[i.charCodeAt(f)]<<10|te[i.charCodeAt(f+1)]<<4|te[i.charCodeAt(f+2)]>>2,a[l++]=e>>8&255,a[l++]=e&255),a}function ks(i){return ie[i>>18&63]+ie[i>>12&63]+ie[i>>6&63]+ie[i&63]}function _s(i,e,t){for(var r,n=[],a=e;a<t;a+=3)r=(i[a]<<16&16711680)+(i[a+1]<<8&65280)+(i[a+2]&255),n.push(ks(r));return n.join("")}function xs(i){for(var e,t=i.length,r=t%3,n=[],a=16383,l=0,c=t-r;l<c;l+=a)n.push(_s(i,l,l+a>c?c:l+a));return r===1?(e=i[t-1],n.push(ie[e>>2]+ie[e<<4&63]+"==")):r===2&&(e=(i[t-2]<<8)+i[t-1],n.push(ie[e>>10]+ie[e>>4&63]+ie[e<<2&63]+"=")),n.join("")}var or={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */or.read=function(i,e,t,r,n){var a,l,c=n*8-r-1,f=(1<<c)-1,d=f>>1,g=-7,w=t?n-1:0,N=t?-1:1,b=i[e+w];for(w+=N,a=b&(1<<-g)-1,b>>=-g,g+=c;g>0;a=a*256+i[e+w],w+=N,g-=8);for(l=a&(1<<-g)-1,a>>=-g,g+=r;g>0;l=l*256+i[e+w],w+=N,g-=8);if(a===0)a=1-d;else{if(a===f)return l?NaN:(b?-1:1)*(1/0);l=l+Math.pow(2,r),a=a-d}return(b?-1:1)*l*Math.pow(2,a-r)};or.write=function(i,e,t,r,n,a){var l,c,f,d=a*8-n-1,g=(1<<d)-1,w=g>>1,N=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=r?0:a-1,T=r?1:-1,k=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,l=g):(l=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-l))<1&&(l--,f*=2),l+w>=1?e+=N/f:e+=N*Math.pow(2,1-w),e*f>=2&&(l++,f/=2),l+w>=g?(c=0,l=g):l+w>=1?(c=(e*f-1)*Math.pow(2,n),l=l+w):(c=e*Math.pow(2,w-1)*Math.pow(2,n),l=0));n>=8;i[t+b]=c&255,b+=T,c/=256,n-=8);for(l=l<<n|c,d+=n;d>0;i[t+b]=l&255,b+=T,l/=256,d-=8);i[t+b-T]|=k*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){var e=Tt,t=or,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=c,i.SlowBuffer=S,i.INSPECT_MAX_BYTES=50;var n=2147483647;i.kMaxLength=n,c.TYPED_ARRAY_SUPPORT=a(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{var u=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(u,o),u.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function l(u){if(u>n)throw new RangeError('The value "'+u+'" is invalid for option "size"');var o=new Uint8Array(u);return Object.setPrototypeOf(o,c.prototype),o}function c(u,o,s){if(typeof u=="number"){if(typeof o=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(u)}return f(u,o,s)}c.poolSize=8192;function f(u,o,s){if(typeof u=="string")return N(u,o);if(ArrayBuffer.isView(u))return T(u);if(u==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u);if(ne(u,ArrayBuffer)||u&&ne(u.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ne(u,SharedArrayBuffer)||u&&ne(u.buffer,SharedArrayBuffer)))return k(u,o,s);if(typeof u=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var h=u.valueOf&&u.valueOf();if(h!=null&&h!==u)return c.from(h,o,s);var p=L(u);if(p)return p;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof u[Symbol.toPrimitive]=="function")return c.from(u[Symbol.toPrimitive]("string"),o,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u)}c.from=function(u,o,s){return f(u,o,s)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function d(u){if(typeof u!="number")throw new TypeError('"size" argument must be of type number');if(u<0)throw new RangeError('The value "'+u+'" is invalid for option "size"')}function g(u,o,s){return d(u),u<=0?l(u):o!==void 0?typeof s=="string"?l(u).fill(o,s):l(u).fill(o):l(u)}c.alloc=function(u,o,s){return g(u,o,s)};function w(u){return d(u),l(u<0?0:x(u)|0)}c.allocUnsafe=function(u){return w(u)},c.allocUnsafeSlow=function(u){return w(u)};function N(u,o){if((typeof o!="string"||o==="")&&(o="utf8"),!c.isEncoding(o))throw new TypeError("Unknown encoding: "+o);var s=B(u,o)|0,h=l(s),p=h.write(u,o);return p!==s&&(h=h.slice(0,p)),h}function b(u){for(var o=u.length<0?0:x(u.length)|0,s=l(o),h=0;h<o;h+=1)s[h]=u[h]&255;return s}function T(u){if(ne(u,Uint8Array)){var o=new Uint8Array(u);return k(o.buffer,o.byteOffset,o.byteLength)}return b(u)}function k(u,o,s){if(o<0||u.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(u.byteLength<o+(s||0))throw new RangeError('"length" is outside of buffer bounds');var h;return o===void 0&&s===void 0?h=new Uint8Array(u):s===void 0?h=new Uint8Array(u,o):h=new Uint8Array(u,o,s),Object.setPrototypeOf(h,c.prototype),h}function L(u){if(c.isBuffer(u)){var o=x(u.length)|0,s=l(o);return s.length===0||u.copy(s,0,0,o),s}if(u.length!==void 0)return typeof u.length!="number"||Pt(u.length)?l(0):b(u);if(u.type==="Buffer"&&Array.isArray(u.data))return b(u.data)}function x(u){if(u>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return u|0}function S(u){return+u!=u&&(u=0),c.alloc(+u)}c.isBuffer=function(o){return o!=null&&o._isBuffer===!0&&o!==c.prototype},c.compare=function(o,s){if(ne(o,Uint8Array)&&(o=c.from(o,o.offset,o.byteLength)),ne(s,Uint8Array)&&(s=c.from(s,s.offset,s.byteLength)),!c.isBuffer(o)||!c.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(o===s)return 0;for(var h=o.length,p=s.length,y=0,v=Math.min(h,p);y<v;++y)if(o[y]!==s[y]){h=o[y],p=s[y];break}return h<p?-1:p<h?1:0},c.isEncoding=function(o){switch(String(o).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(o,s){if(!Array.isArray(o))throw new TypeError('"list" argument must be an Array of Buffers');if(o.length===0)return c.alloc(0);var h;if(s===void 0)for(s=0,h=0;h<o.length;++h)s+=o[h].length;var p=c.allocUnsafe(s),y=0;for(h=0;h<o.length;++h){var v=o[h];if(ne(v,Uint8Array))y+v.length>p.length?c.from(v).copy(p,y):Uint8Array.prototype.set.call(p,v,y);else if(c.isBuffer(v))v.copy(p,y);else throw new TypeError('"list" argument must be an Array of Buffers');y+=v.length}return p};function B(u,o){if(c.isBuffer(u))return u.length;if(ArrayBuffer.isView(u)||ne(u,ArrayBuffer))return u.byteLength;if(typeof u!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof u);var s=u.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&s===0)return 0;for(var p=!1;;)switch(o){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return It(u).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s*2;case"hex":return s>>>1;case"base64":return fr(u).length;default:if(p)return h?-1:It(u).length;o=(""+o).toLowerCase(),p=!0}}c.byteLength=B;function X(u,o,s){var h=!1;if((o===void 0||o<0)&&(o=0),o>this.length||((s===void 0||s>this.length)&&(s=this.length),s<=0)||(s>>>=0,o>>>=0,s<=o))return"";for(u||(u="utf8");;)switch(u){case"hex":return $n(this,o,s);case"utf8":case"utf-8":return ar(this,o,s);case"ascii":return jn(this,o,s);case"latin1":case"binary":return Mn(this,o,s);case"base64":return Rt(this,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qn(this,o,s);default:if(h)throw new TypeError("Unknown encoding: "+u);u=(u+"").toLowerCase(),h=!0}}c.prototype._isBuffer=!0;function P(u,o,s){var h=u[o];u[o]=u[s],u[s]=h}c.prototype.swap16=function(){var o=this.length;if(o%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var s=0;s<o;s+=2)P(this,s,s+1);return this},c.prototype.swap32=function(){var o=this.length;if(o%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var s=0;s<o;s+=4)P(this,s,s+3),P(this,s+1,s+2);return this},c.prototype.swap64=function(){var o=this.length;if(o%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var s=0;s<o;s+=8)P(this,s,s+7),P(this,s+1,s+6),P(this,s+2,s+5),P(this,s+3,s+4);return this},c.prototype.toString=function(){var o=this.length;return o===0?"":arguments.length===0?ar(this,0,o):X.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(o){if(!c.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o?!0:c.compare(this,o)===0},c.prototype.inspect=function(){var o="",s=i.INSPECT_MAX_BYTES;return o=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(o+=" ... "),"<Buffer "+o+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(o,s,h,p,y){if(ne(o,Uint8Array)&&(o=c.from(o,o.offset,o.byteLength)),!c.isBuffer(o))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof o);if(s===void 0&&(s=0),h===void 0&&(h=o?o.length:0),p===void 0&&(p=0),y===void 0&&(y=this.length),s<0||h>o.length||p<0||y>this.length)throw new RangeError("out of range index");if(p>=y&&s>=h)return 0;if(p>=y)return-1;if(s>=h)return 1;if(s>>>=0,h>>>=0,p>>>=0,y>>>=0,this===o)return 0;for(var v=y-p,C=h-s,U=Math.min(v,C),F=this.slice(p,y),W=o.slice(s,h),D=0;D<U;++D)if(F[D]!==W[D]){v=F[D],C=W[D];break}return v<C?-1:C<v?1:0};function oe(u,o,s,h,p){if(u.length===0)return-1;if(typeof s=="string"?(h=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,Pt(s)&&(s=p?0:u.length-1),s<0&&(s=u.length+s),s>=u.length){if(p)return-1;s=u.length-1}else if(s<0)if(p)s=0;else return-1;if(typeof o=="string"&&(o=c.from(o,h)),c.isBuffer(o))return o.length===0?-1:Ie(u,o,s,h,p);if(typeof o=="number")return o=o&255,typeof Uint8Array.prototype.indexOf=="function"?p?Uint8Array.prototype.indexOf.call(u,o,s):Uint8Array.prototype.lastIndexOf.call(u,o,s):Ie(u,[o],s,h,p);throw new TypeError("val must be string, number or Buffer")}function Ie(u,o,s,h,p){var y=1,v=u.length,C=o.length;if(h!==void 0&&(h=String(h).toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(u.length<2||o.length<2)return-1;y=2,v/=2,C/=2,s/=2}function U(dr,pr){return y===1?dr[pr]:dr.readUInt16BE(pr*y)}var F;if(p){var W=-1;for(F=s;F<v;F++)if(U(u,F)===U(o,W===-1?0:F-W)){if(W===-1&&(W=F),F-W+1===C)return W*y}else W!==-1&&(F-=F-W),W=-1}else for(s+C>v&&(s=v-C),F=s;F>=0;F--){for(var D=!0,Ye=0;Ye<C;Ye++)if(U(u,F+Ye)!==U(o,Ye)){D=!1;break}if(D)return F}return-1}c.prototype.includes=function(o,s,h){return this.indexOf(o,s,h)!==-1},c.prototype.indexOf=function(o,s,h){return oe(this,o,s,h,!0)},c.prototype.lastIndexOf=function(o,s,h){return oe(this,o,s,h,!1)};function Ze(u,o,s,h){s=Number(s)||0;var p=u.length-s;h?(h=Number(h),h>p&&(h=p)):h=p;var y=o.length;h>y/2&&(h=y/2);for(var v=0;v<h;++v){var C=parseInt(o.substr(v*2,2),16);if(Pt(C))return v;u[s+v]=C}return v}function Pe(u,o,s,h){return Qe(It(o,u.length-s),u,s,h)}function Nt(u,o,s,h){return Qe(Hn(o),u,s,h)}function fe(u,o,s,h){return Qe(fr(o),u,s,h)}function At(u,o,s,h){return Qe(Jn(o,u.length-s),u,s,h)}c.prototype.write=function(o,s,h,p){if(s===void 0)p="utf8",h=this.length,s=0;else if(h===void 0&&typeof s=="string")p=s,h=this.length,s=0;else if(isFinite(s))s=s>>>0,isFinite(h)?(h=h>>>0,p===void 0&&(p="utf8")):(p=h,h=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var y=this.length-s;if((h===void 0||h>y)&&(h=y),o.length>0&&(h<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");p||(p="utf8");for(var v=!1;;)switch(p){case"hex":return Ze(this,o,s,h);case"utf8":case"utf-8":return Pe(this,o,s,h);case"ascii":case"latin1":case"binary":return Nt(this,o,s,h);case"base64":return fe(this,o,s,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return At(this,o,s,h);default:if(v)throw new TypeError("Unknown encoding: "+p);p=(""+p).toLowerCase(),v=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Rt(u,o,s){return o===0&&s===u.length?e.fromByteArray(u):e.fromByteArray(u.slice(o,s))}function ar(u,o,s){s=Math.min(u.length,s);for(var h=[],p=o;p<s;){var y=u[p],v=null,C=y>239?4:y>223?3:y>191?2:1;if(p+C<=s){var U,F,W,D;switch(C){case 1:y<128&&(v=y);break;case 2:U=u[p+1],(U&192)===128&&(D=(y&31)<<6|U&63,D>127&&(v=D));break;case 3:U=u[p+1],F=u[p+2],(U&192)===128&&(F&192)===128&&(D=(y&15)<<12|(U&63)<<6|F&63,D>2047&&(D<55296||D>57343)&&(v=D));break;case 4:U=u[p+1],F=u[p+2],W=u[p+3],(U&192)===128&&(F&192)===128&&(W&192)===128&&(D=(y&15)<<18|(U&63)<<12|(F&63)<<6|W&63,D>65535&&D<1114112&&(v=D))}}v===null?(v=65533,C=1):v>65535&&(v-=65536,h.push(v>>>10&1023|55296),v=56320|v&1023),h.push(v),p+=C}return Dn(h)}var lr=4096;function Dn(u){var o=u.length;if(o<=lr)return String.fromCharCode.apply(String,u);for(var s="",h=0;h<o;)s+=String.fromCharCode.apply(String,u.slice(h,h+=lr));return s}function jn(u,o,s){var h="";s=Math.min(u.length,s);for(var p=o;p<s;++p)h+=String.fromCharCode(u[p]&127);return h}function Mn(u,o,s){var h="";s=Math.min(u.length,s);for(var p=o;p<s;++p)h+=String.fromCharCode(u[p]);return h}function $n(u,o,s){var h=u.length;(!o||o<0)&&(o=0),(!s||s<0||s>h)&&(s=h);for(var p="",y=o;y<s;++y)p+=zn[u[y]];return p}function qn(u,o,s){for(var h=u.slice(o,s),p="",y=0;y<h.length-1;y+=2)p+=String.fromCharCode(h[y]+h[y+1]*256);return p}c.prototype.slice=function(o,s){var h=this.length;o=~~o,s=s===void 0?h:~~s,o<0?(o+=h,o<0&&(o=0)):o>h&&(o=h),s<0?(s+=h,s<0&&(s=0)):s>h&&(s=h),s<o&&(s=o);var p=this.subarray(o,s);return Object.setPrototypeOf(p,c.prototype),p};function q(u,o,s){if(u%1!==0||u<0)throw new RangeError("offset is not uint");if(u+o>s)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(o,s,h){o=o>>>0,s=s>>>0,h||q(o,s,this.length);for(var p=this[o],y=1,v=0;++v<s&&(y*=256);)p+=this[o+v]*y;return p},c.prototype.readUintBE=c.prototype.readUIntBE=function(o,s,h){o=o>>>0,s=s>>>0,h||q(o,s,this.length);for(var p=this[o+--s],y=1;s>0&&(y*=256);)p+=this[o+--s]*y;return p},c.prototype.readUint8=c.prototype.readUInt8=function(o,s){return o=o>>>0,s||q(o,1,this.length),this[o]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(o,s){return o=o>>>0,s||q(o,2,this.length),this[o]|this[o+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(o,s){return o=o>>>0,s||q(o,2,this.length),this[o]<<8|this[o+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(o,s){return o=o>>>0,s||q(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+this[o+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(o,s){return o=o>>>0,s||q(o,4,this.length),this[o]*16777216+(this[o+1]<<16|this[o+2]<<8|this[o+3])},c.prototype.readIntLE=function(o,s,h){o=o>>>0,s=s>>>0,h||q(o,s,this.length);for(var p=this[o],y=1,v=0;++v<s&&(y*=256);)p+=this[o+v]*y;return y*=128,p>=y&&(p-=Math.pow(2,8*s)),p},c.prototype.readIntBE=function(o,s,h){o=o>>>0,s=s>>>0,h||q(o,s,this.length);for(var p=s,y=1,v=this[o+--p];p>0&&(y*=256);)v+=this[o+--p]*y;return y*=128,v>=y&&(v-=Math.pow(2,8*s)),v},c.prototype.readInt8=function(o,s){return o=o>>>0,s||q(o,1,this.length),this[o]&128?(255-this[o]+1)*-1:this[o]},c.prototype.readInt16LE=function(o,s){o=o>>>0,s||q(o,2,this.length);var h=this[o]|this[o+1]<<8;return h&32768?h|4294901760:h},c.prototype.readInt16BE=function(o,s){o=o>>>0,s||q(o,2,this.length);var h=this[o+1]|this[o]<<8;return h&32768?h|4294901760:h},c.prototype.readInt32LE=function(o,s){return o=o>>>0,s||q(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24},c.prototype.readInt32BE=function(o,s){return o=o>>>0,s||q(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]},c.prototype.readFloatLE=function(o,s){return o=o>>>0,s||q(o,4,this.length),t.read(this,o,!0,23,4)},c.prototype.readFloatBE=function(o,s){return o=o>>>0,s||q(o,4,this.length),t.read(this,o,!1,23,4)},c.prototype.readDoubleLE=function(o,s){return o=o>>>0,s||q(o,8,this.length),t.read(this,o,!0,52,8)},c.prototype.readDoubleBE=function(o,s){return o=o>>>0,s||q(o,8,this.length),t.read(this,o,!1,52,8)};function z(u,o,s,h,p,y){if(!c.isBuffer(u))throw new TypeError('"buffer" argument must be a Buffer instance');if(o>p||o<y)throw new RangeError('"value" argument is out of bounds');if(s+h>u.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(o,s,h,p){if(o=+o,s=s>>>0,h=h>>>0,!p){var y=Math.pow(2,8*h)-1;z(this,o,s,h,y,0)}var v=1,C=0;for(this[s]=o&255;++C<h&&(v*=256);)this[s+C]=o/v&255;return s+h},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(o,s,h,p){if(o=+o,s=s>>>0,h=h>>>0,!p){var y=Math.pow(2,8*h)-1;z(this,o,s,h,y,0)}var v=h-1,C=1;for(this[s+v]=o&255;--v>=0&&(C*=256);)this[s+v]=o/C&255;return s+h},c.prototype.writeUint8=c.prototype.writeUInt8=function(o,s,h){return o=+o,s=s>>>0,h||z(this,o,s,1,255,0),this[s]=o&255,s+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(o,s,h){return o=+o,s=s>>>0,h||z(this,o,s,2,65535,0),this[s]=o&255,this[s+1]=o>>>8,s+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(o,s,h){return o=+o,s=s>>>0,h||z(this,o,s,2,65535,0),this[s]=o>>>8,this[s+1]=o&255,s+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(o,s,h){return o=+o,s=s>>>0,h||z(this,o,s,4,4294967295,0),this[s+3]=o>>>24,this[s+2]=o>>>16,this[s+1]=o>>>8,this[s]=o&255,s+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(o,s,h){return o=+o,s=s>>>0,h||z(this,o,s,4,4294967295,0),this[s]=o>>>24,this[s+1]=o>>>16,this[s+2]=o>>>8,this[s+3]=o&255,s+4},c.prototype.writeIntLE=function(o,s,h,p){if(o=+o,s=s>>>0,!p){var y=Math.pow(2,8*h-1);z(this,o,s,h,y-1,-y)}var v=0,C=1,U=0;for(this[s]=o&255;++v<h&&(C*=256);)o<0&&U===0&&this[s+v-1]!==0&&(U=1),this[s+v]=(o/C>>0)-U&255;return s+h},c.prototype.writeIntBE=function(o,s,h,p){if(o=+o,s=s>>>0,!p){var y=Math.pow(2,8*h-1);z(this,o,s,h,y-1,-y)}var v=h-1,C=1,U=0;for(this[s+v]=o&255;--v>=0&&(C*=256);)o<0&&U===0&&this[s+v+1]!==0&&(U=1),this[s+v]=(o/C>>0)-U&255;return s+h},c.prototype.writeInt8=function(o,s,h){return o=+o,s=s>>>0,h||z(this,o,s,1,127,-128),o<0&&(o=255+o+1),this[s]=o&255,s+1},c.prototype.writeInt16LE=function(o,s,h){return o=+o,s=s>>>0,h||z(this,o,s,2,32767,-32768),this[s]=o&255,this[s+1]=o>>>8,s+2},c.prototype.writeInt16BE=function(o,s,h){return o=+o,s=s>>>0,h||z(this,o,s,2,32767,-32768),this[s]=o>>>8,this[s+1]=o&255,s+2},c.prototype.writeInt32LE=function(o,s,h){return o=+o,s=s>>>0,h||z(this,o,s,4,2147483647,-2147483648),this[s]=o&255,this[s+1]=o>>>8,this[s+2]=o>>>16,this[s+3]=o>>>24,s+4},c.prototype.writeInt32BE=function(o,s,h){return o=+o,s=s>>>0,h||z(this,o,s,4,2147483647,-2147483648),o<0&&(o=4294967295+o+1),this[s]=o>>>24,this[s+1]=o>>>16,this[s+2]=o>>>8,this[s+3]=o&255,s+4};function cr(u,o,s,h,p,y){if(s+h>u.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function ur(u,o,s,h,p){return o=+o,s=s>>>0,p||cr(u,o,s,4),t.write(u,o,s,h,23,4),s+4}c.prototype.writeFloatLE=function(o,s,h){return ur(this,o,s,!0,h)},c.prototype.writeFloatBE=function(o,s,h){return ur(this,o,s,!1,h)};function hr(u,o,s,h,p){return o=+o,s=s>>>0,p||cr(u,o,s,8),t.write(u,o,s,h,52,8),s+8}c.prototype.writeDoubleLE=function(o,s,h){return hr(this,o,s,!0,h)},c.prototype.writeDoubleBE=function(o,s,h){return hr(this,o,s,!1,h)},c.prototype.copy=function(o,s,h,p){if(!c.isBuffer(o))throw new TypeError("argument should be a Buffer");if(h||(h=0),!p&&p!==0&&(p=this.length),s>=o.length&&(s=o.length),s||(s=0),p>0&&p<h&&(p=h),p===h||o.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("sourceEnd out of bounds");p>this.length&&(p=this.length),o.length-s<p-h&&(p=o.length-s+h);var y=p-h;return this===o&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(s,h,p):Uint8Array.prototype.set.call(o,this.subarray(h,p),s),y},c.prototype.fill=function(o,s,h,p){if(typeof o=="string"){if(typeof s=="string"?(p=s,s=0,h=this.length):typeof h=="string"&&(p=h,h=this.length),p!==void 0&&typeof p!="string")throw new TypeError("encoding must be a string");if(typeof p=="string"&&!c.isEncoding(p))throw new TypeError("Unknown encoding: "+p);if(o.length===1){var y=o.charCodeAt(0);(p==="utf8"&&y<128||p==="latin1")&&(o=y)}}else typeof o=="number"?o=o&255:typeof o=="boolean"&&(o=Number(o));if(s<0||this.length<s||this.length<h)throw new RangeError("Out of range index");if(h<=s)return this;s=s>>>0,h=h===void 0?this.length:h>>>0,o||(o=0);var v;if(typeof o=="number")for(v=s;v<h;++v)this[v]=o;else{var C=c.isBuffer(o)?o:c.from(o,p),U=C.length;if(U===0)throw new TypeError('The value "'+o+'" is invalid for argument "value"');for(v=0;v<h-s;++v)this[v+s]=C[v%U]}return this};var Wn=/[^+/0-9A-Za-z-_]/g;function Gn(u){if(u=u.split("=")[0],u=u.trim().replace(Wn,""),u.length<2)return"";for(;u.length%4!==0;)u=u+"=";return u}function It(u,o){o=o||1/0;for(var s,h=u.length,p=null,y=[],v=0;v<h;++v){if(s=u.charCodeAt(v),s>55295&&s<57344){if(!p){if(s>56319){(o-=3)>-1&&y.push(239,191,189);continue}else if(v+1===h){(o-=3)>-1&&y.push(239,191,189);continue}p=s;continue}if(s<56320){(o-=3)>-1&&y.push(239,191,189),p=s;continue}s=(p-55296<<10|s-56320)+65536}else p&&(o-=3)>-1&&y.push(239,191,189);if(p=null,s<128){if((o-=1)<0)break;y.push(s)}else if(s<2048){if((o-=2)<0)break;y.push(s>>6|192,s&63|128)}else if(s<65536){if((o-=3)<0)break;y.push(s>>12|224,s>>6&63|128,s&63|128)}else if(s<1114112){if((o-=4)<0)break;y.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else throw new Error("Invalid code point")}return y}function Hn(u){for(var o=[],s=0;s<u.length;++s)o.push(u.charCodeAt(s)&255);return o}function Jn(u,o){for(var s,h,p,y=[],v=0;v<u.length&&!((o-=2)<0);++v)s=u.charCodeAt(v),h=s>>8,p=s%256,y.push(p),y.push(h);return y}function fr(u){return e.toByteArray(Gn(u))}function Qe(u,o,s,h){for(var p=0;p<h&&!(p+s>=o.length||p>=u.length);++p)o[p+s]=u[p];return p}function ne(u,o){return u instanceof o||u!=null&&u.constructor!=null&&u.constructor.name!=null&&u.constructor.name===o.name}function Pt(u){return u!==u}var zn=function(){for(var u="0123456789abcdef",o=new Array(256),s=0;s<16;++s)for(var h=s*16,p=0;p<16;++p)o[h+p]=u[s]+u[p];return o}()})(Un);/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Ts=function(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)},Ns=function(){function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}}();function Vt(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}else return Array.from(i)}function As(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var de=ms,sr=Un.Buffer,Jr=Ts,Rs=function(){function i(e){if(As(this,i),this.abi=[],typeof e=="string")try{var t=bo;this.abi=JSON.parse(t.readFileSync(e))}catch{try{this.abi=JSON.parse(e)}catch(n){throw new Error("Invalid ABI: "+n.message)}}else if(e instanceof Object)this.abi=e;else throw new TypeError("Must pass ABI array object or file path to constructor")}return Ns(i,[{key:"decodeConstructor",value:function(t){Jr(t)&&(t=t.toString("utf8")),typeof t!="string"&&(t=""),t=t.trim();for(var r=0;r<this.abi.length;r++){var n=this.abi[r];if(n.type==="constructor"){var a=n.name||null,l=n.inputs?n.inputs.map(function(d){return d.type}):[],c=n.inputs?n.inputs.map(function(d){return d.name}):[];if(t=t.slice(-256),t.length!==256)throw new Error("fail");t.indexOf("0x")!==0&&(t="0x"+t);var f=de.utils.defaultAbiCoder.decode(l,t);return f=ht(f),{method:a,types:l,inputs:f,names:c}}}throw new Error("not found")}},{key:"decodeData",value:function(t){Jr(t)&&(t=t.toString("utf8")),typeof t!="string"&&(t=""),t=t.trim();var r=sr.from(t.replace(/^0x/,""),"hex"),n=Ss(r.subarray(0,4)),a=r.subarray(4),l=this.abi.reduce(function(f,d){try{if(d.type==="constructor"||d.type==="event")return f;var g=d.name||null,w=d.inputs?d.inputs.map(function(x){return x.type.includes("tuple")?x:x.type}):[],N=d.inputs?d.inputs.map(function(x){return x.type.includes("tuple")?[x.name,x.components.map(function(S){return S.name})]:x.name}):[],b=Cs(g,w);if(b===n){var T=[];a=Is(w,a);try{T=de.utils.defaultAbiCoder.decode(w,a)}catch{try{var k=new de.utils.Interface([]);T=k.decodeFunctionData(de.utils.FunctionFragment.fromObject(d),t)}catch{}}T=T.map(function(x,S){if(w[S].components){var B=w[S].components;return Fn(x,B)}return w[S]==="address"?x.split("0x")[1]:w[S]==="address[]"?x.map(function(X){return X.split("0x")[1]}):x});var L=w.map(function(x){if(x.components){var S=x.components.reduce(function(X,P){return[].concat(Vt(X),[P.type])},[]),B="("+S.join(",")+")";return x.type==="tuple[]"?B+"[]":B}return x});return T=ht(T),{method:g,types:L,inputs:T,names:N}}return f}catch{return f}},{method:null,types:[],inputs:[],names:[]});if(l.method||this.abi.reduce(function(f,d){if(d.type==="constructor"||d.type==="event")return f;var g=d.name||null;try{var w=new de.utils.Interface([]),N=w.decodeFunctionData(de.utils.FunctionFragment.fromObject(d),t),b=ht(N);l.method=g,l.inputs=b,l.names=d.inputs?d.inputs.map(function(k){return k.type.includes("tuple")?[k.name,k.components.map(function(L){return L.name})]:k.name}):[];var T=d.inputs?d.inputs.map(function(k){return k.type.includes("tuple")?k:k.type}):[];l.types=T.map(function(k){if(k.components){var L=k.components.reduce(function(S,B){return[].concat(Vt(S),[B.type])},[]),x="("+L.join(",")+")";return k.type==="tuple[]"?x+"[]":x}return k})}catch{}}),!l.method)try{var c=this.decodeConstructor(t);if(c)return c}catch{}return l}}]),i}();function Fn(i,e){return i.map(function(t,r){var n=e[r]?e[r].type:null;return n==="address"&&typeof t=="string"?t.split("0x")[1]:n==="address[]"||Array.isArray()?t.map(function(a){return a.split("0x")[1]}):Array.isArray(t)?Fn(t,e):t})}function ht(i){return[].concat(Vt(i.map(function(e){return Array.isArray(e)?ht(e):e})))}function Is(i,e){for(var t=0,r=0;r<i.length;r++){var n=i[r];if(n==="address"&&e.set(sr.alloc(12),t),Bs(n)){var a=Ps(n);a&&a!=="dynamic"?t+=32*a:t+=32}else t+=32}return e}function Ps(i){var e=i.match(/(.*)\[(.*?)\]$/);return e?e[2]===""?"dynamic":parseInt(e[2],10):null}function Bs(i){return i.lastIndexOf("]")===i.length-1}function Kt(i,e){if(i instanceof Object&&i.components&&(i=i.components),!Array.isArray(i))return i instanceof Object&&i.type?i.type:i;var t="("+i.reduce(function(r,n){return n.type==="tuple"?r.push(Kt(n.components)):n.type==="tuple[]"?r.push(Kt(n.components)+"[]"):r.push(n.type),r},[]).join(",")+")";return e?t+"[]":t}function Cs(i,e){var t=i+"("+e.reduce(function(r,n){return r.push(Kt(n,n.type==="tuple[]")),r},[]).join(",")+")";return de.utils.keccak256(sr.from(t)).slice(2,10)}function Ss(i){return Array.from(i,function(e){return("0"+(e&255).toString(16)).slice(-2)}).join("")}var Os=Rs;const Us=Os,Ls={style:{display:"flex","align-items":"left"}},Fs=Q("i",{class:"el-icon-time"},null,-1),Ds={style:{"margin-left":"10px"}},js={style:{display:"flex","align-items":"left"}},Ms={style:{"margin-left":"3px"}},$s=an({name:"TransactionsQueue"}),Xs=an({...$s,props:{connectedWallet:{type:Object,default:null},web3:{type:Object,default:null},currentWallet:{type:String,default:""}},setup(i){const e=i,t=new Us(Kn),r=Se(!1),n=Se([]),a=Se(0),l=Se(0),c=Se(0),f=async()=>{r.value=!0;const b=Ce(Be,e.currentWallet,e.web3),k=(await b.methods.getTransactionIds(0).call()).map(async L=>{const x=await b.methods.getTransaction(L).call(),S=await b.methods.getTransactionConfirmationStatus(L,e.connectedWallet.address).call(),B={id:L,destination:x.to,value:et(x.value,e.web3),executeState:x.state,confirmStatus:S};n.value.push(B)});await Promise.all(k),r.value=!1},d=async()=>{r.value=!0;const b=Ce(Be,e.currentWallet,e.web3);a.value=Xn[e.connectedWallet.chainId],l.value=await e.web3.eth.getBlock("latest"),c.value=Math.ceil((l.value.number-a.value)/5e3);const k=(await b.methods.getTransactionIds(0).call()).map(async L=>{const x=await b.methods.getTransaction(L).call(),S=await b.methods.getTransactionConfirmationStatus(L,e.connectedWallet.address).call(),B=x.data?t.decodeData(x.data):null,X={id:L,destination:B?B.inputs[0]:x.to,value:B?et(new e.web3.utils.toBN(B.inputs[1]),e.web3):et(x.value,e.web3),data:B?{to:B.inputs[0],value:et(new e.web3.utils.toBN(B.inputs[1]),e.web3)}:null,confirmations:x.confirmations,revokes:x.revokes,executeState:x.state,confirmStatus:S,events:[]};let P=!0;for(let oe=0;oe<c.value&&P;oe++){const Ie=a.value+5e3*oe,Ze=Ie+4999,Pe=await b.getPastEvents("TransactionCreated",{filter:{},fromBlock:Ie,toBlock:Ze});if(Pe.length>0){const Nt=Pe.map(async fe=>{const At=await e.web3.eth.getTransaction(fe.transactionHash),Rt={eventName:fe.event,...fe.returnValues,blockHash:fe.blockHash,blockNumber:fe.blockNumber,from:At.from};X.events.push(Rt)});await Promise.all(Nt),X.events.sort(mr("blockNumber"))}Pe.length<Ze&&(P=!1)}n.value.push(X)});await Promise.all(k),n.value.sort(mr("id")),console.info(n.value),r.value=!1};vo(()=>{e.connectedWallet&&e.web3&&e.currentWallet&&d()});const g=b=>{r.value=!0,Ce(Be,e.currentWallet,e.web3).methods.confirmTransaction(b.id).send({from:e.connectedWallet.address}).then(k=>{console.info(k)}).catch(k=>{console.error(k)}).finally(()=>{r.value=!1})},w=b=>{r.value=!0,Ce(Be,e.currentWallet,e.web3).methods.executeTransaction(b.id).send({from:e.connectedWallet.address}).then(()=>{f()}).catch(k=>{console.error(k)}).finally(()=>{r.value=!1})},N=b=>{r.value=!0,Ce(Be,e.currentWallet,e.web3).methods.revokeTransaction(b.id).send({from:e.connectedWallet.address}).then(()=>{f()}).catch(k=>{console.error(k)}).finally(()=>{r.value=!1})};return(b,T)=>{const k=Oe("el-form-item"),L=Oe("el-form"),x=Oe("el-table-column"),S=Oe("el-button"),B=Oe("el-table"),X=Eo("loading");return Bt(),ko("div",null,[_o((Bt(),gr(B,{data:n.value,style:{width:"100%"}},{default:G(()=>[V(x,{type:"expand"},{default:G(P=>[V(L,{"label-position":"left",inline:"",class:"demo-table-expand"},{default:G(()=>[V(k,{label:"å•†å“åç§°"},{default:G(()=>[Q("span",null,Z(P.row.name),1)]),_:2},1024),V(k,{label:"æ‰€å±žåº—é“º"},{default:G(()=>[Q("span",null,Z(P.row.shop),1)]),_:2},1024),V(k,{label:"å•†å“ ID"},{default:G(()=>[Q("span",null,Z(P.row.id),1)]),_:2},1024),V(k,{label:"åº—é“º ID"},{default:G(()=>[Q("span",null,Z(P.row.shopId),1)]),_:2},1024),V(k,{label:"å•†å“åˆ†ç±»"},{default:G(()=>[Q("span",null,Z(P.row.category),1)]),_:2},1024),V(k,{label:"åº—é“ºåœ°å€"},{default:G(()=>[Q("span",null,Z(P.row.address),1)]),_:2},1024),V(k,{label:"å•†å“æè¿°"},{default:G(()=>[Q("span",null,Z(P.row.desc),1)]),_:2},1024)]),_:2},1024)]),_:1}),V(x,{label:ve(be)("transaction.destination")},{default:G(P=>[Q("div",Ls,[Fs,Q("span",Ds,Z(P.row.destination),1)])]),_:1},8,["label"]),V(x,{label:ve(be)("transaction.value")},{default:G(P=>[Q("div",js,[Q("span",null,Z(P.row.value),1),Q("span",Ms,Z(P.row.symbol),1)])]),_:1},8,["label"]),V(x,{label:ve(be)("assets.operation")},{default:G(P=>[P.row.confirmStatus?xo("",!0):(Bt(),gr(S,{key:0,type:"primary",size:"small",onClick:oe=>g(P.row)},{default:G(()=>[Ct(Z(ve(be)("transaction.btnConfirm")),1)]),_:2},1032,["onClick"])),V(S,{type:"primary",size:"small",onClick:oe=>w(P.row)},{default:G(()=>[Ct(Z(ve(be)("transaction.btnExecute")),1)]),_:2},1032,["onClick"]),V(S,{type:"danger",size:"small",onClick:oe=>N(P.row)},{default:G(()=>[Ct(Z(ve(be)("transaction.btnRevoke")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[X,r.value]])])}}});export{Xs as _};
