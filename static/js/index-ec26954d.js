import{t as l}from"./i18n-d274a306.js";import{u as F}from"./onboard-daa9ec97.js";import{u as L}from"./web3-9283aabb.js";import{f as H}from"./formatters-607f9df1.js";import{a as M,i as z}from"./addresses-bd8a7f8c.js";import{h as N,r as m,J as G,o as I,w as D,a3 as r,j as V,v as R,x as t,D as e,B as C,C as _,u as s,k as O,X as J,F as X,l as p}from"./runtime-core.esm-bundler-f67957fc.js";import"./__vite-browser-external-c2c4480c.js";import"./vue-i18n.runtime.esm-bundler-4810931d.js";import"./index-5342a498.js";import"./preload-helper-101896b7.js";import"./index-52cb6942-4c54134f.js";import"./___vite-browser-external_commonjs-proxy-66fe83c2.js";import"./index-aa19b975.js";import"./utils-6de8de71.js";const K=N({__name:"SendTransaction",props:{visible:{type:Boolean,default:!1},data:{type:Object,default:()=>({})},tokenList:{type:Object,default:()=>[]}},emits:["update:visible"],setup(S,{emit:k}){const f=S,c=m(!1),x=m(""),B={sendAddress:"",recipientAddress:"",assetToken:"",amount:""},y=m(),a=G(B);I(()=>{x.value=F().getWallet.address});const w=(n,o,i)=>{o===""?i(new Error(l("transaction.please input recipient address"))):(a.recipientAddress=M(a.recipientAddress),z(a.recipientAddress)?i():i(new Error(l("transaction.invalid recipient address"))))},g=async()=>await y.value.validate(n=>!!n),h=async()=>{await g()&&console.info(a)},A=()=>{c.value=!1};return D(()=>c.value,n=>{k("update:visible",n)}),D(()=>f.visible,n=>{c.value=n}),D(()=>f.data.token,n=>{a.assetToken=n}),(n,o)=>{const i=r("el-col"),b=r("el-row"),v=r("el-form-item"),T=r("el-divider"),u=r("el-input"),W=r("el-option"),$=r("el-select"),j=r("el-form"),E=r("el-button"),q=r("el-dialog");return V(),R(q,{modelValue:c.value,"onUpdate:modelValue":o[3]||(o[3]=d=>c.value=d),title:s(l)("transaction.sendTokens"),width:"80%",draggable:"","close-on-click-modal":!1,"before-close":A},{footer:t(()=>[e(E,{onClick:A},{default:t(()=>[C(_(s(l)("wallet.btnCancel")),1)]),_:1}),e(E,{type:"primary",onClick:h},{default:t(()=>[C(_(s(l)("wallet.btnSubmit")),1)]),_:1})]),default:t(()=>[e(j,{ref_key:"transactionFormRef",ref:y,model:a,"label-width":"100px",class:"demo-ruleForm","hide-required-asterisk":!0},{default:t(()=>[e(v,{prop:"sendAddress",label:s(l)("transaction.sendAddress"),style:{width:"100%"}},{default:t(()=>[e(b,{gutter:20,style:{width:"100%"}},{default:t(()=>[e(i,{span:24},{default:t(()=>[C(_(a.sendAddress),1)]),_:1})]),_:1})]),_:1},8,["label"]),e(T),e(v,{prop:"recipientAddress",label:s(l)("transaction.recipientAddress"),style:{width:"100%"},rules:[{validator:w,trigger:"blur"}]},{default:t(()=>[e(b,{gutter:20,style:{width:"100%"}},{default:t(()=>[e(i,{span:24},{default:t(()=>[e(u,{modelValue:a.recipientAddress,"onUpdate:modelValue":o[0]||(o[0]=d=>a.recipientAddress=d)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["label","rules"]),e(v,{prop:"assetToken",label:s(l)("transaction.assetToken"),style:{width:"100%"},rules:[{required:!0,message:s(l)("transaction.please select asset token"),trigger:"change"}]},{default:t(()=>[e(b,{gutter:20,style:{width:"100%"}},{default:t(()=>[e(i,{span:24},{default:t(()=>[e($,{modelValue:a.assetToken,"onUpdate:modelValue":o[1]||(o[1]=d=>a.assetToken=d),style:{width:"100%"}},{default:t(()=>[(V(!0),O(X,null,J(f.tokenList,d=>(V(),R(W,{key:d.token,label:d.name+" - "+d.token,value:d.token},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["label","rules"]),e(v,{prop:"amount",label:s(l)("transaction.amount"),style:{width:"100%"},rules:[{required:!0,message:s(l)("transaction.please input amount"),trigger:"blur"}]},{default:t(()=>[e(b,{gutter:20,style:{width:"100%"}},{default:t(()=>[e(i,{span:24},{default:t(()=>[e(u,{modelValue:a.amount,"onUpdate:modelValue":o[2]||(o[2]=d=>a.amount=d)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),U=[{name:"GÃ¶rli Ether",token:"0xdb5d970f03bfd19c1e51d57bced114bc35a0808f",balance:"0.2",symbol:"DAO"},{name:"BNB Mainnet",token:"0xd04808F83419776Cc85b7a1cf516a6dEeaA66F0D",balance:"1.1",symbol:"DST"},{name:"BNB Testnet",token:"0x69de6C190755e1398C268ECC440de59B10653166",balance:"0.1",symbol:"DAT"}],P={class:"card-header"},Q={class:"font-medium"},Y={style:{display:"flex","align-items":"left"}},Z=p("i",{class:"el-icon-time"},null,-1),ee={style:{"margin-left":"10px"}},te={style:{display:"flex","align-items":"left"}},ae={style:{"margin-left":"3px"}},le=N({name:"Assets"}),ke=N({...le,setup(S){const k=m(!1),f=m(null),c=m(null),x=m("0"),B=m("BNB"),y={name:"",status:"",description:"",type:"",mark:""},a=m(!1),w=m({...y});async function g(){if(k.value=!0,f.value=F().getWallet,c.value){const n=await c.value.getNetwork(),o=await c.value.getBalance(f.value.address);B.value=n.name,x.value=H(o,18)}k.value=!1}async function h(){c.value=L().getWeb3}F().$subscribe(()=>{g()}),L().$subscribe(()=>{h()});const A=n=>{a.value=!0,w.value=n};return I(()=>{g(),h()}),(n,o)=>{const i=r("el-table-column"),b=r("el-button"),v=r("el-table"),T=r("el-card");return V(),O("div",null,[e(T,{shadow:"never"},{header:t(()=>[p("div",P,[p("span",Q,_(s(l)("assets.assets")),1)])]),default:t(()=>[e(v,{data:s(U),style:{width:"100%"}},{default:t(()=>[e(i,{label:s(l)("assets.asset")},{default:t(u=>[p("div",Y,[Z,p("span",ee,_(u.row.name),1)])]),_:1},8,["label"]),e(i,{label:s(l)("assets.balance")},{default:t(u=>[p("div",te,[p("span",null,_(u.row.balance),1),p("span",ae,_(u.row.symbol),1)])]),_:1},8,["label"]),e(i,{label:s(l)("assets.operation")},{default:t(u=>[e(b,{type:"primary",size:"small",onClick:W=>A(u.row)},{default:t(()=>[C(_(s(l)("wallet.btnSend")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1}),e(K,{visible:a.value,"onUpdate:visible":o[0]||(o[0]=u=>a.value=u),data:w.value,tokenList:s(U)},null,8,["visible","data","tokenList"])])}}});export{ke as default};
