import{d as x}from"./vue-router-935545c9.js";import{E as M,t as p}from"./___vite-browser-external_commonjs-proxy-4a27f4fc.js";import{m as C,M as E}from"./index-ea16d54b.js";import{u as m}from"./web3Modal-7a6f7b09.js";import{aW as b}from"./index-cc67097a.js";import{x as B,r as _,o as W,j as z,a7 as L,y as c,z as u,A as O,P as h,I as k,M as S,O as v,u as g}from"./runtime-core.esm-bundler-c80a0204.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";const U=(i,n)=>{if(n){const{icon:o,type:t="info",dangerouslyUseHTMLString:s=!1,customClass:a="antd",duration:d=2e3,showClose:f=!1,center:l=!1,offset:e=20,appendTo:y=document.body,grouping:r=!1,onClose:w}=n;return b({message:i,type:t,icon:o,dangerouslyUseHTMLString:s,duration:d,showClose:f,center:l,offset:e,appendTo:y,grouping:r,customClass:a==="antd"?"pure-message":"",onClose:()=>M(w)?w():null})}else return b({message:i,customClass:"pure-message"})},j={class:"container"},H={key:0,class:"wallet"},I={key:1},N={key:2},V=B({__name:"web3Connect",setup(i){const n=x(),o=_(!1),t=_(null),s=_(!0);async function a(){try{o.value=!0,m().getConnectedWallet().then(async e=>{s.value=e.isSupport,t.value=m().getWeb3,e.address&&s.value&&await f(),o.value=!1}),o.value=!1}catch(e){console.error(e),o.value=!1}}function d(){m().disconnectWallet(),C().logOut()}const f=async()=>{o.value=!0,C().loginByUsername({username:"admin",password:"admin123"}).then(e=>{e.success&&E().then(()=>{n.push("/"),U("登录成功",{type:"success"})})}),o.value=!1};function l({code:e}){e==="Enter"&&a()}return W(()=>{window.document.addEventListener("keypress",l)}),z(()=>{window.document.removeEventListener("keypress",l)}),(e,y)=>{const r=L("el-button");return c(),u("div",null,[O("div",j,[t.value&&s.value?(c(),u("div",H,[h(r,{class:"w-full",size:"default",type:"danger",loading:o.value,onClick:d},{default:k(()=>[S(v(g(p)("web3.disconnect")),1)]),_:1},8,["loading"])])):!t.value&&s.value?(c(),u("div",I,[h(r,{class:"w-full",size:"default",type:"primary",loading:o.value,onClick:a},{default:k(()=>[S(v(g(p)("web3.connectWallet")),1)]),_:1},8,["loading"])])):(c(),u("div",N,v(g(p)("web3.noSupportChain")),1))])])}}});const P=T(V,[["__scopeId","data-v-c0955d45"]]),J=Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:"Module"}));export{J as a,U as m,P as w};
