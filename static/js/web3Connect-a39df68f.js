import{d as x}from"./vue-router-935545c9.js";import{E as M,t as f}from"./___vite-browser-external_commonjs-proxy-4a27f4fc.js";import{m as b,M as E}from"./index-492464ea.js";import{u as m}from"./web3Modal-05571856.js";import{aW as C}from"./index-29649dda.js";import{x as B,r as _,o as W,j as z,a7 as L,y as c,z as u,A as O,P as h,I as k,M as S,O as v,u as g}from"./runtime-core.esm-bundler-c80a0204.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";const U=(i,n)=>{if(n){const{icon:o,type:t="info",dangerouslyUseHTMLString:s=!1,customClass:a="antd",duration:d=2e3,showClose:p=!1,center:r=!1,offset:e=20,appendTo:y=document.body,grouping:l=!1,onClose:w}=n;return C({message:i,type:t,icon:o,dangerouslyUseHTMLString:s,duration:d,showClose:p,center:r,offset:e,appendTo:y,grouping:l,customClass:a==="antd"?"pure-message":"",onClose:()=>M(w)?w():null})}else return C({message:i,customClass:"pure-message"})},j={class:"container"},H={key:0,class:"wallet"},I={key:1},N={key:2},V=B({__name:"web3Connect",setup(i){const n=x(),o=_(!1),t=_(null),s=_(!0);async function a(){try{o.value=!0,m().getConnectedWallet().then(async e=>{s.value=e.isSupport,t.value=m().getWeb3,e.address&&s.value&&await p(),o.value=!1})}catch(e){console.error(e),o.value=!1}}function d(){m().disconnectWallet(),b().logOut()}const p=async()=>{o.value=!0,b().loginByUsername({username:"admin",password:"admin123"}).then(e=>{e.success&&E().then(()=>{n.push("/"),U("登录成功",{type:"success"})}),o.value=!1})};function r({code:e}){e==="Enter"&&a()}return W(()=>{window.document.addEventListener("keypress",r)}),z(()=>{window.document.removeEventListener("keypress",r)}),(e,y)=>{const l=L("el-button");return c(),u("div",null,[O("div",j,[t.value&&s.value?(c(),u("div",H,[h(l,{class:"w-full",size:"default",type:"danger",loading:o.value,onClick:d},{default:k(()=>[S(v(g(f)("web3.disconnect")),1)]),_:1},8,["loading"])])):!t.value&&s.value?(c(),u("div",I,[h(l,{class:"w-full",size:"default",type:"primary",loading:o.value,onClick:a},{default:k(()=>[S(v(g(f)("web3.connectWallet")),1)]),_:1},8,["loading"])])):(c(),u("div",N,v(g(f)("web3.noSupportChain")),1))])])}}});const P=T(V,[["__scopeId","data-v-d06459bd"]]),J=Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:"Module"}));export{J as a,U as m,P as w};
