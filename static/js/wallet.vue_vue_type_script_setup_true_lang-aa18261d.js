import{t as D}from"./i18n-4a0f4af2.js";import{A as L,_ as k,W as C}from"./add-circle-line-27d8bd35.js";import{u as y}from"./hooks-51d06512.js";import{u as s}from"./wallet-9d9b6135.js";import{W as A}from"./constants-b9202782.js";import{g as x}from"./web3-dfdb1234.js";import{_ as B}from"./WalletTable.vue_vue_type_style_index_0_lang-e014717d.js";import{x as b,r as n,o as I,a7 as R,aa as S,y as T,z as E,A as N,P as f,I as O,M as V,O as j,u as d,J as M,S as p}from"./runtime-core.esm-bundler-c80a0204.js";const $={class:"main"},H={class:"w-full flex justify-between mb-4"},z=b({name:"HomeWallet"}),X=b({...z,props:{connectedWallet:{type:Object,default:null},web3:{type:Object,default:null}},setup(g){const a=g,e=n([]),r=n(!0),o=n(null),i=async()=>{try{const l=await x(C,A[a.connectedWallet.chainId],a.web3).methods.getWalletList().call({from:a.connectedWallet.address});e.value=l,e.value.length>0?o.value?e.value.filter(u=>u.token.toLowerCase()===o.value.toLowerCase()).length<=0&&(s().setDefaultWallet(e.value[0].token),o.value=e.value[0].token):(s().setDefaultWallet(e.value[0].token),o.value=e.value[0].token):s().removeDefaultWallet()}catch{}finally{r.value=!1}},c=n(!1),m=n(null),h=t=>{c.value=!0,p(()=>{m.value=t??null})},w=t=>{p(()=>{r.value=!0,s().setDefaultWallet(t.token),i()})},v=()=>{i()};return I(()=>{i()}),(t,l)=>{const W=R("el-button"),u=S("loading");return T(),E("div",$,[N("div",H,[f(W,{icon:d(y)(d(L)),onClick:l[0]||(l[0]=_=>h())},{default:O(()=>[V(j(d(D)("wallet.btnAdd")),1)]),_:1},8,["icon"])]),M(f(B,{data:e.value,connectedWallet:a.connectedWallet,web3:a.web3,currentWallet:o.value,onChangeWallet:w,onRefreshWalletList:v},null,8,["data","connectedWallet","web3","currentWallet"]),[[u,r.value]]),f(k,{visible:c.value,"onUpdate:visible":l[1]||(l[1]=_=>c.value=_),data:m.value,onRefreshWalletList:v},null,8,["visible","data"])])}}});export{X as _};
